{"version":3,"sources":["../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/AudioManager.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/Common.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/gameA_SquareT.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/gameB_MathButton.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/gameC_MapButton.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/gameD_ColorButton.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/gameD_DiamondBox.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/ground_t.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/gtool_start_time.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/main.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/Proc_A_scene.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/Proc_B_scene.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/Proc_C_scene.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/Proc_D_scene.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/Proc_GameHome.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/Proc_Info.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/Proc_Login.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/Proc_R_scene.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_TermaGame/assets/Script/SpriteFrameManager.ts"],"names":["AudioManager","init","audioSource","log","_audioSource","isLoadOk","key","_cachedAudioClipMap","playMusic","name","path","cachedAudioClip","stop","clip","play","stopMusic","preloadSound","_soundName","push","assetManager","resources","load","AudioClip","err","console","warn","playSound","assert","playOneShot","nodeName","callback","target","_node","find","off","Node","EventType","TOUCH_START","on","_eventTarget","EventTarget","_store_data","store_data","EventEnum_Scene","RankData","_rank","_name","_score","rank","score","Update_Scean","nowGameSceneName","disGameUpdateObj","play_totle_score","play_score","comble_score","time_num","myRankData","play_last_time_m","play_last_time_s","play_last_time_ms","select_Game","mission_data","rank_data","bl_open_test_debug","bl_in_test_mode","window","location","hostname","i","this","load_mission_data","b64DecodeUnicode","str","decodeURIComponent","Array","prototype","map","call","atob","c","charCodeAt","toString","slice","join","TextAsset","file","str_b64","text","c0","c1","length","split","arr_b64js","b64js","d64","_this","jobj","JSON","parse","get_mission_data","_data","setWin","mis_cnt","win_cnt","combo_cnt","Time","Math","round","Score","LevelBase","ComboCount","ComboPlus","now_ComboPlus","get_bl_open_test_debug","getIsInTestMode","switchTestMode","CState","_state","_state_name","_into_func","_update_func","state","state_name","into_func","update_func","out_func","wait_time","elapsed_time","last_into_time","skip_to_state","bind","state_map","state_next","last_time","_proto2","add_new_state","set_Next_state","_state_next","newCState","get_state","get_now_state","update","_state_change","_state_update","nowCState","Date","now","ccclass","_decorator","property","type","Number","args","_initializerDefineProperty","_inheritsLoose","_proto","start","node","onTouchStart","common_getEventTarget","emit","GameA_event_SquareTouch","SquareNode","SquareNumber","deltaTime","Component","configurable","enumerable","writable","initializer","blTouchSW","hide_last_time","children","touchSwitch","sw","event","GameB_event_MathButton","active","path_name","istouch","basePostion","Vec2","basePostion_add","path_base","pname","padStart","TOUCH_MOVE","onTouchMove","TOUCH_END","onTouchEnd","TOUCH_CANCEL","getWorldPosition","resetTouch","check_Link","_index","_cnt_touched","_x","_y","floor","blLink","_index2","_chgBase_x","touch","getUILocation","x","_chgBase_y","y","index","GameC_event_MapButton","indexOf","btn_mask","blueNode","yellowNode","iColor","switch_fill","blColorSwitch","getChildByName","set_iColor","_iColor","y_sprite","getComponent","Sprite","fillRange","switchColor","gameD_ColorButton","iBoxID","iRL","iUB","Postion_Right_Up","Postion_Right_Down","Postion_Left_Up","Postion_Left_Down","step","blMoveFast","iRight","_BoxID","_iRL","_iUB","_blMoveFast","setPosition","spriteFrame","SpriteFrameManager","getSpriteFrame","move","speed","getPosition","right_btn","left_btn","GameD_event_BoxMoveEnd","ani_step","_scale","setScale","color","Color","spNodes","magic_circle","str_sp_path","str_sp_name","s02","sp_step","base_spNowY","base_groundY","add_eulerAnglesY","newPath","spBaseAngle","itouchMove","blTouch","blMove","itouch_bk_add_eulerAnglesY","to_endY","to_addY","lastMoved","blCanTouch","instantiate","eulerAngles","scale","_pos","getST","Ground_Event_UpdateGroup","sp_update","touch_node","onEventMove","onEventStart","onEventEnd","enableTouch","onBookEventEnd","pos","moveX","getLocation","getStartLocation","iPos","iPosM","iValue","iValue2","tmpValue","disableTouch","getScaleByeulerAnglesY","eulerAnglesY","oldstep","addChild","newNode","oldNode","removeChild","j","removeAllChildren","groundUpdate","rot","clone","setRotationFromEuler","new_spNowY","nodes","newAngles","newScale","nowScale","ang","neerY","Label","_now_last_time","last_timestamp","blTimesUP","strPath","numberNode","switchShow","_sw","getChildByPath","last_time_sec","update_time_lable","time_lable","now_time","iSec","String","AudioSource","onLoad","game","addPersistRootNode","Go_GameHome","go_GameHome","Go_Login","go_Login","Go_Game","go_Game","Go_Info","go_Info","str_spriteFrame","preloadSpriteFrame","str_sound_SoundEffect","str_music","getProc_A_scene","getProc_B_scene","getProc_C_scene","getProc_R_scene","getProc_D_scene","playname","getProc_Login","isRunning","director","loadScene","getProc_GameHome","getGameSceneName","getProc_Info","A_scene_state","_proc_A_scene","Proc_A_scene","CSquareline","one_quare_aroundline","node_line","node_line_path","show_line","line_cnt","hide_line","CSquareData","unitSet","jsonobj_unitSet","unit","shape","unitSetP","Row1","Row2","Row3","squareData_add","orgMapData","addMapData","getMapData","_unit_no","ret","baseMapData","blFind","oldPos","newPos","nX","nY","check_overlap","newMapData","check_equal","CSquare","node_square","PosX","PosY","mapdata","cSquareData","allSquare","blMoveDown","blBreakIn","breakStep","_squareNumber","_unitSet","setAllSquare","_allSquare","check_moveTo","_posX","_posY","_mapData","allSq_MapData","squareTmp","moveDown","breakIn","show_error","show_win","distory","destroy","splice","pointx","pointY","scaleTmp","cFSM","md","mission","right_mission","error_mission","last_is_right","arrQuestionNumber","cSquareline","cSquares","answerMapData","answer_no_X","node_StartTime","node_TimesUp","node_score_panle","play_last_time","strTutorialPath","blPlay10TimesSound","CFSM","add_FSM_state","st_init","QuestionUnitSet","gameA_event_SquareTouch","once","st_init_into","st_init_update","st_tutorial","st_tutorial_into","st_tutorial_update","st_into_animation","st_into_animation_into","st_into_animation_update","st_nextMission","st_nextMission_into","st_nextMission_update","st_play_input","st_play_input_into","st_play_input_update","st_show_result","st_show_result_into","st_show_result_update","st_show_mission_win","st_show_mission_win_into","st_show_mission_win_update","st_show_mission_err","st_show_mission_err_into","st_show_mission_err_update","st_timeup_animation","st_timeup_animation_into","st_timeup_animation_update","st_show_score","st_show_score_into","st_show_score_update","st_end","st_end_into","st_end_update","_no","needCnt","nowCnt","btn_start","btn_next_page","gtool_start_time","_page","QuestionCounts","_orgIndex","random","_moveIndex","_temp","now_mission","pop","mis_data","QuestionSet","ansMapDataTmp","sq_no","Answer","tmpData","Content","cSquare","lbBreak","lbMoveDown","sqT","string","RichText","bastScore","strTitlePath","rateP","_sec","_msec","B_scene_state","_proc_B_scene","Proc_B_scene","question_num","questionSet_num","questionSet_rate","Questions_node","now_answer","gameB_event_MathButton","rateCnt","QuestionType","QuestionProbability","num","get_next_question","create_10_question","q","shift","need_cnt","rand","at","idx","k","is_same","gameB_MathButton","C_scene_state","_proc_C_scene","Proc_C_scene","map_node","touch_flag","star_flag","star_pos","end_pos","start_pos","question_mapData","answer_mapData","MapButton_0","game_base_obj","game_obj_clone","game_base_obj_v2","game_base_obj_add_x","game_base_obj_add_y","game_objinMap","real_start_btn","init_map_node","gameC_MapButton","gameC_event_MapButton","st_realStart","st_waitRealStart","st_waitRealStart_into","st_waitRealStart_update","st_realStart_into","st_realStart_update","st_show_getStar","st_show_getStar_into","st_show_getStar_update","path_4","map_node_sub","mapData","QuestionData","TargetPoint","PlusPoint","BombCount","BombCounts","empMap","SafePoint","b","destroyAllChildren","objTmp","blBome","startFlag_x","startFlag_y","_proc_D_scene","Proc_D_scene","D_scene_state","CBoxData","iBoxNode","diamondBox","CBoxTool","cBoxs","iBoxID_G","next_createBox_wait_time","createBox_wait_time_last","iMinTime","iMxnTime","iMinLineTime","last_RL_create_time","iMaxFastBox","iMaxSlowBox","base_box_node","clone_parent_node","_box_base_node","_clone_parent_node","getNextCreateBoxWaitTime","createNewBox","iMaxBox","_cBox","imoveType","_cnt_f","_cnt_s","gameD_DiamondBox","delBox","deleteAll","_iTime","colorButton_RLs","box_base_node","clone_node","cBoxTool","gameD_event_BoxMoveEnd","iType","_proc_gameHome","Proc_GameHome","game_scene_name","game_sprite_name","game_book_sprite_name","gameSprite","gameBookSprite","btn_goLogin_name","btn_goInfo_name","gh_group","gh_subpage","ground_event_UpdateGroup","common_bind_touch_start","gh_show_exit","goLogin_Y","goLogin_N","goInfo","goGame","debug_btn","goGameUnlock","ground_t","href","_proc_info","Proc_Info","btn_goHome_name","goHome","_proc_login","Proc_Login","isLoading","wait_loading_time","R_scene_state","_proc_R_scene","Proc_R_scene","st_none","page_name","strButtonPath","strButtonName","now_page","onSelectGame","onCloseSelectGame","onOpenSelectGame","update_page","baseItem","pageRankData","item","str_page_tip_path","ipos","page_tip","str_page_title_path","page_title","_cachedSpriteFrameMap","_spriteName","SpriteFrame","sprite_frame"],"mappings":"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","file":"all.js","sourcesContent":["import { assert, assetManager, AudioClip, AudioSource, log } from \"cc\";\n\nexport class AudioManager {\n    private static _audioSource?: AudioSource;\n    private static _cachedAudioClipMap: Record<string, AudioClip> = {};\n    private static _soundName: string[]= [];\n  \n  \n\n    // init AudioManager in GameRoot component.\n    public static init (audioSource: AudioSource) {\n        log('Init AudioManager !');\n        AudioManager._audioSource = audioSource;\n    }\n\n    //是否載入完成\n    public static isLoadOk ():boolean {\n        for (let key in AudioManager._cachedAudioClipMap) {\n            if(AudioManager._cachedAudioClipMap[key] == null) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    public static playMusic (name: string) {\n        const path = `mp3/${name}`;\n        let cachedAudioClip = AudioManager._cachedAudioClipMap[path];\n        if (cachedAudioClip) {\n            const audioSource = AudioManager._audioSource!;\n            audioSource.stop();\n            audioSource.clip = cachedAudioClip;\n            audioSource.play();\n        }\n    }\n\n    public static stopMusic () {\n        const audioSource = AudioManager._audioSource!;\n        audioSource.stop();\n    }\n\n    \n\n    public static preloadSound (name: string) {\n        const path = `mp3/${name}`;\n        if(path in AudioManager._soundName) {\n            return;\n        }\n        AudioManager._soundName.push(path);\n        AudioManager._cachedAudioClipMap[path] = null;\n        assetManager.resources?.load(path, AudioClip, (err, clip) => {\n            if (err) {\n                console.warn(err);\n                return;\n            }\n            \n            AudioManager._cachedAudioClipMap[path] = clip;\n        });\n    }\n\n    public static playSound(name: string) {\n        \n        const audioSource = AudioManager._audioSource!;\n        assert(audioSource, 'AudioManager not inited!');\n        \n        console.log(`AudioManager play sound ${name}`);\n        \n        const path = `mp3/${name}`;\n        let cachedAudioClip = AudioManager._cachedAudioClipMap[path];\n        if (cachedAudioClip) {\n            audioSource.playOneShot(cachedAudioClip, 1);\n        } else {\n            if(path in AudioManager._soundName) {\n                return;\n            }\n            AudioManager._soundName.push(path);\n            AudioManager._cachedAudioClipMap[path] = null;\n            assetManager.resources?.load(path, AudioClip, (err, clip) => {\n                if (err) {\n                    console.warn(err);\n                    return;\n                }\n                \n                AudioManager._cachedAudioClipMap[path] = clip;\n                audioSource.playOneShot(clip, 1);\n            });\n        }\n    }\n}","import { EventTarget,Node,find,resources, TextAsset, log } from 'cc';\n\n\nvar _eventTarget:EventTarget = null;\n\nexport enum EventEnum_Scene {\n    Go_Login=       1000,//\"go_Login\"\n    Go_GameHome=    1001,//\"go_GameHome\"\n    \n    Go_Game=        1003,//\"go_Game\"\n\n    Go_Info=        1008,//\"go_Info\"\n\n    Ground_Event_UpdateGroup=    2001,//轉輪轉到定點事件\n\n    GameA_event_SquareTouch=     3001,//A遊戲方塊點擊\n\n    GameB_event_MathButton=      3002,//B遊戲數字點擊\n    GameC_event_MapButton=       3003,//C遊戲地圖格子點擊與移動\n    GameD_event_BoxMoveEnd=      3004,//D遊戲方塊移動到定點 0=正確 1=錯誤 2=動畫結束\n    }\n\n//綁定按鈕事件\nexport function common_bind_touch_start(nodeName:string,callback?: Function,target?:any):void{\n    let _node:Node = find(nodeName);\n    if(_node){\n        _node.off(Node.EventType.TOUCH_START, callback,target);\n        _node.on(Node.EventType.TOUCH_START, callback,target);\n    }\n    else{\n        console.log(\"common_bind_touch_start: node not found -> \"+nodeName);\n    }\n}\n\n//上層自定義事件發送\nexport function common_getEventTarget() {\n    if(_eventTarget === null) {\n        _eventTarget = new EventTarget();\n        console.log('new eventTarget');\n    }\n    return _eventTarget;\n  } \n\nexport class RankData{\n    public rank:number = 0;\n    public name:string = \"\";\n    public score:number = 0;\n\n    public constructor(_rank:number,_name:string,_score:number){\n        this.rank = _rank;\n        this.name = _name;\n        this.score = _score;\n    }\n}\n\nclass store_data{\n    //load ok\n    public isLoadOk:boolean = false; \n    \n    //開始進行遊戲循環\n    public Update_Scean:number = 0;   \n    //目前遊戲場景名稱\n    public nowGameSceneName:string = \"\";\n    //遊戲場景物件\n    public disGameUpdateObj: Record<string, any> = {};\n\n    //玩家總積分\n    public play_totle_score:number = 0;\n\n    //玩家這一場獲得積分\n    public play_score:number = 0;\n\n    public comble_score:number = 0;\n\n    public time_num:number = 0;\n\n    public myRankData:RankData[] = [];//0  認知  1\t數學  2\t記憶  3\t總排行  4\t注意力\n\n    //玩家剩餘時間_分\n    public play_last_time_m:number = 0;\n    //玩家剩餘時間_秒\n    public play_last_time_s:number = 0;\n    //玩家剩餘時間_毫秒\n    public play_last_time_ms:number = 0;\n\n    public select_Game:number = 1;//1  認知  2\t數學  3\t記憶  4\t排行  5\t注意力\n\n    public mission_data:any[] = [];\n\n    public rank_data:RankData[][] = []; //0  認知  1\t數學  2\t記憶  3\t總排行  4\t注意力\n\n   \n    private bl_open_test_debug:boolean = false;//是否開啟測試模式\n    private bl_in_test_mode:boolean = false;//是否正在進行測試\n      \n\n    public init(){\n        this.Update_Scean = 0;\n        \n        this.play_totle_score = 18453;//測試\n\n        if(window.location.hostname == \"ccg2022.mosasaurs-studio.com\"){\n            this.bl_open_test_debug = true;\n        }\n\n        //0  認知  1\t數學  2\t記憶  3\t總排行  4\t注意力\n        this.myRankData = [\n            new RankData(50,\"VIP06\",1010),\n            new RankData(54,\"VIP06\",1020),\n            new RankData(53,\"VIP06\",1030),\n            new RankData(51,\"VIP06\",1040),\n            new RankData(55,\"VIP06\",1050),\n        ];\n         //0  認知  1\t數學  2\t記憶  3\t總排行  4\t注意力\n         this.myRankData[3].score = 0;\n         for(let i = 0;i<5;i++){\n             if(i == 3) continue;\n             this.myRankData[3].score += this.myRankData[i].score;\n         }\n        \n\n        this.load_mission_data();\n\n        //\n        //測試排行資料\n        this.rank_data = [\n            [\n                new RankData(1,\"VIP33\",27000),\n                new RankData(2,\"VIP15\",25500),\n                new RankData(3,\"VIP01\",24000),\n                new RankData(4,\"VIP07\",22500),\n                new RankData(5,\"VIP03\",21000),\n                new RankData(6,\"VIP08\",20500),\n                new RankData(7,\"VIP05\",19000),\n                new RankData(8,\"VIP14\",17500),\n                new RankData(9,\"VIP21\",16000),\n            ],\n            [\n                new RankData(1,\"VIP33\",27000),\n                new RankData(2,\"VIP15\",25500),\n                new RankData(3,\"VIP04\",24000),\n                new RankData(4,\"VIP19\",22500),\n                new RankData(5,\"VIP18\",21000),\n                new RankData(6,\"VIP22\",20500),\n                new RankData(7,\"VIP13\",19000),\n                new RankData(8,\"VIP27\",17500),\n                new RankData(9,\"VIP25\",16000),\n            ],\n            [\n                new RankData(1,\"VIP19\",25000),\n                new RankData(2,\"VIP15\",22500),\n                new RankData(3,\"VIP33\",20000),\n                new RankData(4,\"VIP07\",17500),\n                new RankData(5,\"VIP03\",15000),\n                new RankData(6,\"VIP01\",12500),\n                new RankData(7,\"VIP08\",10000),\n                new RankData(8,\"VIP11\",7500),\n                new RankData(9,\"VIP05\",5000),\n            ],\n            [\n                new RankData(1,\"VIP33\",104000),\n                new RankData(2,\"VIP15\",93500),\n                new RankData(3,\"VIP19\",92500),\n                new RankData(4,\"VIP26\",91000),\n                new RankData(5,\"VIP03\",88500),\n                new RankData(6,\"VIP07\",86000),\n                new RankData(7,\"VIP01\",84500),\n                new RankData(8,\"VIP28\",82500),\n                new RankData(9,\"VIP11\",80500),\n            ],\n            [\n                new RankData(1,\"VIP33\",30000),\n                new RankData(2,\"VIP15\",28500),\n                new RankData(3,\"VIP03\",27000),\n                new RankData(4,\"VIP19\",25500),\n                new RankData(5,\"VIP07\",24000),\n                new RankData(6,\"VIP26\",22500),\n                new RankData(7,\"VIP11\",21000),\n                new RankData(8,\"VIP01\",20500),\n                new RankData(9,\"VIP28\",19000),\n            ]\n        ];\n\n        \n\n        //----test 初始化排行榜---------------------\n        /*\n        for (let i = 0; i < 5; i++) {\n            this.rank_data[i] = [];\n            let score_base = Math.floor(Math.random()*300000);\n            let imaxRank = 15;\n            if(i==3) imaxRank = 30;\n            for (let j = 0; j < imaxRank; j++) {\n                this.rank_data[i].push(new RankData(j+1,\"test_\"+(j+1),score_base-Math.floor(Math.random()*100)));\n            }\n        }\n        */\n        //-----------------------------------------\n        \n    }\n\n  \n\n    private b64DecodeUnicode(str) {\n        return decodeURIComponent(Array.prototype.map.call(atob(str), function(c) {\n            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)\n        }).join(''))\n    }\n\n    public load_mission_data(){\n        resources.load('jms',TextAsset, (err, file) => {\n            if (err) {\n                console.warn(err);\n                return;\n            }\n            let str_b64 = file.text;\n            let c0:string[] = ['!','-','>','<','~'];\n            let c1:string[] = ['=','0','A','N','C'];\n            for (let i = 0; i < c0.length; i++) {\n                str_b64 = str_b64.split(c0[i]).join(c1[i]);\n            }\n            //console.log(str_b64);\n            let arr_b64js = str_b64.split('|');\n     \n            \n            for (let i = 0; i < arr_b64js.length-1; i++) {\n                let b64js = arr_b64js[i];\n                let d64 = this.b64DecodeUnicode(b64js);\n           \n               \n                \n                let jobj = JSON.parse(d64);\n                this.mission_data.push(jobj);\n            }\n            this.isLoadOk = true;\n            console.log(\n                \"load_mission_data ok -> \"+this.mission_data.length);\n            \n        });\n\n    }\n\n    //取得關卡資料\n    public get_mission_data():any{\n        \n        let _data:number[] = [3,0,2,-1,1];\n        if(_data[this.select_Game-1] == -1){\n            return null;\n        }\n        else{\n            return this.mission_data[_data[this.select_Game-1]];\n        }\n    }\n\n    //設定贏的數據\n    public setWin(mis_cnt:number,win_cnt:number,combo_cnt:number){\n     \n\n        this.time_num =  this.get_mission_data().Time/mis_cnt;\n        this.time_num = Math.round(this.time_num * 100) / 100;\n        \n        //計算分數\n        this.play_score = this.get_mission_data().Score.LevelBase;\n    \n        log(this.get_mission_data());\n        let ComboCount:number[] = this.get_mission_data().Score.ComboCount;\n        let ComboPlus:number[] = this.get_mission_data().Score.ComboPlus;\n        let now_ComboPlus:number = 0;\n        for (let i = 0; i < ComboCount.length; i++) {\n            if(combo_cnt >= ComboCount[i]){\n                now_ComboPlus = ComboPlus[i];\n            }\n            else{\n                break;\n            }\n        }\n        this.comble_score = now_ComboPlus;\n        this.play_totle_score = this.play_score+this.comble_score;\n        if(this.myRankData[this.select_Game-1].score < this.play_totle_score){\n            this.myRankData[this.select_Game-1].score  = this.play_totle_score;\n        }\n         //0  認知  1\t數學  2\t記憶  3\t總排行  4\t注意力\n        this.myRankData[3].score = 0;\n        for(let i = 0;i<5;i++){\n            if(i == 3) continue;\n            this.myRankData[3].score += this.myRankData[i].score;\n        }\n    }\n   \n\n    //取得是否開啟測試模式\n    public get_bl_open_test_debug():boolean{\n        return this.bl_open_test_debug;\n    }\n\n    //取得目前測試模式\n    public getIsInTestMode():boolean{\n        if(this.bl_open_test_debug){\n            return this.bl_in_test_mode;\n        }\n        return false;\n    }\n\n    //測試開關\n    public switchTestMode ():boolean {\n        if(this.bl_open_test_debug){\n            this.bl_in_test_mode = !this.bl_in_test_mode;\n        }\n        return this.bl_in_test_mode;\n    }\n\n}\n\nvar _store_data:store_data = null;\n\n\nexport function getST() {\n\n    if(_store_data === null) {\n        _store_data = new store_data();\n        console.log('new store_data');\n    }\n    return _store_data;\n} \n\n\nexport class CState{\n    public state:number = 0;\n    public state_name:string = \"\";\n    public into_func:Function = null;\n    public update_func:Function = null;\n    public out_func:Function = null;\n    public wait_time:number = -1;\n    public elapsed_time:number = 0;//進入update開始的經過時間\n    public last_into_time:number = 0;//上次更新時間\n\n\n    public skip_to_state:number = -1;//進入後直接跳轉到的狀態 -1不跳轉\n\n    constructor(_state:number,_state_name:string,_into_func:Function,_update_func:Function,target:any){\n        this.state = _state;\n        this.state_name = _state_name;\n        this.into_func = _into_func.bind(target);\n        this.update_func = _update_func.bind(target);\n    }\n}\n\nexport class CFSM{\n    private state_map: Record<number, CState> = {};\n    private state:number = 0\n    private state_next:number = -1;//-1表示沒有下一個狀態\n\n    private last_time:number = 0;\n\n\n    public add_new_state(_state:number,_state_name:string,_into_func:Function,_update_func:Function,target:any){\n        let state = new CState(_state,_state_name,_into_func,_update_func,target);\n        this.state_map[state.state] = state;    \n    }\n\n    public set_Next_state(_state_next:number):boolean{\n        \n        if(this.state_next == -1){\n            let newCState:CState = this.state_map[_state_next];\n            if(newCState){\n                console.log(\"set_Next_state: \"+newCState.state+\"  \"+newCState.state_name);\n            \n                this.state_next = _state_next;\n                return true;   \n            }\n            return false;\n        }\n        return false;\n    }\n\n    public get_state(state:number):CState{\n        return this.state_map[state];\n    }\n\n    public get_now_state():CState{\n        return this.state_map[this.state];\n    }\n\n    public update(){\n\n        this._state_change();\n        this._state_update();\n    }\n\n    private _state_change(){\n        if(this.state_next == -1){\n            return;\n        }\n\n        let nowCState:CState = this.state_map[this.state];\n        if(nowCState){\n            if(nowCState.out_func != null){\n                nowCState.out_func();\n            }\n        }\n        let newCState:CState = this.state_map[this.state_next];\n\n        this.state = this.state_next;\n        this.state_next = -1;\n\n        if(newCState.into_func != null){\n            newCState.into_func();\n            newCState.last_into_time = Date.now();\n        }\n\n        this.last_time = Date.now();\n    }\n\n    private _state_update(){\n        let nowCState:CState = this.state_map[this.state];\n        if(!nowCState){\n            return;\n        }\n        \n        if(nowCState.wait_time > 0){\n            if(Date.now() - this.last_time < nowCState.wait_time){\n                return;\n            }\n            this.last_time = Date.now();\n        }\n        nowCState.elapsed_time = Date.now() - nowCState.last_into_time;\n\n        if(nowCState.update_func != null){\n            nowCState.update_func();\n        }\n        if(nowCState.skip_to_state != -1){\n            this.set_Next_state(nowCState.skip_to_state);\n        }\n    }\n}","import { _decorator, Component, Node,find,instantiate, EventTouch, math } from 'cc';\nconst { ccclass, property } = _decorator;\nimport { common_getEventTarget ,EventEnum_Scene} from './Common';\n\n@ccclass('gameA_SquareT')\nexport class gameA_SquareT extends Component {\n    \n   \n    @property({ type: Number })\n    public SquareNumber:Number = 0;\n\n    @property({ type: Node })\n    public SquareNode:Node = null;\n    \n    start() {\n        this.node.on(Node.EventType.TOUCH_START, this.onTouchStart, this);\n    }\n       \n    onTouchStart(){\n        common_getEventTarget().emit(EventEnum_Scene.GameA_event_SquareTouch,this.SquareNode,this.SquareNumber);\n    }\n\n    update(deltaTime: number) {\n      \n          \n        \n    }\n}\n\n","import { _decorator, Component, Node,find,instantiate, EventTouch, math } from 'cc';\nconst { ccclass, property } = _decorator;\nimport { common_getEventTarget ,EventEnum_Scene} from './Common';\n\n@ccclass('gameB_MathButton')\nexport class gameB_MathButton extends Component {\n    \n    private blTouchSW:boolean = false;//false:不顯示 true:顯示\n    private hide_last_time:number[] = [];\n\n    start() {\n        this.blTouchSW = false;\n        for(let i=0;i<9;i++){\n            this.node.children[i].on(Node.EventType.TOUCH_START, this.onTouchStart,this);\n            this.hide_last_time.push(-1);\n        }\n\n    }\n    //點擊開關\n    public touchSwitch(sw:boolean){\n        this.blTouchSW = sw;\n    }\n       \n    onTouchStart(event: EventTouch) {\n        if(this.blTouchSW==false) return;\n        \n        common_getEventTarget().emit(EventEnum_Scene.GameB_event_MathButton,Number(event.target.name));\n        for(let i=0;i<9;i++){\n            if(this.node.children[i] == event.target){\n                this.hide_last_time[i] = 3;\n                this.node.children[i].active = false;\n                break;\n            }\n        }\n    }\n\n    update(deltaTime: number) {\n        for(let i=0;i<9;i++){\n            if(this.hide_last_time[i] > 0){\n                this.hide_last_time[i] -= deltaTime;\n                \n                if(this.hide_last_time[i] <= 0){\n                    this.hide_last_time[i] = -1;\n                    this.node.children[i].active = true;\n                }\n            }\n        }\n        \n    }\n}\n\n","import { _decorator, Component, Node,find,instantiate, EventTouch, math, log, Vec2 } from 'cc';\nconst { ccclass, property } = _decorator;\nimport { common_getEventTarget ,EventEnum_Scene} from './Common';\n\n@ccclass('gameC_MapButton')\nexport class gameC_MapButton extends Component {\n    \n    private blTouchSW:boolean = false;//false:不顯示 true:顯示\n    private path_name:string[] = [];\n    private istouch:boolean[] = [];\n    private basePostion:Vec2 = new Vec2(100,835);//-187 190\n    private basePostion_add:number = 125;\n\n    start() {\n        this.blTouchSW = false;\n\n        let path_base:string = \"Canvas/格子/一般格子/方塊_一般\";\n       \n        for(let i=0;i<16;i++){\n            let path = path_base;\n            let pname = \"方塊_一般\"\n            if(i>0){\n                path = path_base + \"-\"+i.toString().padStart(3, '0');\n                pname+= \"-\"+i.toString().padStart(3, '0');\n            }\n            let node = find(path);\n            \n            node.on(Node.EventType.TOUCH_START, this.onTouchStart,this);\n            node.on(Node.EventType.TOUCH_MOVE, this.onTouchMove,this);\n            node.on(Node.EventType.TOUCH_END, this.onTouchEnd,this);\n            node.on(Node.EventType.TOUCH_CANCEL, this.onTouchEnd,this);\n\n            this.path_name.push(pname);\n            this.istouch.push(false);\n            if(i == 0){\n                console.log(node,node.getWorldPosition());\n            }\n        }\n\n    }\n    //點擊開關\n    public touchSwitch(sw:boolean){\n        this.blTouchSW = sw;\n    }\n\n    public resetTouch(){\n        for(let i=0;i<16;i++){\n            this.istouch[i] = false;\n        }   \n    }\n\n    private check_Link(_index:number):boolean{\n        let _cnt_touched:number = 0;\n        for(let i=0;i<16;i++){\n            if(this.istouch[i]){\n                _cnt_touched++;\n            }\n        }\n        if(_cnt_touched==0) return true;\n        let _x = _index%4;\n        let _y = Math.floor(_index/4);\n        let blLink:boolean = false;\n        if(_x-1>=0){\n            let _index2 = _y*4 + (_x-1);\n            if(this.istouch[_index2]){\n                blLink = true;\n            }\n        }\n        if(_x+1<=3){\n            let _index2 = _y*4 + (_x+1);\n            if(this.istouch[_index2]){\n                blLink = true;\n            }\n        }\n        if(_y-1>=0){\n            let _index2 = (_y-1)*4 + _x;\n            if(this.istouch[_index2]){\n                blLink = true;\n            }\n        }\n        if(_y+1<=3){\n            let _index2 = (_y+1)*4 + _x;\n            if(this.istouch[_index2]){\n                blLink = true;\n            }\n        }\n        if(blLink==false) return false;\n\n        return true;\n    }\n    onTouchMove(event: EventTouch) {\n        if(this.blTouchSW==false) return;\n        let _chgBase_x = event.touch.getUILocation().x-this.basePostion.x;\n        let _chgBase_y = this.basePostion.y-event.touch.getUILocation().y;\n        let _x = Math.floor(_chgBase_x/this.basePostion_add);\n        let _y = Math.floor(_chgBase_y/this.basePostion_add);\n        if(_x<0) _x = 0;\n        if(_x>3) _x = 3;\n        if(_y<0) _y = 0;\n        if(_y>3) _y = 3;\n      \n        let index = _y*4 + _x;\n        \n    \n        //log(index,_x,_y,event.type,event.touch.getUILocation().x,event.touch.getUILocation().y);\n\n        if(this.istouch[index] == true) return;\n\n        if(this.check_Link(index)==false) return;\n        \n        this.istouch[index] = true;\n\n        common_getEventTarget().emit(EventEnum_Scene.GameC_event_MapButton,index);\n\n      \n      \n    }\n       \n    onTouchStart(event: EventTouch) {\n        if(this.blTouchSW==false) return;\n      \n        let index = this.path_name.indexOf(event.target.name);\n      \n       // log(index,event.type,event.getLocationX(),event.getLocationY());\n      \n        if(this.istouch[index] == true) return;\n\n        if(this.check_Link(index)==false) return;\n        \n        this.istouch[index] = true;\n        \n        common_getEventTarget().emit(EventEnum_Scene.GameC_event_MapButton,index);\n    }\n\n    onTouchEnd(event: EventTouch) {\n        if(this.blTouchSW==false) return;\n\n        common_getEventTarget().emit(EventEnum_Scene.GameC_event_MapButton,255);\n\n    }\n\n    update(deltaTime: number) {\n        \n    }\n}\n\n","import { _decorator, Component, Node,find,instantiate, EventTouch, math,Sprite } from 'cc';\nconst { ccclass, property } = _decorator;\nimport { common_getEventTarget ,EventEnum_Scene} from './Common';\n\n@ccclass('gameD_ColorButton')\nexport class gameD_ColorButton extends Component {\n    \n    private blTouchSW:boolean = false;//false:不顯示 true:顯示\n    private btn_mask:Node = null;\n    private blueNode:Node = null;\n    private yellowNode:Node = null;\n\n    public iColor:number = 0; //0=blue 1=yallow\n\n    private last_time:number = 0;\n    private switch_fill:number = 0;\n    private blColorSwitch:boolean = false;\n\n\n    start() {\n        this.blTouchSW = false;\n        this.btn_mask = this.node.getChildByName(\"Mask\");\n        this.blueNode = this.node.getChildByName(\"Blue\");\n        this.yellowNode = this.node.getChildByName(\"Yellow\");\n\n        this.set_iColor(0);\n        this.btn_mask.on(Node.EventType.TOUCH_START, this.onTouchStart,this);\n\n\n        //this.blTouchSW = true;//test\n    }\n    //點擊開關\n    public touchSwitch(sw:boolean){\n        this.blTouchSW = sw;\n    }\n\n    //直接設定顏色 0=blue 1=yallow\n    public set_iColor(_iColor:number){\n        this.iColor = _iColor;\n        this.blueNode.active = true;\n        this.yellowNode.active = true;\n        let y_sprite:Sprite = this.yellowNode.getComponent(Sprite);\n        \n        if(this.iColor == 0){\n            y_sprite.fillRange = 0;\n        }\n        else{\n            y_sprite.fillRange = 1;\n        }\n    }\n\n    public switchColor(){\n        this.switch_fill = 0;\n        this.last_time = Date.now();\n        this.blColorSwitch = true;\n\n    }\n       \n    onTouchStart(event: EventTouch) {\n        if(this.blTouchSW==false) return;\n        if(this.blColorSwitch == true) return;\n\n        this.switchColor();\n\n        \n    }\n\n    update(deltaTime: number) {\n        if(this.blColorSwitch == true){\n            let now_time:number = Date.now();\n\n            if((Date.now()-this.last_time) >= 33){\n                this.last_time = Date.now();\n\n                this.switch_fill += 0.2;\n\n        \n                let y_sprite:Sprite = this.yellowNode.getComponent(Sprite);\n                \n\n           \n                if(this.switch_fill >= 1){\n                    this.blColorSwitch = false;  \n                    this.set_iColor(this.iColor==0?1:0);\n                }\n                else{\n                    if(this.iColor == 0){\n                        y_sprite.fillRange = 0-this.switch_fill;\n                    }\n                    else{\n                        y_sprite.fillRange = 1-this.switch_fill;\n                    }\n                }\n            }\n        }\n        \n        \n    }\n}\n\n","import { _decorator, Component, Color, Vec2,Sprite } from 'cc';\nconst { ccclass, property } = _decorator;\nimport { common_getEventTarget ,EventEnum_Scene} from './Common';\nimport { SpriteFrameManager } from './SpriteFrameManager';\nimport { gameD_ColorButton } from './gameD_ColorButton';\n\n@ccclass('gameD_DiamondBox')\nexport class gameD_DiamondBox extends Component {\n    \n    @property({ type: gameD_ColorButton })\n    public right_btn:gameD_ColorButton = null;\n\n    @property({ type: gameD_ColorButton })\n    public left_btn:gameD_ColorButton = null;\n\n    public iBoxID:number = 0;\n\n    //出現方向\n    private iRL:number = 0;//0=right 1=left\n    private iUB:number = 0;//0=UP 1=DOWN\n\n    private Postion_Right_Up:Vec2 = new Vec2(120,440);\n    private Postion_Right_Down:Vec2 = new Vec2(120,-440);\n    private Postion_Left_Up:Vec2 = new Vec2(-120,440);\n    private Postion_Left_Down:Vec2 = new Vec2(-120,-440);\n\n    private last_time:number = 0;\n    private iColor:number = 0;//0=blue 1=yallow\n    public step:number = 0;//0=移動中 1=動畫 2=結束\n\n    public blMoveFast:boolean = false;//快速移動\n\n    private iRight:number = 1;//0=正確 1=錯誤\n\n\n    start() {\n        \n    }\n    public init(_BoxID:number,_iColor:number,_iRL:number,_iUB:number,_blMoveFast:boolean){\n        this.iBoxID = _BoxID;\n        this.iColor = _iColor;\n        this.iRL = _iRL;\n        this.iUB = _iUB;\n        this.blMoveFast = _blMoveFast;\n        let _x,_y = 0;\n        if(_iRL == 0 && _iUB == 0){\n            _x = this.Postion_Right_Up.x;\n            _y = this.Postion_Right_Up.y;\n        }\n        else if(_iRL == 0 && _iUB == 1){\n            _x = this.Postion_Right_Down.x;\n            _y = this.Postion_Right_Down.y;\n        }\n        else if(_iRL == 1 && _iUB == 0){\n            _x = this.Postion_Left_Up.x;\n            _y = this.Postion_Left_Up.y;\n        }\n        else if(_iRL == 1 && _iUB == 1){\n            _x = this.Postion_Left_Down.x;\n            _y = this.Postion_Left_Down.y;\n        }\n        this.node.setPosition(_x,_y);\n        this.step = 0;\n\n        if(this.iColor == 0){\n            this.node.getComponent(Sprite).spriteFrame = SpriteFrameManager.getSpriteFrame(\"b_box\");\n        }\n        else{\n            this.node.getComponent(Sprite).spriteFrame = SpriteFrameManager.getSpriteFrame(\"y_box\");\n        }\n        this.node.active = true;\n    }\n\n    private move(){\n        if(this.step != 0) return;\n\n        let speed:number = 10;\n        if(this.blMoveFast == true){\n            speed = 15;\n        }\n        let endY = 2;\n        let _y:number = this.node.getPosition().y;\n        if(this.iUB == 0){\n            _y-=speed;\n            if(_y<=endY){\n                _y = endY;\n                this.step = 1;\n            }\n        }\n        else{\n           _y+=speed; \n           if(_y>=endY){\n                _y = endY;\n                this.step = 1;\n            }\n        }\n        this.node.setPosition(this.node.getPosition().x,_y);\n        if(this.step == 1){\n            this.iRight = 1;//0=正確 1=錯誤\n            if(this.iRL == 0){\n                if(this.iColor == this.right_btn.iColor){\n                    this.iRight = 0;\n                }\n            }\n            else{\n                if(this.iColor == this.left_btn.iColor){\n                    this.iRight = 0;\n                }   \n            }\n            if(this.iColor == 0){\n                if(this.iRight == 0){\n                    this.node.getComponent(Sprite).spriteFrame = SpriteFrameManager.getSpriteFrame(\"b_box_right\");\n                }\n                else{\n                    this.node.getComponent(Sprite).spriteFrame = SpriteFrameManager.getSpriteFrame(\"b_box_err\");\n                }\n            }\n            else{\n                if(this.iRight == 0){\n                    this.node.getComponent(Sprite).spriteFrame = SpriteFrameManager.getSpriteFrame(\"y_box_right\");\n                }\n                else{\n                    this.node.getComponent(Sprite).spriteFrame = SpriteFrameManager.getSpriteFrame(\"y_box_err\");\n                }\n            }\n            common_getEventTarget().emit(EventEnum_Scene.GameD_event_BoxMoveEnd,this.iRight,this.iBoxID);\n        }\n    }\n\n    \n\n    update(deltaTime: number) {\n        if(this.step == 0){\n            if(Date.now() - this.last_time >= 33){\n                this.move();\n                this.last_time = Date.now();\n            }\n        }\n        else if(this.step == 1){\n            let ani_step = (Date.now() - this.last_time)/33;\n          \n            let _scale:number = ani_step*0.06+1;\n            if(this.iRight == 0){\n                this.node.setScale(_scale,_scale);\n            }\n            this.node.getComponent(Sprite).color = new Color(255,255,255,255-ani_step*20);\n\n            if(ani_step >= 10){\n                this.step = 2;\n                this.node.active = false;\n                common_getEventTarget().emit(EventEnum_Scene.GameD_event_BoxMoveEnd,2,this.iBoxID);\n            }\n        }\n        \n    }\n}\n\n","import { _decorator, Component, Node,find,instantiate, EventTouch, math } from 'cc';\nconst { ccclass, property } = _decorator;\nimport { common_getEventTarget ,EventEnum_Scene,getST} from './Common';\nimport { AudioManager } from './AudioManager';\n\n@ccclass('ground_t')\nexport class ground_t extends Component {\n    \n    wait_time:number = 0;\n    spNodes:Node[] = [];\n    magic_circle:Node = null;\n    str_sp_path:string[] = [\n        \"Canvas/ground/btn_event_Mask/ground/01/spriteFrame\",\n        \"Canvas/ground/btn_event_Mask/ground/01/spriteFrame-001\",\n        \"Canvas/ground/btn_event_Mask/ground/01/spriteFrame-002\",\n        \"Canvas/ground/btn_event_Mask/ground/01/spriteFrame-003\",\n        \"Canvas/ground/btn_event_Mask/ground/01/spriteFrame-004\"    \n    ];\n    str_sp_name:string[] = [\n        \"spriteFrame\",\n        \"spriteFrame-001\",\n        \"spriteFrame-002\",\n        \"spriteFrame-003\",\n        \"spriteFrame-004\"    \n    ];\n    s02:Node = null;\n    sp_step:number = 0; //1-12\n    base_spNowY:number = 0; //現在的書角度\n    base_groundY:number = 0;//轉盤角度\n    add_eulerAnglesY:number = 0;//增加的角度\n \n\n    newPath:number[][] = [\n        \n        [3,2,4,1,0],\n        [2,3,4,1,0],\n        [2,3,1,4,0],\n        [1,2,3,0,4],\n        [1,2,3,0,4],\n        [1,2,0,4,3],\n        [0,1,4,3,2],\n        [0,1,4,3,2],\n        [0,4,1,3,2],\n        [4,0,3,1,2],\n        [4,3,0,2,1],\n        [3,2,4,1,0],\n    ];\n    //spBaseAngle:number[] = [70,350,260,200,140];\n    spBaseAngle:number[] = [0,72,144,216,288];\n\n    //base 105(1)   0=175 1=94  2=10  3=303 4=245\n    //105+70=175    0=70  1=340 2=265 3=198 4=140  \n    //base 175   175 103  31 319 247   \n    itouchMove:number = 0;\n    blTouch:boolean = false;\n    blMove:boolean = false;\n    itouch_bk_add_eulerAnglesY:number = 0;\n    to_endY:number = -1;\n    to_addY:number = 0;\n    lastMoved:number = 0;\n   \n    private blCanTouch:boolean = true;\n\n \n\n    \n    start() {\n        console.log(this.node.name+\" start\");\n      //  console.log(this.node.eulerAngles);\n        for(let i = 0;i < this.str_sp_path.length;i++){\n            this.spNodes.push(find(this.str_sp_path[i]));\n        }\n        this.magic_circle = instantiate(find(\"Canvas/ground/btn_event_Mask/ground/01/magic_circle\"));\n        let s01:Node = find(\"Canvas/ground/btn_event_Mask/ground/01\");\n        s01.active = false;\n\n        this.s02 = find(\"Canvas/ground/btn_event_Mask/ground/02\");\n        this.base_spNowY = this.spNodes[0].eulerAngles.y;\n        this.base_groundY = this.node.eulerAngles.y;\n\n        \n        this.spNodes[0].scale\n\n        //----設定初始位置---------------------\n        let _pos = getST().select_Game;\n        this.add_eulerAnglesY = 360-this.spBaseAngle[_pos-1];\n        if(this.add_eulerAnglesY == 360)\n            this.add_eulerAnglesY = 0;\n        common_getEventTarget().emit(EventEnum_Scene.Ground_Event_UpdateGroup,_pos);\n        //-------------------------------------\n      \n\n        this.sp_update(this.add_eulerAnglesY);\n        let touch_node = find(\"Canvas/ground/btn_event_Mask\");\n        touch_node.on(Node.EventType.TOUCH_MOVE, this.onEventMove, this);\n        touch_node.on(Node.EventType.TOUCH_START, this.onEventStart, this);\n        touch_node.on(Node.EventType.TOUCH_END, this.onEventEnd, this);\n        touch_node.on(Node.EventType.TOUCH_CANCEL, this.onEventEnd, this);\n\n\n    this.enableTouch();\n        \n    }\n    onEventStart(event:EventTouch){\n        if(this.blCanTouch == false) return;\n\n        this.blTouch = true;\n        this.itouch_bk_add_eulerAnglesY = this.add_eulerAnglesY;\n    }\n\n    onBookEventEnd(event:EventTouch){\n        if(this.blCanTouch == false) return;\n\n        if(this.blMove==true){\n            return;\n        }\n        AudioManager.playSound(\"UI_click\");\n        let pos = this.str_sp_name.indexOf(event.target.name)+1;\n        \n        console.log(\"onBookEventEnd \"+pos,event.target.name);\n\n        this.to_endY = Math.floor(360-this.spBaseAngle[pos-1]);\n        if(this.to_endY  >= 360){\n            this.to_endY -= 360;\n        }\n        console.log(pos,this.to_endY);\n        this.add_eulerAnglesY = Math.floor(this.add_eulerAnglesY);\n        if(this.to_endY == this.add_eulerAnglesY){\n            return;\n        }\n        if(this.to_endY > this.add_eulerAnglesY){\n            this.to_addY = 1;\n        }else{\n            this.to_addY = -1;\n        }\n        \n        \n        \n    }\n\n    onEventEnd(event:EventTouch){\n        if(this.blCanTouch == false) return;\n        \n        this.blTouch = false;\n        this.blMove = false;\n        let moveX = event.touch.getLocation().x - event.touch.getStartLocation().x;\n        if(moveX < 3 && moveX > -3){\n            this.add_eulerAnglesY = this.itouch_bk_add_eulerAnglesY;\n            return;\n        }\n        \n        let iPos:number = -1;\n        let iPosM:number = -1;\n        let iValue:number = -1;\n        let iValue2:number = -1;\n        if(this.to_addY > 0){\n            iValue = 360;\n            iValue2 = 360;\n            for(let i = 0;i < this.spBaseAngle.length;i++){\n                let tmpValue = this.spBaseAngle[i] - this.add_eulerAnglesY;\n                if(tmpValue>=0 && tmpValue < iValue){\n                    iValue = tmpValue;\n                    iPos = i;\n                }\n                if(this.spBaseAngle[i] < iValue2){\n                    iValue2 = this.spBaseAngle[i];\n                    iPosM = i;\n                }\n            } \n            if(iPos == -1){\n                iPos = iPosM;\n            }\n        }\n        else{\n            iValue = 360;\n            iValue2 = 0;\n            for(let i = 0;i < this.spBaseAngle.length;i++){\n                let tmpValue = this.add_eulerAnglesY - this.spBaseAngle[i];\n                if(tmpValue>=0 && tmpValue < iValue){\n                    iValue = tmpValue;\n                    iPos = i;\n                }\n                if(this.spBaseAngle[i] > iValue2){\n                    iValue2 = this.spBaseAngle[i];\n                    iPosM = i;\n                }\n            } \n            if(iPos == -1){\n                iPos = iPosM;\n            }  \n        }\n        this.to_endY = Math.floor(this.spBaseAngle[iPos]);\n        this.add_eulerAnglesY = Math.floor(this.add_eulerAnglesY);\n\n        console.log(\"iPos:\"+iPos);\n        console.log(\"to_endY:\"+this.to_endY);\n        console.log(\"add_eulerAnglesY:\"+this.add_eulerAnglesY);\n        console.log(\"to_addY:\"+this.to_addY);\n        \n        \n    }\n\n    onEventMove(event:EventTouch){\n        if(this.blCanTouch == false) return;\n\n        let moveX = event.touch.getLocation().x - event.touch.getStartLocation().x;\n        this.itouchMove = moveX;\n        if(this.blMove == false){\n            if(moveX > 3 || moveX < -3){\n                this.blMove = true;\n            }\n        }\n        this.add_eulerAnglesY = this.itouch_bk_add_eulerAnglesY + this.itouchMove/2;\n        if(this.add_eulerAnglesY >= 360){\n            this.add_eulerAnglesY-=360;\n        }\n        else if(this.add_eulerAnglesY < 0){\n            this.add_eulerAnglesY+=360;\n        }\n        if((event.touch.getLocation().x-this.lastMoved) > 0){\n            this.to_addY = 1;\n        }\n        else{\n            this.to_addY = -1;\n        }\n        this.lastMoved = event.touch.getLocation().x;\n    }\n\n    public enableTouch(){\n        this.blCanTouch = true;\n    }\n\n    public disableTouch(){\n        this.blCanTouch = false;\n    }\n\n    //由角度取得縮放\n    getScaleByeulerAnglesY(eulerAnglesY:number):number{\n        let iScale:number = 0;//1-0.6\n        let base = 0.6;\n\n        if(eulerAnglesY >= 360){\n            eulerAnglesY -= 360;\n        }\n        else if(eulerAnglesY < 0){\n            eulerAnglesY += 360;\n        }\n\n        if(eulerAnglesY > 180){\n            eulerAnglesY = 360 - eulerAnglesY;\n        }\n        iScale = base + (1-base)*((180-eulerAnglesY)/180);\n\n        return iScale;\n    }\n\n    sp_update(eulerAnglesY:number){\n        let step:number = Math.floor(eulerAnglesY/30)+1;\n        if(step != this.sp_step){\n            let oldstep = this.sp_step;\n            this.sp_step = step;\n\n            //console.log(\"step:\"+step,this.newPath[step-1]);\n            \n           \n            if(this.s02.children.length == 0){\n\n                for(let i = 0;i < this.newPath[step-1].length;i++){\n                    if(i==0){\n                        this.magic_circle.active = true;\n                        this.s02.addChild(this.magic_circle);\n                    }\n\n                    let newNode:Node = instantiate(this.spNodes[this.newPath[step-1][i]]);\n                    newNode.on(Node.EventType.TOUCH_END, this.onBookEventEnd, this);\n                    newNode.active = true;\n                    this.s02.addChild(newNode);\n                }\n                \n            }\n            else{\n                let oldNode:Node[] = [];\n              \n                this.s02.removeChild(this.magic_circle);\n                for(let i = 0;i < 5;i++){\n                    for(let j = 0;j < 5;j++){\n                        if(this.newPath[oldstep-1][j] == i){\n                            oldNode.push(this.s02.children[j]);\n                            break;\n                        }\n                    }\n                }\n                \n                \n                this.s02.removeAllChildren();\n        \n                for(let i = 0;i < 5;i++){\n                    if(i==0){\n                        this.s02.addChild(this.magic_circle);\n                    }\n\n                    this.s02.addChild(oldNode[this.newPath[step-1][i]]);\n                    \n                }\n            }\n            \n        }\n    }\n\n    groundUpdate(){\n        let rot = this.node.eulerAngles.clone();\n        rot.y = this.base_groundY + this.add_eulerAnglesY;\n        if(rot.y >= 360){\n            rot.y -= 360;\n        }\n        this.node.setRotationFromEuler(rot); \n        \n        let new_spNowY = this.base_spNowY - this.add_eulerAnglesY;\n        if(new_spNowY < 0){\n            new_spNowY += 360;\n        }\n        this.sp_update(this.add_eulerAnglesY);\n        \n        let nodes:Node[] = [];\n        for(let i = 0;i < this.s02.children.length;i++){\n            if(this.s02.children[i]!=this.magic_circle){\n                nodes.push(this.s02.children[i]);\n            }\n        }\n       // console.log(\"groundUpdate \",this.newPath[this.sp_step-1],this.add_eulerAnglesY);\n        for(let i = 0;i < nodes.length;i++){\n            let rot = nodes[i].eulerAngles.clone();\n            rot.y = new_spNowY;\n            nodes[i].setRotationFromEuler(rot);\n           \n            //----計算縮放--------------------------------------\n            let pos = this.newPath[this.sp_step-1][i];\n            let newAngles = this.spBaseAngle[pos] + this.add_eulerAnglesY;\n            let newScale = this.getScaleByeulerAnglesY(newAngles)*0.004;\n            let nowScale = nodes[i].scale.clone();\n           //console.log(newAngles,newScale);\n            nowScale.x = newScale;\n            nowScale.y = newScale;\n            nodes[i].setScale(nowScale);\n            //------------------------------------------------\n        }    \n    }\n\n\n    \n\n    update(deltaTime: number) {\n        this.wait_time += deltaTime*1000;\n        \n        if(this.wait_time >= 33){\n            this.wait_time = 0;\n            \n            if(this.blTouch == false){\n            \n                if(this.to_endY != -1){\n\n                    if(this.add_eulerAnglesY == this.to_endY){\n                        this.to_endY = -1;\n                        let ang:number = 360-this.add_eulerAnglesY;\n                        if(ang >= 360){\n                            ang -= 360;\n                        }\n                        let _pos = this.spBaseAngle.indexOf(ang);\n                        common_getEventTarget().emit(EventEnum_Scene.Ground_Event_UpdateGroup,_pos+1);\n                    }\n                   \n                    this.add_eulerAnglesY += this.to_addY*3;\n                    let neerY = this.to_endY - this.add_eulerAnglesY;\n                    if(neerY < 3 && neerY > -3){\n                        this.add_eulerAnglesY = this.to_endY;\n                    }\n\n                    if(this.add_eulerAnglesY >= 360){\n                        this.add_eulerAnglesY-=360;\n                    }\n                    else if(this.add_eulerAnglesY < 0){\n                        this.add_eulerAnglesY+=360;\n                    } \n                }\n            }\n\n            \n\n            this.groundUpdate();\n          \n        }  \n    }\n}\n\n","import { _decorator, Component, Node,find,instantiate, EventTouch, math, Label ,log} from 'cc';\nconst { ccclass, property } = _decorator;\nimport { common_getEventTarget ,EventEnum_Scene} from './Common';\n\n@ccclass('gtool_start_time')\nexport class gtool_start_time extends Component {\n    \n   \n    @property({ type: Number })\n    public last_time_sec:number = 3;\n\n    @property({ type: Label })\n    public time_lable:Label = null;\n\n    private _now_last_time:number = 0;\n    private last_timestamp:number = 0;//主要FPS上一次時間\n    public blTimesUP:boolean = false;\n\n    private strPath:string[] = [\"超能學習_1\",\"超能學習_2\",\"超能學習_3\"];\n    private numberNode:Node[] = [];\n\n    \n    start() {\n        this.switchShow(true);\n    }\n    \n    public switchShow(_sw:boolean){\n        if(_sw){\n            this.numberNode = [];\n            for(let i=0;i<this.strPath.length;i++){\n                let node:Node = this.node.getChildByPath(this.strPath[i]);\n                if(node){\n                    this.numberNode.push(node);\n                    node.active = false;\n                }\n            }\n\n            this._now_last_time=Date.now()+this.last_time_sec*1000;\n            this.update_time_lable();\n            this.blTimesUP = false;\n            this.node.active = true;\n            if(this.time_lable){\n                this.time_lable.node.active = false;\n            }\n        }\n        else{\n            this._now_last_time = Date.now();\n        }\n\n    }\n\n    update_time_lable(){\n        if(this.time_lable == null){\n            return;\n        }\n        if(this.numberNode.length == 0) return;\n\n        let now_time = this._now_last_time-Date.now();\n        if(now_time<=0){\n            now_time = 0;\n        }\n        let iSec:number = Math.floor(now_time/1000);\n        if(iSec >=0 && iSec<3){\n            if(this.numberNode[iSec].active == false){\n                for(let i=0;i<this.numberNode.length;i++){\n                    this.numberNode[i].active = false;\n                }\n                this.numberNode[iSec].active = true;\n            }\n        }\n        //let strtime = \"...\"+Math.floor(now_time/1000)+\"...\";\n        //this.time_lable.string = strtime;\n\n    }\n\n    update(deltaTime: number) {\n        //經過時間\n        let elapsed_time = Date.now() - this.last_timestamp;\n        \n        if(elapsed_time < 33){\n            return;\n        }\n        this.last_timestamp = Date.now();    \n        this.update_time_lable();\n        if(this._now_last_time-Date.now()<=0){\n            //this.node.active = false;\n            this.blTimesUP = true;\n        }\n        \n    }\n}\n\n","import { _decorator, Component, Node,game,director,Enum,find, UITransform, RichText,AudioSource } from 'cc';\nconst { ccclass, property } = _decorator;\nimport { common_getEventTarget,EventEnum_Scene,getST } from './Common';\nimport { AudioManager } from './AudioManager';\nimport { SpriteFrameManager } from './SpriteFrameManager';\n\nimport { getProc_Login } from './Proc_Login';\nimport { getProc_GameHome } from './Proc_GameHome';\n\nimport { getProc_A_scene } from './Proc_A_scene';\nimport { getProc_B_scene } from './Proc_B_scene';\nimport { getProc_C_scene } from './Proc_C_scene';\nimport { getProc_D_scene } from './Proc_D_scene';\nimport { getProc_R_scene } from './Proc_R_scene';\nimport { getProc_Info } from './Proc_Info';\n\n/** \n0\t認知\tCognitionScene\t\n1\t數學\tMathScene\t\n2\t記憶\tMemoryScene\t\n3\t排行\tRankings\t\n4\t注意力\tAttentionScene\t\n**/\n\n@ccclass('main')\nexport class main extends Component {\n\n\n    @property({ type: String })\n    public playname:String = \"\";\n\n    @property(AudioSource) \n    _audioSource: AudioSource = null!;\n\n    \n    \n        \n    \n\n\n    onLoad () {\n        console.log(\"main onLoad\"); \n        getST().init();//資料初始化\n\n        let node = this.node;\n        game.addPersistRootNode(node);\n\n        \n        common_getEventTarget().on(EventEnum_Scene.Go_GameHome, this.go_GameHome, this);\n        common_getEventTarget().on(EventEnum_Scene.Go_Login, this.go_Login, this);\n\n    \n        common_getEventTarget().on(EventEnum_Scene.Go_Game, this.go_Game, this);\n        \n    \n        common_getEventTarget().on(EventEnum_Scene.Go_Info, this.go_Info, this);\n\n        const audioSource = this.node.getComponent(AudioSource)!;\n        this._audioSource = audioSource;\n        \n        AudioManager.init(this._audioSource);\n\n        //圖片預先載入\n        let str_spriteFrame:string[] = [\n            \"gh_mis_1_1\",\"gh_mis_2_1\",\"gh_mis_3_1\",\"gh_mis_4_1\",\"gh_mis_5_1\",\n            \"gh_mis_book_1\",\"gh_mis_book_2\",\"gh_mis_book_3\",\"gh_mis_book_4\",\"gh_mis_book_5\",\n            \"y_box\",\"y_box_right\",\"y_box_err\",\"b_box\",\"b_box_right\",\"b_box_err\",\n        ];\n        for(let i:number = 0;i<str_spriteFrame.length;i++){\n            SpriteFrameManager.preloadSpriteFrame(str_spriteFrame[i]);\n        }\n\n        let str_sound_SoundEffect:string[] = [\n            \"result01\",\"answer01\",\"answer02\",\"UI_click\",\"countdown01\",\n        ];\n\n        let str_music:string[] = [\"bgm01\",\"bgm02\"];\n\n        for(let i:number = 0;i<str_sound_SoundEffect.length;i++){\n            AudioManager.preloadSound(str_sound_SoundEffect[i]);\n        }\n        for(let i:number = 0;i<str_music.length;i++){\n            AudioManager.preloadSound(str_music[i]);\n        }\n\n        \n        getST().disGameUpdateObj[\"CognitionScene\"] = getProc_A_scene();//打破障礙 BT04\n        getST().disGameUpdateObj[\"MathScene\"] = getProc_B_scene();//點擊加法      BT01\n        getST().disGameUpdateObj[\"MemoryScene\"] = getProc_C_scene();//安全路徑    BT03\n        getST().disGameUpdateObj[\"Rankings\"] = getProc_R_scene();\n        getST().disGameUpdateObj[\"AttentionScene\"] = getProc_D_scene();//切換顏色 BT02\n\n    }\n\n\n    start() {\n        console.log(\"main start\");    \n        console.log(this.playname);\n        getST().Update_Scean = 0;\n        getProc_Login().init(); \n\n    }\n\n    update(deltaTime: number) {\n        if(getProc_Login().isRunning){\n            getProc_Login().update();\n        }\n        if(getST().Update_Scean > 0){\n            getST().disGameUpdateObj[getST().nowGameSceneName].update();\n        }\n    }\n\n \n    go_GameHome(){\n        console.log(\"go_GameHome\"); \n        director.loadScene(\"GameHome\",function(){\n            getST().Update_Scean = 0;\n            getProc_GameHome().init();\n        });\n    }\n\n    go_Login(){\n        console.log(\"go_Login\");\n        director.loadScene(\"Loading\",function(){\n            getST().Update_Scean = 0;\n            getProc_Login().init();\n            \n        });\n    }\n\n   \n\n    go_Game(){\n        getST().nowGameSceneName = getProc_GameHome().getGameSceneName();\n        director.loadScene(getST().nowGameSceneName,function(){\n            getST().disGameUpdateObj[getST().nowGameSceneName].init();\n            getST().Update_Scean = 1;\n        });\n    }\n\n\n    go_Info(){\n        console.log(\"go_Info\");\n        director.loadScene(\"Info\",function(){\n            getST().Update_Scean = 0;\n            getProc_Info().init();\n            \n        });\n    }\n\n    \n}\n\n","import { find, UITransform,Node,RichText, Sprite, Color, log, EventTouch,Label,instantiate, TERRAIN_NORTH_INDEX} from 'cc';\nimport { common_getEventTarget,EventEnum_Scene,common_bind_touch_start,getST,CState,CFSM } from './Common';\nimport { AudioManager } from './AudioManager';\nimport { SpriteFrameManager } from './SpriteFrameManager';\nimport { gtool_start_time } from './gtool_start_time';\n\n\n/***\n * 認知_打破障礙\n */\n\n//遊戲流程\nenum A_scene_state  { \n    st_none=100,    //無狀態\n    st_init,        //初始化 \n    st_tutorial,    //教程\n    st_into_animation, //进入动画\n    st_nextMission,//下一關\n    st_play_input, //玩家输入\n    st_show_result, //显示结果 //下降獲錯誤\n    st_show_mission_win, //顯示階段任務完成\n    st_show_mission_err, //顯示階段任務失敗\n    st_show_score, //顯示分數\n    st_timeup_animation, //時間到動畫\n    st_end, //结束\n}\n\nclass CSquareline{\n    /**\n     * 答案灰色邊框編號資訊\n     *      -01-      -02-      -03- \n     * -13-  *1  -16-  *2  -19-  *3  -22-\n     *      -04-      -05-      -06- \n     * -14-  *4  -17-  *5  -20-  *6  -23- \n     *      -07-      -08-      -09- \n     * -15-  *7  -18-  *8  -21-  *9  -24-\n     *      -10-      -11-      -12- \n     */\n    private one_quare_aroundline:number[][] = [\n        [1,13,16,4],[2,16,19,5],[3,19,22,6],\n        [4,17,14,7],[5,17,20,8],[6,23,20,9],\n        [7,15,18,10],[8,21,18,11],[9,21,24,12]\n    ];\n    \n\t\t\t\n\n    private node_line:Node[] = [];\n    private node_line_path:string[] = [\n        \"Canvas/answer_line/01\",\"Canvas/answer_line/02\",\"Canvas/answer_line/03\",\n        \"Canvas/answer_line/04\",\"Canvas/answer_line/05\",\"Canvas/answer_line/06\",\n        \"Canvas/answer_line/07\",\"Canvas/answer_line/08\",\"Canvas/answer_line/09\",\n        \"Canvas/answer_line/10\",\"Canvas/answer_line/11\",\"Canvas/answer_line/12\",\n        \"Canvas/answer_line/13\",\"Canvas/answer_line/14\",\"Canvas/answer_line/15\",\n        \"Canvas/answer_line/16\",\"Canvas/answer_line/17\",\"Canvas/answer_line/18\",\n        \"Canvas/answer_line/19\",\"Canvas/answer_line/20\",\"Canvas/answer_line/21\",\n        \"Canvas/answer_line/22\",\"Canvas/answer_line/23\",\"Canvas/answer_line/24\",\n    ];\n\n    public init(){\n        for(let i=0;i<this.node_line_path.length;i++){\n            this.node_line[i] = find(this.node_line_path[i]);\n            this.node_line[i].active = false;\n        }\n    }\n\n    /**\n     *  顯示答案灰色邊框 \n     *  index = 1 1 1   0 = 沒有方塊  >1 = 有方塊\n     *          1 1 1\n     *          1 1 1\n     */\n    public show_line(index:number[]){\n        let line_cnt: Record<number, number> = {};\n        for(let i=0;i<24;i++){\n            line_cnt[i] = 0;\n        }\n        for(let i=0;i<index.length;i++){\n            if(index[i] != 0){\n                for(let j=0;j<4;j++){\n                    line_cnt[this.one_quare_aroundline[i][j]-1]++;\n                }\n            }\n            \n        }\n        \n        for(let i=0;i<24;i++){\n            if(line_cnt[i] == 1){\n                this.node_line[i].active = true;\n            }\n            else{\n                this.node_line[i].active = false;\n            }\n        }\n\n    }\n\n    public hide_line(){\n        for(let i=0;i<24;i++){\n            this.node_line[i].active = false;\n        }\n    }\n}\n\nclass CSquareData{\n    public unitSet:number[][] = [];\n    public init(jsonobj_unitSet:any){\n     \n        for(let i=0;i<14;i++){\n            let keyName = \"Unit_\"+(i+1).toString().padStart(2, '0');\n         \n            let unit = jsonobj_unitSet[keyName].shape;\n            let unitSetP = [];\n            \n            for(let j=0;j<3;j++){\n                unitSetP.push(unit.Row1[j]);\n            }\n            for(let j=0;j<3;j++){\n                unitSetP.push(unit.Row2[j]);\n            }\n            for(let j=0;j<3;j++){\n                unitSetP.push(unit.Row3[j]);\n            }\n            this.unitSet.push(unitSetP);\n        }\n    }\n    public squareData_add(orgMapData:number[],addMapData:number[]){\n        for(let i=0;i<9;i++){\n            if(addMapData[i]>0){\n                orgMapData[i] = addMapData[i];\n            }\n        }\n    }\n\n    public getMapData(_unit_no:number,_x:number,_y:number):number[]{\n        let ret:number[] = [];\n        let baseMapData:number[] = this.unitSet[_unit_no-1];\n  \n        let blFind:boolean = false;\n        \n        let oldPos:number[][] = [[0,0,0],[0,0,0],[0,0,0]];\n        let newPos:number[][] = [[0,0,0],[0,0,0],[0,0,0]];\n\n        for(let i=0;i<9;i++){\n            oldPos[Math.floor(i%3)][Math.floor(i/3)] = baseMapData[i];    \n        }\n\n        for(let i=0;i<9;i++){\n            let nX = Math.floor(i%3)+_x;\n            let nY = Math.floor(i/3)+_y;\n            if(nX > 2 || nY >2){\n                if(oldPos[Math.floor(i%3)][Math.floor(i/3)] != 0){\n                    blFind = true;\n                    break;\n                }\n            }\n            else{\n                newPos[nX][nY] = oldPos[Math.floor(i%3)][Math.floor(i/3)];\n            }\n              \n        }\n      \n        if(blFind){\n            return null;\n        }\n       \n        for(let i=0;i<9;i++){\n            let nX = Math.floor(i%3);\n            let nY = Math.floor(i/3);\n            ret.push(newPos[nX][nY]);\n        }\n        return ret;\n    }\n\n    public check_overlap(orgMapData:number[],newMapData:number[]):boolean{\n        for(let i=0;i<9;i++){\n            if(orgMapData[i] != 0 && newMapData[i] != 0){\n                return true;\n            }\n        }\n        return false;\n    }\n\n    public check_equal(orgMapData:number[],newMapData:number[]):boolean{\n        for(let i=0;i<9;i++){\n            if(orgMapData[i] != newMapData[i]){\n                return false;\n            }\n        }\n        return true;\n    }\n}\n\nclass CSquare{\n    public SquareNumber:number = 0;//1-14\n    public node_square:Node = null;\n    public PosX:number = 0;//0-2\n    public PosY:number = 0;//0-2\n    private mapdata:number[] = [\n        0,0,0,\n        0,0,0,\n        0,0,0\n    ];\n    private cSquareData:CSquareData = null;\n    private allSquare:CSquare[] = null;//場上其他方塊\n\n    //是否下降中\n    public blMoveDown:boolean = false;\n    //是否打破中\n    public blBreakIn:boolean = false;\n    private breakStep:number = 0;//動畫步驟\n    \n    public init(_squareNumber:number,_unitSet:number[][]){\n        this.SquareNumber = _squareNumber;\n        this.cSquareData = new CSquareData();\n        this.cSquareData.unitSet = _unitSet;\n        this.node_square = instantiate(find(\"Canvas/square/base/\"+(_squareNumber.toString().padStart(2, '0'))));\n        find(\"Canvas/square/clone\").addChild(this.node_square);\n        this.node_square.active = true;\n        this.move(0,0);\n    }\n    public setAllSquare(_allSquare:CSquare[]){\n        this.allSquare = _allSquare;\n    }\n\n    public check_moveTo(_posX:number,_posY:number):boolean{\n        let newMapData:number[] = this.cSquareData.getMapData(this.SquareNumber,_posX,_posY);\n        if(newMapData == null){\n            return false;\n        }\n        if(this.check_overlap(newMapData)){\n            return false;\n        }\n        return true;    \n    }\n\n    public check_overlap(_mapData:number[]):boolean{\n        let allSq_MapData:number[] = [0,0,0,0,0,0,0,0,0];\n        if(this.allSquare){\n            for(let i=0;i<this.allSquare.length;i++){\n                if(this.allSquare[i] == this){\n                    continue;\n                }\n                let squareTmp = this.allSquare[i];\n                this.cSquareData.squareData_add(allSq_MapData,this.cSquareData.getMapData(squareTmp.SquareNumber,squareTmp.PosX,squareTmp.PosY));\n            }\n        }\n\n        return this.cSquareData.check_overlap(allSq_MapData,_mapData);\n    }\n\n    public move(_x:number,_y:number):boolean{\n        let newMapData:number[] = this.cSquareData.getMapData(this.SquareNumber,_x,_y);\n        if(newMapData == null){\n          //  log(\"move err: \",this.SquareNumber,_x,_y);\n            return false;\n        }\n        //log(\"move: \",this.SquareNumber,_x,_y);\n        this.PosX = _x;\n        this.PosY = _y;\n        this.node_square.setPosition(_x*(190),_y*(-190));\n        for(let i=0;i<newMapData.length;i++){\n            this.mapdata[i] = newMapData[i];\n        }\n    }\n\n    \n\n    public moveDown():boolean{\n        if(this.blMoveDown){\n            return false;\n        }\n        if(this.check_moveTo(this.PosX,this.PosY+1)){\n            this.blMoveDown = true;\n            return true;\n        }\n        return false;\n    }\n    //打破\n    public breakIn(){\n        this.blBreakIn = true;\n        this.breakStep = 0;\n    }\n    //顯示錯誤\n    public show_error(){\n        for(let i=0;i<this.node_square.children[0].children.length;i++){\n            let node = this.node_square.children[0].children[i];  \n            node.getComponent(Sprite).color = new Color(255,100,100); \n        }\n    }\n\n    //顯示正確\n    public show_win(){\n        for(let i=0;i<this.node_square.children[0].children.length;i++){\n            let node = this.node_square.children[0].children[i];  \n            node.getComponent(Sprite).color = new Color(100,255,100); \n        }\n    }\n\n    public distory(){\n        this.blMoveDown = false;\n        let nodeClone = find(\"Canvas/square/clone\");\n        nodeClone.removeChild(this.node_square);\n        this.node_square.destroy();\n        this.node_square = null;\n        let index = this.allSquare.indexOf(this);\n        this.allSquare.splice(index, 1);\n    }\n\n    public update () {\n        if(this.blMoveDown){\n            let addY = 24;//12\n\n            let pointx = this.node_square.getPosition().x;\n            let pointY:number = this.node_square.getPosition().y-addY;\n            this.node_square.setPosition(pointx,pointY);\n            if((this.PosY+1)*(-190) >= pointY){\n                this.blMoveDown = false;\n                this.move(this.PosX,this.PosY+1);\n            }\n        }\n        if(this.blBreakIn){\n            this.breakStep++;\n            for(let i=0;i<this.node_square.children[0].children.length;i++){\n                let node = this.node_square.children[0].children[i];\n                if(this.breakStep<5){\n                    node.setScale(1+this.breakStep/20,1+this.breakStep/20);\n                }\n                else{\n                    let scaleTmp = 1+4/20-(this.breakStep-4)/20;\n                    node.setScale(scaleTmp,scaleTmp);\n                }\n                \n                node.getComponent(Sprite).color = new Color(255,255,255,255-this.breakStep*10);\n            }\n            if(this.breakStep == 10){\n                this.blBreakIn = false;\n                this.distory();\n            }\n        }\n    }\n}\n\nclass Proc_A_scene{ \n    \n    private last_timestamp:number = 0;//主要FPS上一次時間\n    private cFSM:CFSM = null;\n    private md:any = null;\n    private mission:number = 0;//目前玩到的關卡\n    private right_mission:number = 0;//答對的關卡數\n    private error_mission:number = 0;//答錯的關卡數\n    private ComboCount:number = 0;//連續答對次數\n    private last_is_right:boolean = false;//上一個是否是答對\n\n    private arrQuestionNumber:number[] = [];//目前可用的關卡的題目\n    private cSquareline:CSquareline = null;//顯示答案線的控制\n    private cSquares:CSquare[] = [];//題目的方塊們\n    \n    private cSquareData:CSquareData = null;//方塊資料工具\n\n    private answerMapData:number[] = null;//答案\n    private answer_no_X:number[][] = null;//答案的X座標一定要有的編號\n\n    private node_StartTime:Node = null;//開始時間的文字\n    private node_TimesUp:Node = null;//時間到的文字\n    private node_score_panle:Node = null;//結算\n    \n    private play_last_time:number = 0;//剩餘玩的時間\n\n    private strTutorialPath:string[] = [\n        \"Canvas/tutorial/遊戲說明_01\",\n        \"Canvas/tutorial/遊戲說明_02\",\n        \"Canvas/tutorial/遊戲說明_03\"\n    ];\n    \n    private blPlay10TimesSound:boolean = false;\n\n\n    public init(){\n\n        //初始化\n        this.cFSM = new CFSM();\n        this.add_FSM_state();\n\n        this.cFSM.set_Next_state(A_scene_state.st_init);\n        this.last_timestamp = Date.now();\n\n\n        this.md = getST().get_mission_data();\n        this.mission = 0;\n        this.right_mission = 0;\n        this.ComboCount = 0;\n        this.last_is_right = false;\n        this.cSquareline = new CSquareline();\n        this.cSquareline.init();\n        this.cSquares = [];\n        find(\"Canvas/square/clone\").removeAllChildren();\n        find(\"Canvas/tutorial\").active = false;\n        this.node_StartTime = find(\"Canvas/start\");\n        this.node_StartTime.active = false;\n        this.node_TimesUp = find(\"Canvas/timesup\");\n        this.node_TimesUp.active = false;\n        this.node_score_panle = find(\"Canvas/score_panle\");\n        this.node_score_panle.active = false;\n        this.cSquareData = new CSquareData();\n        this.cSquareData.init(this.md.QuestionUnitSet);\n        this.arrQuestionNumber = [];\n\n        common_getEventTarget().on(EventEnum_Scene.GameA_event_SquareTouch, this.gameA_event_SquareTouch, this);\n        find(\"Canvas/返回\").once(Node.EventType.TOUCH_START, function(){\n            AudioManager.playSound(\"UI_click\");\n            common_getEventTarget().emit(EventEnum_Scene.Go_GameHome);\n        }, this);\n        \n    }\n\n    private add_FSM_state(){\n        this.cFSM.add_new_state(A_scene_state.st_init,\"st_init\",this.st_init_into,this.st_init_update,this);\n        this.cFSM.add_new_state(A_scene_state.st_tutorial,\"st_tutorial\",this.st_tutorial_into,this.st_tutorial_update,this);\n        this.cFSM.add_new_state(A_scene_state.st_into_animation,\"st_into_animation\",this.st_into_animation_into,this.st_into_animation_update,this);\n        this.cFSM.add_new_state(A_scene_state.st_nextMission,\"st_nextMission\",this.st_nextMission_into,this.st_nextMission_update,this);\n        this.cFSM.add_new_state(A_scene_state.st_play_input,\"st_play_input\",this.st_play_input_into,this.st_play_input_update,this);\n        this.cFSM.add_new_state(A_scene_state.st_show_result,\"st_show_result\",this.st_show_result_into,this.st_show_result_update,this);\n        this.cFSM.add_new_state(A_scene_state.st_show_mission_win,\"st_show_mission_win\",this.st_show_mission_win_into,this.st_show_mission_win_update,this);\n        this.cFSM.add_new_state(A_scene_state.st_show_mission_err,\"st_show_mission_err\",this.st_show_mission_err_into,this.st_show_mission_err_update,this);\n       \n        this.cFSM.add_new_state(A_scene_state.st_timeup_animation,\"st_timeup_animation\",this.st_timeup_animation_into,this.st_timeup_animation_update,this);\n        this.cFSM.add_new_state(A_scene_state.st_show_score,\"st_show_score\",this.st_show_score_into,this.st_show_score_update,this);\n        this.cFSM.add_new_state(A_scene_state.st_end,\"st_end\",this.st_end_into,this.st_end_update,this);\n    }\n\n    public gameA_event_SquareTouch(node_square:Node,SquareNumber:number){\n        //if(this.cFSM.get_now_state().state != A_scene_state.st_play_input)\n        //    return;\n        if(!(this.cFSM.get_now_state().state == A_scene_state.st_play_input || \n            this.cFSM.get_now_state().state == A_scene_state.st_show_result))\n            return;\n      \n        for(let i=0;i<this.cSquares.length;i++){\n            if(this.cSquares[i].node_square == node_square){\n                //----判斷是不是可以打破--------\n                let _x =  this.cSquares[i].PosX;\n                let _no =  this.cSquares[i].SquareNumber;\n                let needCnt = 0;\n                for(let j=0;j<this.answer_no_X[_x].length;j++){\n                    if(this.answer_no_X[_x][j] == _no){\n                        needCnt++;\n                    }\n                }\n                let nowCnt = 0;\n                for(let j=0;j<this.cSquares.length;j++){\n                    if(this.cSquares[j].PosX == _x && this.cSquares[j].SquareNumber == _no){\n                        nowCnt++;\n                    }\n                }\n                //---------------------------\n                if(nowCnt <= needCnt){\n                    this.cSquares[i].show_error();\n                    this.cFSM.set_Next_state(A_scene_state.st_show_mission_err);\n                }\n                else{\n                    this.cSquares[i].breakIn();\n                    if(this.cFSM.get_now_state().state == A_scene_state.st_play_input )\n                        this.cFSM.set_Next_state(A_scene_state.st_show_result);\n                }\n                break;\n            }\n        }\n        \n    }\n\n\n    public st_init_into(){\n        this.cSquareline.hide_line();  \n        this.cFSM.set_Next_state(A_scene_state.st_tutorial);\n        find(\"Canvas/square/clone\").removeAllChildren();\n        this.cSquares = [];\n        this.mission = 0;\n        this.right_mission = 0;\n        this.error_mission = 0;\n        this.ComboCount = 0;\n        this.last_is_right = false;\n        this.node_score_panle.active = false;\n        this.node_TimesUp.active = false;\n        this.node_StartTime.active = false;\n        this.arrQuestionNumber = [];\n        this.blPlay10TimesSound = false;\n\n    }\n    public st_init_update(){}\n\n    public st_tutorial_into(){\n        find(\"Canvas/tutorial\").active = true;\n        let btn_start = find(\"Canvas/tutorial/btn_start\");\n        let btn_next_page = find(\"Canvas/tutorial/btn_next_page\");\n        btn_start.once(Node.EventType.TOUCH_START,\n            function(){\n                this.cFSM.set_Next_state(A_scene_state.st_into_animation);\n                find(\"Canvas/tutorial\").active = false;\n                this.node_StartTime.getComponent(gtool_start_time).switchShow(true);\n                AudioManager.playSound(\"countdown01\");\n            }, this);\n\n        btn_start.active = true;\n        btn_next_page.active = true;\n\n        btn_next_page.off(Node.EventType.TOUCH_START);\n        btn_next_page.on(Node.EventType.TOUCH_START,\n            function(){\n                let _page:number = 0;\n                for(let i=0;i<this.strTutorialPath.length;i++){\n                    if(find(this.strTutorialPath[i]).active == true){\n                        _page = i;\n                        break;\n                    }\n                }\n                _page++;\n                if(_page >= this.strTutorialPath.length){\n                    _page = 0;\n                }\n                \n               log(\"page = \"+_page);\n                for(let i=0;i<this.strTutorialPath.length;i++){\n                    find(this.strTutorialPath[i]).active = false;\n                    if(i == _page){\n                        find(this.strTutorialPath[i]).active = true;\n                    }\n                }\n            }, this);\n\n        for(let i=0;i<this.strTutorialPath.length;i++){\n            find(this.strTutorialPath[i]).active = false;\n        }\n        find(this.strTutorialPath[0]).active = true;\n        \n    }\n    public st_tutorial_update(){}\n    public st_into_animation_into(){\n        AudioManager.stopMusic();\n    }\n    public st_into_animation_update(){\n        if(this.node_StartTime.getComponent(gtool_start_time).blTimesUP){\n            this.node_StartTime.active = false;\n            this.cFSM.set_Next_state(A_scene_state.st_nextMission);\n            this.play_last_time = this.md.Time*1000;\n\n            AudioManager.playMusic(\"bgm02\");\n        }\n    }\n    public st_nextMission_into(){\n        //----下一關前重置方塊與提示--------------------------\n        find(\"Canvas/square/clone\").removeAllChildren();\n        this.cSquares = [];\n        this.cSquareline.hide_line();\n        //----------------------------------------------------\n\n        this.mission++;\n\n        //產生亂數題目\n        if(this.arrQuestionNumber.length == 0){\n            for(let i=0;i<this.md.QuestionCounts;i++){\n                this.arrQuestionNumber.push(i+1);\n            }\n            //亂數交換\n            for(let i=0;i<this.md.QuestionCounts;i++){\n                let _orgIndex = Math.floor(Math.random()*this.arrQuestionNumber.length);\n                let _moveIndex = Math.floor(Math.random()*this.arrQuestionNumber.length);\n                if(_orgIndex != _moveIndex){\n                    let _temp = this.arrQuestionNumber[_orgIndex];\n                    this.arrQuestionNumber[_orgIndex] = this.arrQuestionNumber[_moveIndex];\n                    this.arrQuestionNumber[_moveIndex] = _temp;\n                }\n            }\n        }\n        let now_mission = this.arrQuestionNumber.pop();\n        //----test -----\n        //now_mission=21;\n        //--------------\n        let mis_data:any = this.md.QuestionSet[\"Question_\"+now_mission];\n        log(\"mission : \"+now_mission);\n\n        //----答案處理----------------------------------------\n        let ansMapDataTmp:number[] = [0,0,0,0,0,0,0,0,0];\n        this.answer_no_X = [];\n        this.answer_no_X.push([]);\n        this.answer_no_X.push([]);\n        this.answer_no_X.push([]);\n        for(let i=0;i<3;i++){\n            let sq_no:number = mis_data.Answer.Row1[i];\n            \n            if(sq_no > 0){\n                let tmpData = this.cSquareData.getMapData(sq_no,i,0);\n                this.cSquareData.squareData_add(ansMapDataTmp,tmpData);\n                this.answer_no_X[i].push(sq_no);\n            }\n        }\n        for(let i=0;i<3;i++){\n            let sq_no:number = mis_data.Answer.Row2[i];\n            if(sq_no > 0){\n                let tmpData = this.cSquareData.getMapData(sq_no,i,1);\n                this.cSquareData.squareData_add(ansMapDataTmp,tmpData);\n                this.answer_no_X[i].push(sq_no);\n            }\n        }\n        for(let i=0;i<3;i++){\n            let sq_no:number = mis_data.Answer.Row3[i];\n            if(sq_no > 0){\n                let tmpData = this.cSquareData.getMapData(sq_no,i,2);\n                this.cSquareData.squareData_add(ansMapDataTmp,tmpData);\n                this.answer_no_X[i].push(sq_no);\n            }\n        }\n        this.cSquareline.show_line(ansMapDataTmp);\n        this.answerMapData = ansMapDataTmp;\n        //--------------------------------------------------\n\n        //----題目處理----------------------------------------\n        \n        for(let i=0;i<3;i++){\n            let sq_no:number = mis_data.Content.Row3[i];\n            if(sq_no > 0){\n                let cSquare:CSquare = new CSquare();\n                cSquare.init(sq_no,this.cSquareData.unitSet);\n                cSquare.move(i,2);\n                this.cSquares.push(cSquare);\n            }\n        }\n        for(let i=0;i<3;i++){\n            let sq_no:number = mis_data.Content.Row2[i];\n            if(sq_no > 0){\n                let cSquare:CSquare = new CSquare();\n                cSquare.init(sq_no,this.cSquareData.unitSet);\n                cSquare.move(i,1);\n                this.cSquares.push(cSquare);\n            }\n        }\n        for(let i=0;i<3;i++){\n            let sq_no:number = mis_data.Content.Row1[i];\n            if(sq_no > 0){\n                let cSquare:CSquare = new CSquare();\n                cSquare.init(sq_no,this.cSquareData.unitSet);\n                cSquare.move(i,0);\n                this.cSquares.push(cSquare);\n            }\n        }\n        for(let i=0;i<this.cSquares.length;i++){\n            this.cSquares[i].setAllSquare(this.cSquares);\n        }\n        //--------------------------------------------------\n        this.cFSM.set_Next_state(A_scene_state.st_play_input);\n\n        \n    }\n    public st_nextMission_update(){}\n    public st_play_input_into(){}\n    public st_play_input_update(){}\n    public st_show_result_into(){}\n    public st_show_result_update(){\n\n        let lbBreak:boolean = false;\n        let lbMoveDown:boolean = false;\n        for(let i=0;i<this.cSquares.length;i++){\n            if(this.cSquares[i].blBreakIn == true){\n                lbBreak = true;\n            }\n            if(this.cSquares[i].blMoveDown == true){\n                lbMoveDown = true;\n            }\n            this.cSquares[i].update();\n        }\n        if(lbBreak == false && lbMoveDown == false){\n            for(let i=0;i<this.cSquares.length;i++){\n                if(this.cSquares[i].moveDown()){\n                    lbMoveDown = true;\n                }\n            }\n            if(lbMoveDown == false){\n                let allSq_MapData:number[] = [0,0,0,0,0,0,0,0,0];\n        \n                for(let i=0;i<this.cSquares.length;i++){\n                    let sqT = this.cSquares[i];\n                    this.cSquareData.squareData_add(allSq_MapData,this.cSquareData.getMapData(sqT.SquareNumber,sqT.PosX,sqT.PosY));\n                }\n                if(this.cSquareData.check_equal(allSq_MapData,this.answerMapData)){\n\n                    this.cFSM.set_Next_state(A_scene_state.st_show_mission_win);\n                }\n                else{\n                    this.cFSM.set_Next_state(A_scene_state.st_play_input);\n                }\n            }\n        }\n    }\n    public st_show_mission_win_into(){\n        for(let i=0;i<this.cSquares.length;i++){\n            this.cSquares[i].show_win();\n        }\n        this.cFSM.get_now_state().wait_time = 500;\n        this.right_mission++;\n        AudioManager.playSound(\"answer02\");\n        if(this.last_is_right){\n            this.ComboCount++;\n        }\n        this.last_is_right = true;\n\n    }\n    public st_show_mission_win_update(){\n        this.cFSM.set_Next_state(A_scene_state.st_nextMission);\n    }\n    public st_show_mission_err_into(){\n        this.error_mission++;\n        AudioManager.playSound(\"answer01\");\n        this.cFSM.get_now_state().wait_time = 500;\n        this.last_is_right = false;\n    }\n    public st_show_mission_err_update(){\n        this.cFSM.set_Next_state(A_scene_state.st_nextMission);\n    }\n\n    public st_timeup_animation_into(){\n        this.node_TimesUp.getComponent(gtool_start_time).switchShow(true);\n        AudioManager.stopMusic();\n    }\n    public st_timeup_animation_update(){\n        if(this.node_TimesUp.getComponent(gtool_start_time).blTimesUP){\n            this.cFSM.set_Next_state(A_scene_state.st_show_score);\n        }\n    }\n    public st_show_score_into(){\n        this.mission = this.right_mission+this.error_mission;\n        getST().setWin(this.mission,this.right_mission,this.ComboCount);\n        this.node_score_panle.active = true;\n        this.node_TimesUp.active = false;\n\n        this.node_score_panle.getChildByName(\"again\").once(Node.EventType.TOUCH_START,\n             function(){\n                AudioManager.playSound(\"UI_click\");\n                this.cFSM.set_Next_state(A_scene_state.st_init);\n             }, \n             this);\n        this.node_score_panle.getChildByName(\"exit\").once(Node.EventType.TOUCH_START,\n            function(){\n                AudioManager.playSound(\"UI_click\");\n                this.cFSM.set_Next_state(A_scene_state.st_end);\n            }, \n            this);\n        \n        this.node_score_panle.getChildByName(\"right_num\").getComponent(Label).string = this.right_mission.toString();\n        this.node_score_panle.getChildByName(\"err_num\").getComponent(Label).string = this.error_mission.toString();\n        this.node_score_panle.getChildByName(\"rate\").getComponent(Label).string = Math.floor(this.right_mission*100/this.mission).toString()+\"%\";\n\n        this.node_score_panle.getChildByName(\"time_num\").getComponent(Label).string = getST().time_num.toString()+'s';\n        this.node_score_panle.getChildByPath(\"score/right_score\").getComponent(RichText).string = \"<b><color=#7a4706>\"+getST().play_score.toString()+\"</color></b>\";\n        this.node_score_panle.getChildByPath(\"score/combo_score\").getComponent(RichText).string = \"<b><color=#7a4706>\"+getST().comble_score.toString()+\"</color></b>\";\n        this.node_score_panle.getChildByPath(\"score/total_score\").getComponent(RichText).string = \"<b><color=#7a4706>\"+getST().play_totle_score.toString()+\"</color></b>\";\n        let bastScore = getST().myRankData[getST().select_Game-1].score;\n        this.node_score_panle.getChildByPath(\"score/total_score-001\").getComponent(RichText).string = \"<b><color=f8e0b3>\"+bastScore.toString()+\"</color></b>\";\n        let strTitlePath:string[] = [ //0  認知  1\t數學  2\t記憶  3\t總排行  4\t注意力\n            \"txt_objext/title/成績結算_小標_打破障礙\",\n            \"txt_objext/title/成績結算_小標_點擊加法\",\n            \"txt_objext/title/成績結算_小標_安全路徑\",\n            \"\",\n            \"txt_objext/title/成績結算_小標_切換顏色\",\n        ]\n        for(let i=0;i<5;i++){\n            if(i == 3)\n                continue;\n            if(i == (getST().select_Game-1)){\n                this.node_score_panle.getChildByPath(strTitlePath[i]).active = true;\n            }\n            else{\n                this.node_score_panle.getChildByPath(strTitlePath[i]).active = false;\n            }\n\n        }\n        AudioManager.playSound(\"result01\");\n    }\n    public st_show_score_update(){\n        let step:number = Math.floor(this.cFSM.get_now_state().elapsed_time/33);\n        if(step <= 25){\n            let rate:number =  this.right_mission/this.mission;\n            let rateP:number = rate*(step/25);\n            rateP = (Math.round(rateP * 100) / 100)*-1;\n            find(\"Canvas/score_panle/成績結算_藍圈\").getComponent(Sprite).fillRange = rateP;\n        }\n    }\n    public st_end_into(){\n        common_getEventTarget().emit(EventEnum_Scene.Go_GameHome);\n    }\n    public st_end_update(){}\n\n    \n\n    public update(){\n        //經過時間\n        let elapsed_time = Date.now() - this.last_timestamp;\n        \n        if(elapsed_time < 33){\n            return;\n        }\n        this.last_timestamp = Date.now();\n        this.cFSM.update();\n\n        \n        if(this.cFSM.get_now_state().state == A_scene_state.st_play_input){\n            //----測試除錯用--------------------\n            if(getST().getIsInTestMode()){\n                elapsed_time = 0;   \n            }\n            //---------------------------------\n            this.play_last_time = this.play_last_time-elapsed_time;\n            if(this.play_last_time < 0){\n                this.play_last_time = 0;\n            }\n            let _sec = Math.floor(this.play_last_time/1000);\n            let _msec = Math.floor(this.play_last_time%1000/10);\n        \n            find(\"Canvas/game_text_node/time/TimeText_sec\").getComponent(RichText).string = \"<color=#ffffff>\"+_sec.toString().padStart(2, '0') + \":</color>\";\n            find(\"Canvas/game_text_node/time/TimeText_msec\").getComponent(RichText).string = \"<color=#ffffff>\"+_msec.toString().padStart(2, '0')+\"</color>\";\n            if(this.play_last_time<=0){\n                this.cFSM.set_Next_state(A_scene_state.st_timeup_animation);\n            }\n\n            if(this.blPlay10TimesSound==false){\n                if(this.play_last_time <= 3000){\n                    this.blPlay10TimesSound = true;\n                    AudioManager.playSound(\"countdown01\");\n                }\n            }\n        }\n    }\n    \n}\n\n\n\n\n\nvar _proc_A_scene:Proc_A_scene = null;\n\n\nexport function getProc_A_scene() {\n\n    if(_proc_A_scene === null) {\n        _proc_A_scene = new Proc_A_scene();\n        console.log('new Proc_A_scene');\n    }\n    return _proc_A_scene;\n} \n\n","import { find, UITransform,Node,RichText, Sprite, Color, log, EventTouch,Label} from 'cc';\nimport { common_getEventTarget,EventEnum_Scene,common_bind_touch_start,getST,CState,CFSM } from './Common';\nimport { AudioManager } from './AudioManager';\nimport { SpriteFrameManager } from './SpriteFrameManager';\nimport { gtool_start_time } from './gtool_start_time';\nimport { gameB_MathButton } from './gameB_MathButton';\n\n\n\n//遊戲流程\nenum B_scene_state  { \n    st_none=100,    //無狀態\n    st_init,        //初始化 \n    st_tutorial,    //教程\n    st_into_animation, //进入动画\n    st_nextMission,//下一關\n    st_play_input, //玩家输入\n    st_show_result, //显示结果 //下降獲錯誤\n    st_show_mission_win, //顯示階段任務完成\n    st_show_mission_err, //顯示階段任務失敗\n    st_show_score, //顯示分數\n    st_timeup_animation, //時間到動畫\n    st_end, //结束\n}\n\nclass Proc_B_scene{ \n\n    \n    private last_timestamp:number = 0;//主要FPS上一次時間\n    private cFSM:CFSM = new CFSM();\n\n    private md:any = null;\n    private mission:number = 0;//目前玩到的關卡\n    private right_mission:number = 0;//答對的關卡數\n    private error_mission:number = 0;//答錯的關卡數\n    private ComboCount:number = 0;//連續答對次數\n    private last_is_right:boolean = false;//上一個是否是答對\n\n    private play_last_time:number = 0;//剩餘玩的時間\n\n    private node_StartTime:Node = null;//開始時間的文字\n    private node_TimesUp:Node = null;//時間到的文字\n    private node_score_panle:Node = null;//結算\n\n    private question_num:number[] = [];//題目，一次產生10題 避免重複 \n    private questionSet_num:number[] = [];\n    private questionSet_rate:number[] = [];\n\n    private Questions_node:Node[] = [];//三個題目\n\n    private now_answer:number = 0;//玩家輸入的加總答案\n  \n    private strTutorialPath:string[] = [\n        \"Canvas/tutorial/遊戲說明_01\",\n        \"Canvas/tutorial/遊戲說明_02\",\n        \"Canvas/tutorial/遊戲說明_03\"\n    ];\n    private blPlay10TimesSound:boolean = false;\n    \n    public init(){\n\n        //初始化\n        this.cFSM = new CFSM();\n        this.add_FSM_state();\n\n        this.cFSM.set_Next_state(B_scene_state.st_init);\n        this.last_timestamp = Date.now();\n\n\n        this.md = getST().get_mission_data();\n        this.mission = 0;\n        this.right_mission = 0;\n        this.ComboCount = 0;\n        this.last_is_right = false;\n        \n\n        common_getEventTarget().on(EventEnum_Scene.GameB_event_MathButton, this.gameB_event_MathButton, this);\n        find(\"Canvas/返回\").once(Node.EventType.TOUCH_START, function(){\n            AudioManager.playSound(\"UI_click\");\n            common_getEventTarget().emit(EventEnum_Scene.Go_GameHome);\n        }, this);\n\n        find(\"Canvas/tutorial\").active = false;\n        this.node_StartTime = find(\"Canvas/start\");\n        this.node_StartTime.active = false;\n        this.node_TimesUp = find(\"Canvas/timesup\");\n        this.node_TimesUp.active = false;\n        this.node_score_panle = find(\"Canvas/score_panle\");\n        this.node_score_panle.active = false;\n\n        this.Questions_node = [];\n        this.Questions_node.push(find(\"Canvas/Questions/Questions_001\"));\n        this.Questions_node.push(find(\"Canvas/Questions/Questions_002\"));\n        this.Questions_node.push(find(\"Canvas/Questions/Questions_003\"));\n\n\n        //初始化題目參數\n        let rateCnt:number = 0;\n        for(var i=0;i<this.md.QuestionSet.QuestionType.length;i++){\n            this.questionSet_num.push(this.md.QuestionSet.QuestionType[i]);\n            rateCnt+=this.md.QuestionSet.QuestionProbability[i];\n            this.questionSet_rate.push(rateCnt);\n        }\n        \n    }\n    private add_FSM_state(){\n        this.cFSM.add_new_state(B_scene_state.st_init,\"st_init\",this.st_init_into,this.st_init_update,this);\n        this.cFSM.add_new_state(B_scene_state.st_tutorial,\"st_tutorial\",this.st_tutorial_into,this.st_tutorial_update,this);\n        this.cFSM.add_new_state(B_scene_state.st_into_animation,\"st_into_animation\",this.st_into_animation_into,this.st_into_animation_update,this);\n        this.cFSM.add_new_state(B_scene_state.st_nextMission,\"st_nextMission\",this.st_nextMission_into,this.st_nextMission_update,this);\n        this.cFSM.add_new_state(B_scene_state.st_play_input,\"st_play_input\",this.st_play_input_into,this.st_play_input_update,this);\n        this.cFSM.add_new_state(B_scene_state.st_show_result,\"st_show_result\",this.st_show_result_into,this.st_show_result_update,this);\n        this.cFSM.add_new_state(B_scene_state.st_show_mission_win,\"st_show_mission_win\",this.st_show_mission_win_into,this.st_show_mission_win_update,this);\n        this.cFSM.add_new_state(B_scene_state.st_show_mission_err,\"st_show_mission_err\",this.st_show_mission_err_into,this.st_show_mission_err_update,this);\n        this.cFSM.add_new_state(B_scene_state.st_show_score,\"st_show_score\",this.st_show_score_into,this.st_show_score_update,this);\n        this.cFSM.add_new_state(B_scene_state.st_timeup_animation,\"st_timeup_animation\",this.st_timeup_animation_into,this.st_timeup_animation_update,this);\n        this.cFSM.add_new_state(B_scene_state.st_end,\"st_end\",this.st_end_into,this.st_end_update,this);\n\n    }\n\n    public gameB_event_MathButton(num:number) {\n        log(\"gameB_event_MathButton:\"+num);\n        this.now_answer+=num;\n        if(this.now_answer == this.question_num[0]){\n            this.cFSM.set_Next_state(B_scene_state.st_show_mission_win);\n        }\n        else if(this.now_answer > this.question_num[0]){\n            this.cFSM.set_Next_state(B_scene_state.st_show_mission_err);\n        }\n    }\n\n    private get_next_question():number{\n        if(this.question_num.length == 0){\n            this.create_10_question();\n        }\n        let q:number = this.question_num.shift();\n        this.create_10_question();\n        return q;\n    }\n\n    private create_10_question(){\n        let need_cnt = 10-this.question_num.length;\n        for(let i=0;i<need_cnt;i++){\n            //找出不重複的亂數題目\n            while(true){\n             \n                let rand:number = Math.random()*this.questionSet_rate.at(-1);\n             \n                let idx:number = 0;\n                for(let k=0;i<this.questionSet_rate.length;k++){\n                    if(rand<=this.questionSet_rate[k]){\n                        idx = k;\n                        break;\n                    }\n                }\n\n                let q:number = this.questionSet_num[idx];\n\n                let is_same = false;\n                for(let j=0;j<this.question_num.length;j++){\n                    if(this.question_num[j]==q){\n                        is_same = true;\n                        break;\n                    }\n                }\n                if(is_same==false){\n                    this.question_num.push(q);\n                    break;\n                }\n            }\n        }\n    }\n \n\n\n\n    public st_init_into(){\n  \n        this.question_num = [];\n\n        this.mission = 0;\n        this.right_mission = 0;\n        this.error_mission = 0;\n        this.ComboCount = 0;\n        this.last_is_right = false;\n        this.node_score_panle.active = false;\n        this.node_TimesUp.active = false;\n        this.node_StartTime.active = false;\n\n        for(var i=0;i<this.Questions_node.length;i++){\n            this.Questions_node[i].getChildByName(\"MathText\").getComponent(RichText).string = \"<color=#000000>--</color>\";\n        }\n\n        this.cFSM.set_Next_state(B_scene_state.st_tutorial);\n        this.blPlay10TimesSound = false;\n    }\n    \n    public st_init_update(){}\n    public st_tutorial_into(){\n        find(\"Canvas/tutorial\").active = true;\n        let btn_start = find(\"Canvas/tutorial/btn_start\");\n        let btn_next_page = find(\"Canvas/tutorial/btn_next_page\");\n        btn_start.once(Node.EventType.TOUCH_START,\n            function(){\n                this.cFSM.set_Next_state(B_scene_state.st_into_animation);\n                find(\"Canvas/tutorial\").active = false;\n                this.node_StartTime.getComponent(gtool_start_time).switchShow(true);\n                AudioManager.playSound(\"countdown01\");\n            }, this);\n\n        btn_start.active = true;\n        btn_next_page.active = true;\n\n        btn_next_page.off(Node.EventType.TOUCH_START);\n        btn_next_page.on(Node.EventType.TOUCH_START,\n            function(){\n                let _page:number = 0;\n                for(let i=0;i<this.strTutorialPath.length;i++){\n                    if(find(this.strTutorialPath[i]).active == true){\n                        _page = i;\n                        break;\n                    }\n                }\n                _page++;\n                if(_page >= this.strTutorialPath.length){\n                    _page = 0;\n                }\n                \n               log(\"page = \"+_page);\n                for(let i=0;i<this.strTutorialPath.length;i++){\n                    find(this.strTutorialPath[i]).active = false;\n                    if(i == _page){\n                        find(this.strTutorialPath[i]).active = true;\n                    }\n                }\n            }, this);\n\n        for(let i=0;i<this.strTutorialPath.length;i++){\n            find(this.strTutorialPath[i]).active = false;\n        }\n        find(this.strTutorialPath[0]).active = true;\n        \n    }\n    public st_tutorial_update(){}\n    public st_into_animation_into(){\n        AudioManager.stopMusic();\n    }\n    public st_into_animation_update(){\n        if(this.node_StartTime.getComponent(gtool_start_time).blTimesUP){\n            this.node_StartTime.active = false;\n            this.cFSM.set_Next_state(B_scene_state.st_nextMission);\n            this.play_last_time = this.md.Time*1000;\n\n            AudioManager.playMusic(\"bgm02\");\n        }\n    }\n    public st_nextMission_into(){\n        this.mission++;\n        this.now_answer = 0;\n\n        this.get_next_question();\n    \n        ///更新題目顯示\n        for(var i=0;i<this.Questions_node.length;i++){\n            let rt:RichText = this.Questions_node[i].getChildByName(\"MathText\").getComponent(RichText);\n            rt.string = \"<color=#000000>\"+this.question_num[i]+\"</color>\";\n        }\n        this.cFSM.set_Next_state(B_scene_state.st_play_input);\n    }\n    public st_nextMission_update(){}\n    public st_play_input_into(){\n        find(\"Canvas/mathButton\").getComponent(gameB_MathButton).touchSwitch(true);\n    }\n    public st_play_input_update(){}\n    public st_show_result_into(){}\n    public st_show_result_update(){}\n    public st_show_mission_win_into(){\n        find(\"Canvas/mathButton\").getComponent(gameB_MathButton).touchSwitch(false);   \n        find(\"Canvas/Answer/ok\").active = true;\n        this.right_mission++;\n        AudioManager.playSound(\"answer02\");\n        this.cFSM.get_now_state().wait_time = 500;\n        if(this.last_is_right){\n            this.ComboCount++;\n        }\n        this.last_is_right = true;\n    }\n    public st_show_mission_win_update(){\n        find(\"Canvas/Answer/ok\").active = false;\n        this.cFSM.set_Next_state(B_scene_state.st_nextMission);    \n    }\n    public st_show_mission_err_into(){\n        find(\"Canvas/mathButton\").getComponent(gameB_MathButton).touchSwitch(false);  \n        this.error_mission++;\n        AudioManager.playSound(\"answer01\");\n        find(\"Canvas/Answer/err\").active = true;\n        this.cFSM.get_now_state().wait_time = 500;\n        this.last_is_right = false;\n    }\n    public st_show_mission_err_update(){\n        find(\"Canvas/Answer/err\").active = false;\n        this.cFSM.set_Next_state(B_scene_state.st_nextMission);  \n    }\n    public st_show_score_into(){\n        this.mission = this.right_mission+this.error_mission;\n        getST().setWin(this.mission,this.right_mission,this.ComboCount);\n        this.node_score_panle.active = true;\n        this.node_TimesUp.active = false;\n\n        this.node_score_panle.getChildByName(\"again\").once(Node.EventType.TOUCH_START,\n             function(){\n                AudioManager.playSound(\"UI_click\");\n                this.cFSM.set_Next_state(B_scene_state.st_init);\n             }, \n             this);\n        this.node_score_panle.getChildByName(\"exit\").once(Node.EventType.TOUCH_START,\n            function(){\n                AudioManager.playSound(\"UI_click\");\n                this.cFSM.set_Next_state(B_scene_state.st_end);\n            }, \n            this);\n        \n        this.node_score_panle.getChildByName(\"right_num\").getComponent(Label).string = this.right_mission.toString();\n        this.node_score_panle.getChildByName(\"err_num\").getComponent(Label).string = this.error_mission.toString();\n        this.node_score_panle.getChildByName(\"rate\").getComponent(Label).string = Math.floor(this.right_mission*100/this.mission).toString()+\"%\";\n\n        this.node_score_panle.getChildByName(\"time_num\").getComponent(Label).string = getST().time_num.toString()+'s';\n        this.node_score_panle.getChildByPath(\"score/right_score\").getComponent(RichText).string = \"<b><color=#7a4706>\"+getST().play_score.toString()+\"</color></b>\";\n        this.node_score_panle.getChildByPath(\"score/combo_score\").getComponent(RichText).string = \"<b><color=#7a4706>\"+getST().comble_score.toString()+\"</color></b>\";\n        this.node_score_panle.getChildByPath(\"score/total_score\").getComponent(RichText).string = \"<b><color=#7a4706>\"+getST().play_totle_score.toString()+\"</color></b>\";\n        let bastScore = getST().myRankData[getST().select_Game-1].score;\n        this.node_score_panle.getChildByPath(\"score/total_score-001\").getComponent(RichText).string = \"<b><color=f8e0b3>\"+bastScore.toString()+\"</color></b>\";\n        let strTitlePath:string[] = [ //0  認知  1\t數學  2\t記憶  3\t總排行  4\t注意力\n            \"txt_objext/title/成績結算_小標_打破障礙\",\n            \"txt_objext/title/成績結算_小標_點擊加法\",\n            \"txt_objext/title/成績結算_小標_安全路徑\",\n            \"\",\n            \"txt_objext/title/成績結算_小標_切換顏色\",\n        ]\n        for(let i=0;i<5;i++){\n            if(i == 3)\n                continue;\n            if(i == (getST().select_Game-1)){\n                this.node_score_panle.getChildByPath(strTitlePath[i]).active = true;\n            }\n            else{\n                this.node_score_panle.getChildByPath(strTitlePath[i]).active = false;\n            }\n\n        }\n        AudioManager.playSound(\"result01\");\n    }\n    public st_show_score_update(){\n        let step:number = Math.floor(this.cFSM.get_now_state().elapsed_time/33);\n        if(step <= 25){\n            let rate:number =  this.right_mission/this.mission;\n            let rateP:number = rate*(step/25);\n            rateP = (Math.round(rateP * 100) / 100)*-1;\n            find(\"Canvas/score_panle/成績結算_藍圈\").getComponent(Sprite).fillRange = rateP;\n        }\n    }\n    public st_timeup_animation_into(){\n        find(\"Canvas/mathButton\").getComponent(gameB_MathButton).touchSwitch(false);  \n        this.node_TimesUp.getComponent(gtool_start_time).switchShow(true);\n        AudioManager.stopMusic();\n    }\n    public st_timeup_animation_update(){\n        if(this.node_TimesUp.getComponent(gtool_start_time).blTimesUP){\n            this.cFSM.set_Next_state(B_scene_state.st_show_score);\n        }\n    }\n    public st_end_into(){\n        common_getEventTarget().emit(EventEnum_Scene.Go_GameHome);\n    }\n    public st_end_update(){}\n\n    \n    public update(){\n        //經過時間\n        let elapsed_time = Date.now() - this.last_timestamp;\n        \n        if(elapsed_time < 33){\n            return;\n        }\n        this.last_timestamp = Date.now();\n        this.cFSM.update();\n\n        \n        if(this.cFSM.get_now_state().state == B_scene_state.st_play_input){\n            //----測試除錯用--------------------\n            if(getST().getIsInTestMode()){\n                elapsed_time = 0;   \n            }\n            //---------------------------------\n            this.play_last_time = this.play_last_time-elapsed_time;\n            if(this.play_last_time < 0){\n                this.play_last_time = 0;\n            }\n            let _sec = Math.floor(this.play_last_time/1000).toString().padStart(2, '0');\n            let _msec = Math.floor(this.play_last_time%1000/10).toString().padStart(2, '0');\n        \n            find(\"Canvas/time/TimeText_sec\").getComponent(RichText).string = \"<color=#ffffff>\"+_sec+\":\"+ \"</color>\";\n            find(\"Canvas/time/TimeText_msec\").getComponent(RichText).string = \"<color=#ffffff>\"+_msec+ \"</color>\";\n            if(this.play_last_time<=0){\n                this.cFSM.set_Next_state(B_scene_state.st_timeup_animation);\n            }\n            if(this.blPlay10TimesSound==false){\n                if(this.play_last_time <= 3000){\n                    this.blPlay10TimesSound = true;\n                    AudioManager.playSound(\"countdown01\");\n                }\n            }\n        }\n        \n    }\n    \n}\n\n\nvar _proc_B_scene:Proc_B_scene = null;\n\n\nexport function getProc_B_scene() {\n\n    if(_proc_B_scene === null) {\n        _proc_B_scene = new Proc_B_scene();\n        console.log('new Proc_B_scene');\n    }\n    return _proc_B_scene;\n} \n\n","import { find, UITransform,Node,RichText, Sprite, Color, log, EventTouch,Label, Vec2, instantiate} from 'cc';\nimport { common_getEventTarget,EventEnum_Scene,common_bind_touch_start,getST,CState,CFSM } from './Common';\nimport { AudioManager } from './AudioManager';\nimport { SpriteFrameManager } from './SpriteFrameManager';\nimport { gtool_start_time } from './gtool_start_time';\nimport { gameC_MapButton } from './gameC_MapButton';\n\n\n\n//遊戲流程\nenum C_scene_state  { \n    st_none=100,    //無狀態\n    st_init,        //初始化 \n    st_tutorial,    //教程\n    st_into_animation, //进入动画\n    st_nextMission,//下一關\n    st_waitRealStart,//等待按下正式開始按鈕\n    st_realStart,//按下正式開始按鈕後的流程\n    st_play_input, //玩家输入\n    st_show_getStar, //顯示獲得星星\n    st_show_result, //显示结果 //下降獲錯誤\n    st_show_mission_win, //顯示階段任務完成\n    st_show_mission_err, //顯示階段任務失敗\n    st_show_score, //顯示分數\n    st_timeup_animation, //時間到動畫\n    st_end, //结束\n}\n\nclass Proc_C_scene{ \n\n    private last_timestamp:number = 0;//主要FPS上一次時間\n    private cFSM:CFSM = new CFSM();\n\n    private md:any = null;\n    private mission:number = 0;//目前玩到的關卡\n    private right_mission:number = 0;//答對的關卡數\n    private error_mission:number = 0;//答錯的關卡數\n    private ComboCount:number = 0;//連續答對次數\n    private last_is_right:boolean = false;//上一個是否是答對\n\n    private play_last_time:number = 0;//剩餘玩的時間\n\n    private node_StartTime:Node = null;//開始時間的文字\n    private node_TimesUp:Node = null;//時間到的文字\n    private node_score_panle:Node = null;//結算\n\n    private map_node:Node[][] = null;//格子物件 0一般格子 1 碰到星或旗子_格子 2 碰到炸彈_格子 3 行進中_格子\n   \n    private touch_flag:boolean = false;//是否已經點旗幟開始\n    private star_flag:boolean = false;//是否點到星星\n    private star_pos:number = 0;//星星的位置\n    private end_pos:number = 0;//結束的位置\n    private start_pos:number = 0; //開始的位置\n\n    private question_num:number[] = [];//題目，一次產生10題 避免重複 \n\n    private question_mapData:number[] = [];//0=空白 1=星星 2=旗子 3=炸彈\n    private answer_mapData:number[] = [];//0=空白 1=點擊\n\n    private MapButton_0:gameC_MapButton = null;\n\n    private game_base_obj:Node[] = [];//0=炸彈爆炸 1=星星 2=旗子 3=炸彈\n    private game_obj_clone:Node = null;\n    private game_base_obj_v2:Vec2 = new Vec2(-187.5,190);\n    private game_base_obj_add_x:number = 125;\n    private game_base_obj_add_y:number = 127;\n    private game_objinMap:Node[] = [];//在地圖中的物件\n\n    private real_start_btn:Node = null;\n\n    private strTutorialPath:string[] = [\n        \"Canvas/tutorial/遊戲說明_01\",\n        \"Canvas/tutorial/遊戲說明_02\",\n        \"Canvas/tutorial/遊戲說明_03\"\n    ];\n\n    private blPlay10TimesSound:boolean = false;\n\n    \n    public init(){\n\n        //初始化\n        this.cFSM = new CFSM();\n        this.add_FSM_state();\n\n        this.cFSM.set_Next_state(C_scene_state.st_init);\n        this.last_timestamp = Date.now();\n\n\n        this.md = getST().get_mission_data();\n        this.mission = 0;\n        this.right_mission = 0;\n        this.ComboCount = 0;\n        this.last_is_right = false;\n\n       \n        find(\"Canvas/返回\").once(Node.EventType.TOUCH_START, function(){\n            AudioManager.playSound(\"UI_click\");\n            common_getEventTarget().emit(EventEnum_Scene.Go_GameHome);\n        }, this);\n\n        find(\"Canvas/tutorial\").active = false;\n        this.node_StartTime = find(\"Canvas/start\");\n        this.node_StartTime.active = false;\n        this.node_TimesUp = find(\"Canvas/timesup\");\n        this.node_TimesUp.active = false;\n        this.node_score_panle = find(\"Canvas/score_panle\");\n        this.node_score_panle.active = false;\n\n        this.init_map_node();\n        for(let j=0;j<4;j++){\n            for(let i=0;i<16;i++){\n                if(j==0)\n                    this.map_node[j][i].active = true;\n                else\n                    this.map_node[j][i].active = false;\n            }\n        }\n        this.MapButton_0 = find(\"Canvas/格子/一般格子\").getComponent(gameC_MapButton);\n\n        common_getEventTarget().on(EventEnum_Scene.GameC_event_MapButton, this.gameC_event_MapButton, this);\n        //0=炸彈爆炸 1=星星 2=旗子 3=炸彈 \n        this.game_base_obj = [];\n        this.game_base_obj.push(find(\"Canvas/出題物件/炸彈爆炸\"));\n        this.game_base_obj.push(find(\"Canvas/出題物件/星星\"));\n        this.game_base_obj.push(find(\"Canvas/出題物件/旗子\"));\n        this.game_base_obj.push(find(\"Canvas/出題物件/炸彈\"));\n        this.game_obj_clone = find(\"Canvas/clone\");\n\n        this.real_start_btn = find(\"Canvas/background/real_start\");\n        this.real_start_btn.active = false;\n        this.real_start_btn.getChildByPath(\"real_start_btn\").on(Node.EventType.TOUCH_START, function(){\n            this.cFSM.set_Next_state(C_scene_state.st_realStart);\n            this.real_start_btn.active = false;\n            find(\"Canvas/background/提示/提示文字1\").active = false;\n        }, this);\n    }\n\n    private add_FSM_state(){\n        this.cFSM.add_new_state(C_scene_state.st_init,\"st_init\",this.st_init_into,this.st_init_update,this);\n        this.cFSM.add_new_state(C_scene_state.st_tutorial,\"st_tutorial\",this.st_tutorial_into,this.st_tutorial_update,this);\n        this.cFSM.add_new_state(C_scene_state.st_into_animation,\"st_into_animation\",this.st_into_animation_into,this.st_into_animation_update,this);\n        this.cFSM.add_new_state(C_scene_state.st_nextMission,\"st_nextMission\",this.st_nextMission_into,this.st_nextMission_update,this);\n        this.cFSM.add_new_state(C_scene_state.st_waitRealStart,\"st_waitRealStart\",this.st_waitRealStart_into,this.st_waitRealStart_update,this);\n        this.cFSM.add_new_state(C_scene_state.st_realStart,\"st_play_input\",this.st_realStart_into,this.st_realStart_update,this);\n        this.cFSM.add_new_state(C_scene_state.st_play_input,\"st_play_input\",this.st_play_input_into,this.st_play_input_update,this);\n        this.cFSM.add_new_state(C_scene_state.st_show_getStar,\"st_show_getStar\",this.st_show_getStar_into,this.st_show_getStar_update,this);\n        this.cFSM.add_new_state(C_scene_state.st_show_result,\"st_show_result\",this.st_show_result_into,this.st_show_result_update,this);\n        this.cFSM.add_new_state(C_scene_state.st_show_mission_win,\"st_show_mission_win\",this.st_show_mission_win_into,this.st_show_mission_win_update,this);\n        this.cFSM.add_new_state(C_scene_state.st_show_mission_err,\"st_show_mission_err\",this.st_show_mission_err_into,this.st_show_mission_err_update,this);\n        this.cFSM.add_new_state(C_scene_state.st_show_score,\"st_show_score\",this.st_show_score_into,this.st_show_score_update,this);\n        this.cFSM.add_new_state(C_scene_state.st_timeup_animation,\"st_timeup_animation\",this.st_timeup_animation_into,this.st_timeup_animation_update,this);\n        this.cFSM.add_new_state(C_scene_state.st_end,\"st_end\",this.st_end_into,this.st_end_update,this);\n\n    }\n\n    public gameC_event_MapButton(index:number){\n        log(\"gameC_event_MapButton index:\"+index);\n\n        if(this.cFSM.get_now_state().state != C_scene_state.st_play_input) return;\n\n        //取消這次的點擊與滑螢幕移動\n        if(index == 255){\n            //----重置旗子與路的資料---------------\n            //路的提示圖重置\n            for(let j=0;j<4;j++){\n                for(let i=0;i<16;i++){\n                    if(j==0)\n                        this.map_node[j][i].active = true;\n                    else\n                        this.map_node[j][i].active = false;\n                }\n            }\n            //清掉答案\n            for(let i=0;i<16;i++){\n                this.answer_mapData[i] = 0;\n            }\n           \n            //清掉初始旗子設定\n            this.touch_flag = false;\n            this.start_pos = -1;\n\n            //格子點擊資訊重置\n            this.MapButton_0.resetTouch();\n            //------------------------------------\n            return;\n        }\n\n\n        if(this.answer_mapData[index] == 1) return;\n\n        //第一個判定\n        if(this.touch_flag == false){\n            if(this.question_mapData[index] == 2){\n                this.touch_flag = true;\n               // this.map_node[0][index].active = false;\n                this.map_node[3][index].active = true;\n                this.answer_mapData[index] = 1;\n                this.start_pos = index;\n            }\n            else{\n                this.MapButton_0.resetTouch();\n            }\n            return;\n        }\n\n       // this.map_node[0][index].active = false;\n        this.map_node[3][index].active = true;\n        this.answer_mapData[index] = 1;\n        if(this.question_mapData[index] == 1){\n            this,this.MapButton_0.touchSwitch(false);\n            this.star_flag = true;\n            this.cFSM.set_Next_state(C_scene_state.st_show_getStar);\n        }\n        else if(this.question_mapData[index] == 2 ){\n            this,this.MapButton_0.touchSwitch(false);\n            this.cFSM.set_Next_state(C_scene_state.st_show_result);\n            this.end_pos = index;\n        }\n    }\n\n    private init_map_node(){\n        this.map_node = [];\n      \n        let path_4:string[] = [\n            \"Canvas/格子/一般格子/方塊_一般\",\n            \"Canvas/格子/碰到星或旗子_格子/方塊_一般\",\n            \"Canvas/格子/碰到炸彈_格子/方塊_一般\",\n            \"Canvas/格子/行進中_格子/方塊_一般\"\n        ];\n        for(let j=0;j<4;j++){\n            let map_node_sub = [];\n            for(let i=0;i<16;i++){\n                let path = path_4[j];\n                if(i>0){\n                    path = path + \"-\"+i.toString().padStart(3, '0');\n                }\n                let node = find(path);\n                node.active = false;\n                map_node_sub.push(node);\n            }\n            this.map_node.push(map_node_sub);\n        }\n    }\n\n    private get_next_question():number[]{\n        if(this.question_num.length == 0){\n            this.create_10_question();\n        }\n        let q:number = this.question_num.shift();\n        this.create_10_question();\n\n        let mapData:number[] = [];\n        this.answer_mapData = [];\n        for(let i=0;i<16;i++){\n            mapData.push(0);\n            this.answer_mapData.push(0);\n        }\n        this.MapButton_0.resetTouch();\n        let QuestionData = this.md.QuestionSet[\"Question_\"+(q+1)];\n\n        log(QuestionData);\n    \n        //0=空白 1=星星 2=旗子 3=炸彈\n        for(let i=0;i<QuestionData.TargetPoint.length;i++){\n            let qt = QuestionData.TargetPoint[i]-1;\n            mapData[qt] = 2;\n        }\n        for(let i=0;i<QuestionData.PlusPoint.length;i++){\n            let qp = QuestionData.PlusPoint[i]-1;\n            mapData[qp] = 1;\n        }\n        //----炸彈----------------------------------------------\n        let BombCount = QuestionData.BombCounts[Math.floor(Math.random()*QuestionData.BombCounts.length)];\n        let empMap:number[] = [];\n        for(let i=0;i<16;i++){\n            if(mapData[i] == 0){\n                if(QuestionData.SafePoint.indexOf((i+1)) == -1){\n                    empMap.push(i);\n                }\n            }\n        }\n        \n        for(let i=0;i<BombCount;i++){\n            let index = Math.floor(Math.random()*empMap.length);\n            let b = empMap[index];\n            empMap.splice(index,1);\n            mapData[b] = 3;\n        }\n        //----------------------------------------------------------\n\n        return mapData;\n    }\n\n    private create_10_question(){\n        let need_cnt = 10-this.question_num.length;\n        \n        for(let i=0;i<need_cnt;i++){\n            //找出不重複的亂數題目\n            while(true){\n                let rand:number = Math.random()*20;\n                if(rand>=20)\n                    rand = 19;\n\n                let q:number = Math.floor(rand);\n\n                let is_same = false;\n                for(let j=0;j<this.question_num.length;j++){\n                    if(this.question_num[j]==q){\n                        is_same = true;\n                        break;\n                    }\n                }\n                if(is_same==false){\n                    this.question_num.push(q);\n                    break;\n                }\n            }\n        }\n    }\n\n\n    public st_init_into(){\n        this.touch_flag = false;\n        this.mission = 0;\n        this.right_mission = 0;\n        this.error_mission = 0;\n        this.ComboCount = 0;\n        this.last_is_right = false;\n        this.node_score_panle.active = false;\n        this.node_TimesUp.active = false;\n        this.node_StartTime.active = false;\n        this.cFSM.set_Next_state(C_scene_state.st_tutorial);\n        this.game_obj_clone.destroyAllChildren();\n        this.blPlay10TimesSound = false;\n\n    }\n    public st_init_update(){}\n    public st_tutorial_into(){\n        find(\"Canvas/tutorial\").active = true;\n        let btn_start = find(\"Canvas/tutorial/btn_start\");\n        let btn_next_page = find(\"Canvas/tutorial/btn_next_page\");\n        btn_start.once(Node.EventType.TOUCH_START,\n            function(){\n                this.cFSM.set_Next_state(C_scene_state.st_into_animation);\n                find(\"Canvas/tutorial\").active = false;\n                this.node_StartTime.getComponent(gtool_start_time).switchShow(true);\n                AudioManager.playSound(\"countdown01\");\n            }, this);\n\n        btn_start.active = true;\n        btn_next_page.active = true;\n\n        btn_next_page.off(Node.EventType.TOUCH_START);\n        btn_next_page.on(Node.EventType.TOUCH_START,\n            function(){\n                let _page:number = 0;\n                for(let i=0;i<this.strTutorialPath.length;i++){\n                    if(find(this.strTutorialPath[i]).active == true){\n                        _page = i;\n                        break;\n                    }\n                }\n                _page++;\n                if(_page >= this.strTutorialPath.length){\n                    _page = 0;\n                }\n                \n               log(\"page = \"+_page);\n                for(let i=0;i<this.strTutorialPath.length;i++){\n                    find(this.strTutorialPath[i]).active = false;\n                    if(i == _page){\n                        find(this.strTutorialPath[i]).active = true;\n                    }\n                }\n            }, this);\n\n        for(let i=0;i<this.strTutorialPath.length;i++){\n            find(this.strTutorialPath[i]).active = false;\n        }\n        find(this.strTutorialPath[0]).active = true;\n        \n    }\n    public st_tutorial_update(){}\n    public st_into_animation_into(){\n        AudioManager.stopMusic();\n    }\n    public st_into_animation_update(){\n        if(this.node_StartTime.getComponent(gtool_start_time).blTimesUP){\n            this.node_StartTime.active = false;\n            this.cFSM.set_Next_state(C_scene_state.st_nextMission);\n            this.play_last_time = this.md.Time*1000;\n\n            AudioManager.playMusic(\"bgm02\");\n        }\n    }\n    public st_nextMission_into(){\n        this.mission++;\n        this.star_flag = false;\n        this.touch_flag = false;\n        this.game_obj_clone.destroyAllChildren();\n        this.game_obj_clone.removeAllChildren();\n       \n        this.question_mapData = this.get_next_question();\n        for(let j=0;j<4;j++){\n            for(let i=0;i<16;i++){\n                if(j==0)\n                    this.map_node[j][i].active = true;\n                else\n                    this.map_node[j][i].active = false;\n            }\n        }\n        \n\n        //顯示炸彈\n        for(let i=0;i<16;i++){\n            if(this.question_mapData[i] == 3){\n                let objTmp:Node = instantiate(this.game_base_obj[3]);\n                this.game_obj_clone.addChild(objTmp);\n                this.game_objinMap[i] = objTmp;\n\n                let _x = this.game_base_obj_v2.x+this.game_base_obj_add_x*(i%4);\n                let _y = this.game_base_obj_v2.y-this.game_base_obj_add_y*(Math.floor(i/4));\n                objTmp.setPosition(_x,_y);\n                objTmp.active = true;\n            }\n        }\n\n        this.start_pos = -1;\n\n        this.cFSM.set_Next_state(C_scene_state.st_waitRealStart);\n        \n    }\n    public st_nextMission_update(){}\n\n    public st_waitRealStart_into(){\n        this.real_start_btn.active = true;\n        find(\"Canvas/background/提示/提示文字1\").active = true;\n    }\n    public st_waitRealStart_update(){}\n    public st_realStart_into(){\n        this.game_obj_clone.destroyAllChildren();\n        this.game_obj_clone.removeAllChildren();\n\n        this.game_objinMap = [];\n        //顯示星星和旗子\n        for(let i=0;i<16;i++){\n            this.game_objinMap.push(null);\n            //0=空白 1=星星 2=旗子 3=炸彈\n            if(this.question_mapData[i] == 1 || this.question_mapData[i] == 2){\n                //0=炸彈爆炸 1=星星 2=旗子 3=炸彈\n                let objTmp:Node = instantiate(this.game_base_obj[this.question_mapData[i]]);\n                this.game_obj_clone.addChild(objTmp);\n                this.game_objinMap[i] = objTmp;\n\n                let _x = this.game_base_obj_v2.x+this.game_base_obj_add_x*(i%4);\n                let _y = this.game_base_obj_v2.y-this.game_base_obj_add_y*(Math.floor(i/4));\n                objTmp.setPosition(_x,_y);\n                objTmp.active = true;\n\n                if(this.question_mapData[i] == 1){\n                    this.star_pos = i;\n                }\n            }\n        }\n        this.cFSM.set_Next_state(C_scene_state.st_play_input);\n    }\n    public st_realStart_update(){}\n    public st_play_input_into(){\n\n        this.MapButton_0.touchSwitch(true);\n    }\n    public st_play_input_update(){}\n\n    public st_show_getStar_into(){\n        let blBome = false;\n        for(let i=0;i<16;i++){\n            if(this.answer_mapData[i] == 1 && this.question_mapData[i] == 3){\n                blBome = true;\n                break;\n            }\n        }\n        if(blBome){\n            this.cFSM.set_Next_state(C_scene_state.st_show_result);\n        }\n        else{\n            this.right_mission++;\n            AudioManager.playSound(\"answer02\");\n        }\n    }\n    public st_show_getStar_update(){\n        let step = Math.floor(this.cFSM.get_now_state().elapsed_time/33);\n        let _x = this.game_base_obj_v2.x+this.game_base_obj_add_x*(this.star_pos%4);\n        let _y = this.game_base_obj_v2.y-this.game_base_obj_add_y*(Math.floor(this.star_pos/4))+step*6;\n        this.game_objinMap[this.star_pos].setPosition(_x,_y);\n        this.game_objinMap[this.star_pos].setScale(1+step*0.05,1+step*0.05);\n        this.game_objinMap[this.star_pos].getComponent(Sprite).color = new Color(255,255,255,255-step*7);\n        \n        if(step >= 25){\n            this.game_objinMap[this.star_pos].active = false;//關掉星星\n\n            let startFlag_x = this.game_base_obj_v2.x+this.game_base_obj_add_x*(this.star_pos%4);\n            let startFlag_y = this.game_base_obj_v2.y-this.game_base_obj_add_y*(Math.floor(this.star_pos/4));\n\n            this.game_objinMap[this.start_pos].setPosition(startFlag_x,startFlag_y);//移動開始旗子\n\n            //----重置旗子與路的資料---------------\n            //路的提示圖重置\n            for(let j=0;j<4;j++){\n                for(let i=0;i<16;i++){\n                    if(j==0)\n                        this.map_node[j][i].active = true;\n                    else\n                        this.map_node[j][i].active = false;\n                }\n            }\n            //清掉答案\n            for(let i=0;i<16;i++){\n                this.answer_mapData[i] = 0;\n            }\n\n            //移動題目旗子到星星\n            this.question_mapData[this.start_pos] = 0;\n            this.question_mapData[this.star_pos] = 2;\n         \n\n            //清掉初始旗子設定\n            this.touch_flag = false;\n            this.start_pos = -1;\n\n            //格子點擊資訊重置\n            this.MapButton_0.resetTouch();\n\n            //------------------------------------\n\n\n\n            this.cFSM.set_Next_state(C_scene_state.st_play_input);\n        }  \n    }\n\n    public st_show_result_into(){\n        for(let j=0;j<4;j++){\n            for(let i=0;i<16;i++){\n                if(this.answer_mapData[i] > 0 && j == 1){\n                    this.map_node[j][i].active = true;\n                }\n                else if(this.answer_mapData[i] ==0 && j==0){\n                    this.map_node[j][i].active = true;\n                }\n                else{\n                    this.map_node[j][i].active = false;\n                }\n            }\n        }\n        this.cFSM.get_now_state().wait_time = 1000;\n    }\n    public st_show_result_update(){\n        let blBome = false;\n        for(let i=0;i<16;i++){\n            if(this.answer_mapData[i] == 1 && this.question_mapData[i] == 3){\n                blBome = true;\n                break;\n            }\n        }\n        if(blBome){ \n            this.cFSM.set_Next_state(C_scene_state.st_show_mission_err);\n        }\n        else{\n            this.cFSM.set_Next_state(C_scene_state.st_show_mission_win);\n        }\n\n        //顯示炸彈\n        for(let i=0;i<16;i++){\n            //0=炸彈爆炸 1=星星 2=旗子 3=炸彈\n            let objTmp:Node =null;\n            if(this.question_mapData[i] == 3){\n                if(this.answer_mapData[i] == 1){\n                    objTmp = instantiate(this.game_base_obj[0]);\n                }\n                else{\n                    objTmp = instantiate(this.game_base_obj[3]);\n                }\n                this.game_obj_clone.addChild(objTmp);\n                this.game_objinMap[i] = objTmp;\n\n                let _x = this.game_base_obj_v2.x+this.game_base_obj_add_x*(i%4);\n                let _y = this.game_base_obj_v2.y-this.game_base_obj_add_y*(Math.floor(i/4));\n                objTmp.setPosition(_x,_y);\n                objTmp.active = true;\n            }\n        }\n        //點到旗子關掉星星\n        if(!this.star_flag){\n            this.game_objinMap[this.star_pos].active = false;\n        }\n\n        \n    }\n    public st_show_mission_win_into(){\n      \n        if(this.last_is_right){\n            this.ComboCount++;\n        }\n        this.right_mission++;\n        AudioManager.playSound(\"answer02\");\n        this.last_is_right = true;\n    }\n    public st_show_mission_win_update(){\n        \n        //旗子閃爍\n        let step = Math.floor(this.cFSM.get_now_state().elapsed_time/100);\n        if(step%2 == 0){\n            this.game_objinMap[this.end_pos].active = false;\n        }\n        else{\n            this.game_objinMap[this.end_pos].active = true;\n        }\n        if(step >= 6){\n            this.cFSM.set_Next_state(C_scene_state.st_nextMission);\n        }\n        \n    }\n    public st_show_mission_err_into(){\n        this.error_mission++;\n        AudioManager.playSound(\"answer01\");\n        this.last_is_right = false;\n        \n        //顯示紅格子\n        for(let j=0;j<4;j++){\n            for(let i=0;i<16;i++){\n                if(this.answer_mapData[i] > 0 && j == 2){\n                    this.map_node[j][i].active = true;\n                }\n                else if(j==0){\n                    this.map_node[j][i].active = true;\n                }\n                else{\n                    this.map_node[j][i].active = false;\n                }\n            }\n        }   \n        this.cFSM.get_now_state().wait_time = 500; \n    }\n    public st_show_mission_err_update(){\n        this.cFSM.set_Next_state(C_scene_state.st_nextMission);\n    }\n    public st_show_score_into(){\n        this.mission = this.right_mission+this.error_mission;\n        getST().setWin(this.mission,this.right_mission,this.ComboCount);\n        this.node_score_panle.active = true;\n        this.node_TimesUp.active = false;\n\n        this.node_score_panle.getChildByName(\"again\").once(Node.EventType.TOUCH_START,\n             function(){\n                AudioManager.playSound(\"UI_click\");\n                this.cFSM.set_Next_state(C_scene_state.st_init);\n             }, \n             this);\n        this.node_score_panle.getChildByName(\"exit\").once(Node.EventType.TOUCH_START,\n            function(){\n                AudioManager.playSound(\"UI_click\");\n                this.cFSM.set_Next_state(C_scene_state.st_end);\n            }, \n            this);\n        \n        this.node_score_panle.getChildByName(\"right_num\").getComponent(Label).string = this.right_mission.toString();\n        this.node_score_panle.getChildByName(\"err_num\").getComponent(Label).string = this.error_mission.toString();\n        this.node_score_panle.getChildByName(\"rate\").getComponent(Label).string = Math.floor(this.right_mission*100/this.mission).toString()+\"%\";\n\n        this.node_score_panle.getChildByName(\"time_num\").getComponent(Label).string = getST().time_num.toString()+'s';\n        this.node_score_panle.getChildByPath(\"score/right_score\").getComponent(RichText).string = \"<b><color=#7a4706>\"+getST().play_score.toString()+\"</color></b>\";\n        this.node_score_panle.getChildByPath(\"score/combo_score\").getComponent(RichText).string = \"<b><color=#7a4706>\"+getST().comble_score.toString()+\"</color></b>\";\n        this.node_score_panle.getChildByPath(\"score/total_score\").getComponent(RichText).string = \"<b><color=#7a4706>\"+getST().play_totle_score.toString()+\"</color></b>\";\n        let bastScore = getST().myRankData[getST().select_Game-1].score;\n        this.node_score_panle.getChildByPath(\"score/total_score-001\").getComponent(RichText).string = \"<b><color=f8e0b3>\"+bastScore.toString()+\"</color></b>\";\n        let strTitlePath:string[] = [ //0  認知  1\t數學  2\t記憶  3\t總排行  4\t注意力\n            \"txt_objext/title/成績結算_小標_打破障礙\",\n            \"txt_objext/title/成績結算_小標_點擊加法\",\n            \"txt_objext/title/成績結算_小標_安全路徑\",\n            \"\",\n            \"txt_objext/title/成績結算_小標_切換顏色\",\n        ]\n        for(let i=0;i<5;i++){\n            if(i == 3)\n                continue;\n            if(i == (getST().select_Game-1)){\n                this.node_score_panle.getChildByPath(strTitlePath[i]).active = true;\n            }\n            else{\n                this.node_score_panle.getChildByPath(strTitlePath[i]).active = false;\n            }\n\n        }\n        AudioManager.playSound(\"result01\");   \n    }\n    public st_show_score_update(){\n        let step:number = Math.floor(this.cFSM.get_now_state().elapsed_time/33);\n        if(step <= 25){\n            let rate:number =  this.right_mission/this.mission;\n            let rateP:number = rate*(step/25);\n            rateP = (Math.round(rateP * 100) / 100)*-1;\n            find(\"Canvas/score_panle/成績結算_藍圈\").getComponent(Sprite).fillRange = rateP;\n        }\n    }\n    public st_timeup_animation_into(){\n        this.node_TimesUp.getComponent(gtool_start_time).switchShow(true);\n        AudioManager.stopMusic();\n    }\n    public st_timeup_animation_update(){\n        if(this.node_TimesUp.getComponent(gtool_start_time).blTimesUP){\n            this.cFSM.set_Next_state(C_scene_state.st_show_score);\n        }\n    }\n    public st_end_into(){\n        common_getEventTarget().emit(EventEnum_Scene.Go_GameHome);\n    }\n    public st_end_update(){}\n    \n\n    public update(){\n        //經過時間\n        let elapsed_time = Date.now() - this.last_timestamp;\n        \n        if(elapsed_time < 33){\n            return;\n        }\n        this.last_timestamp = Date.now();\n        this.cFSM.update();\n\n\n        if(this.cFSM.get_now_state().state >= C_scene_state.st_nextMission && \n        this.cFSM.get_now_state().state <= C_scene_state.st_show_mission_err){\n            //----測試除錯用--------------------\n            if(getST().getIsInTestMode()){\n                elapsed_time = 0;   \n            }\n            //---------------------------------\n            \n            this.play_last_time = this.play_last_time-elapsed_time;\n            if(this.play_last_time < 0){\n                this.play_last_time = 0;\n            }\n            let _sec = Math.floor(this.play_last_time/1000).toString().padStart(2, '0');\n            let _msec = Math.floor(this.play_last_time%1000/10).toString().padStart(2, '0');\n        \n            find(\"Canvas/time/TimeText_sec\").getComponent(RichText).string = \"<color=#ffffff>\"+_sec+\":\"+ \"</color>\";\n            find(\"Canvas/time/TimeText_msec\").getComponent(RichText).string = \"<color=#ffffff>\"+_msec+ \"</color>\";\n            if(this.play_last_time<=0){\n                this,this.MapButton_0.touchSwitch(true);\n                this.cFSM.set_Next_state(C_scene_state.st_timeup_animation);\n            }\n            if(this.blPlay10TimesSound==false){\n                if(this.play_last_time <= 3000){\n                    this.blPlay10TimesSound = true;\n                    AudioManager.playSound(\"countdown01\");\n                }\n            }\n        }\n    }\n    \n}\n\n\n\nvar _proc_C_scene:Proc_C_scene = null;\n\n\nexport function getProc_C_scene() {\n\n    if(_proc_C_scene === null) {\n        _proc_C_scene = new Proc_C_scene();\n        console.log('new Proc_C_scene');\n    }\n    return _proc_C_scene;\n} \n\n","import { find, UITransform,Node,RichText, Sprite, Color, log, EventTouch,Label, random, instantiate} from 'cc';\nimport { common_getEventTarget,EventEnum_Scene,common_bind_touch_start,getST,CState,CFSM } from './Common';\nimport { AudioManager } from './AudioManager';\nimport { SpriteFrameManager } from './SpriteFrameManager';\nimport { gameD_ColorButton } from './gameD_ColorButton';\nimport { gameD_DiamondBox } from './gameD_DiamondBox';\nimport { gtool_start_time } from './gtool_start_time';\n\n\nclass CBoxData{\n    //出現方向\n    public iRL:number = 0;//0=right 1=left\n    public iUB:number = 0;//0=UP 1=DOWN\n    \n    public iColor:number = 0;//0=blue 1=yallow\n\n    public blMoveFast:boolean = false;//快速移動\n\n    public iBoxID:number = 0;\n    public iBoxNode:Node = null;\n    public diamondBox:gameD_DiamondBox = null;\n\n}\n\nclass CBoxTool{\n    public cBoxs:CBoxData[] = null;\n\n    public iBoxID_G:number = 0;\n    \n    private next_createBox_wait_time:number = 0;//創建方塊的等待時間\n    private createBox_wait_time_last:number = 0;//創建方塊等待時間的上次時間\n\n    private iMinTime:number = 200;//最小創建時間\n    private iMxnTime:number = 500;//最大創建時間\n    private iMinLineTime:number = 1000;//最小單線創建時間\n    private last_RL_create_time:number[] = [0,0];\n\n    private iMaxFastBox:number = 1;//最大快速方塊數量\n    private iMaxSlowBox:number = 2;//最大慢速方塊數量\n    \n\n    private base_box_node:Node = null;//基礎方塊\n    private clone_parent_node:Node = null;//方塊複製的置放地點\n\n    public init(_box_base_node:Node,_clone_parent_node:Node){\n        this.iBoxID_G = 0;\n        this.cBoxs = [];\n        this.next_createBox_wait_time = this.getNextCreateBoxWaitTime();\n        this.createBox_wait_time_last = Date.now();\n        this.base_box_node = _box_base_node;\n        this.clone_parent_node = _clone_parent_node;\n    }\n\n    public createNewBox():boolean{\n        let iMaxBox = this.iMaxFastBox + this.iMaxSlowBox;\n        if(this.cBoxs.length >= iMaxBox){\n            return false;\n        }\n        if((Date.now() - this.createBox_wait_time_last) >= this.next_createBox_wait_time){\n            let _iRL = Math.floor(Math.random() * 2);\n            if(Date.now() - this.last_RL_create_time[_iRL] > this.iMinLineTime){\n                this.last_RL_create_time[_iRL] = Date.now();\n                this.createBox_wait_time_last = Date.now();\n                this.next_createBox_wait_time = this.getNextCreateBoxWaitTime();\n                let _cBox = new CBoxData();\n                this.iBoxID_G++;\n                _cBox.iBoxID = this.iBoxID_G;\n                _cBox.iColor = Math.floor(Math.random() * 2);\n                _cBox.iRL = _iRL;\n                _cBox.iUB = Math.floor(Math.random() * 2);\n                let imoveType:boolean[] = [];\n                let _cnt_f:number = 0;\n                let _cnt_s:number = 0;\n                for(let i = 0;i < this.cBoxs.length;i++){\n                    if(this.cBoxs[i].blMoveFast){\n                        _cnt_f++;\n                    }else{\n                        _cnt_s++;\n                    }\n                }\n                _cnt_f = this.iMaxFastBox - _cnt_f;\n                _cnt_s = this.iMaxSlowBox - _cnt_s;\n                for(let i = 0;i < _cnt_f;i++){\n                    imoveType.push(true);\n                }\n                for(let i = 0;i < _cnt_s;i++){\n                    imoveType.push(false);\n                }\n\n                _cBox.blMoveFast = imoveType[Math.floor(Math.random() * imoveType.length)];\n                log(\"blMoveFast\",_cBox.blMoveFast);\n\n                _cBox.iBoxNode = instantiate(this.base_box_node);\n                _cBox.diamondBox = _cBox.iBoxNode.getComponent(gameD_DiamondBox);\n                _cBox.diamondBox.init(_cBox.iBoxID,_cBox.iColor,_cBox.iRL,_cBox.iUB,_cBox.blMoveFast);\n                this.clone_parent_node.addChild(_cBox.iBoxNode);\n                this.cBoxs.push(_cBox);\n                return true;\n            }\n        }\n        return false;\n    }\n\n    public delBox(_BoxID:number){\n        for(let i = 0;i<this.cBoxs.length;i++){\n            if(this.cBoxs[i].iBoxID == _BoxID){\n                this.clone_parent_node.removeChild(this.cBoxs[i].iBoxNode);\n                this.cBoxs[i].iBoxNode.destroy();\n                this.cBoxs.splice(i,1);\n                this.createBox_wait_time_last = Date.now();\n                return;\n            }\n        }\n    }\n\n    public deleteAll(){\n        this.clone_parent_node.removeAllChildren();\n        this.cBoxs = [];\n    }\n\n\n    private getNextCreateBoxWaitTime():number{\n        let _iTime = Math.random() * (this.iMxnTime - this.iMinTime) + this.iMinTime;\n        return Math.floor(_iTime);\n    }\n\n}\n\n//遊戲流程\nenum D_scene_state  { \n    st_none=100,    //無狀態\n    st_init,        //初始化 \n    st_tutorial,    //教程\n    st_into_animation, //进入动画\n    st_play_input, //玩家输入\n    st_timeup_animation, //時間到動畫\n    st_show_score, //顯示分數\n    st_end, //结束\n}\n\nclass Proc_D_scene{ \n\n    \n    private last_timestamp:number = 0;//主要FPS上一次時間\n    private cFSM:CFSM = new CFSM();\n\n    private md:any = null;\n    private mission:number = 0;//目前玩到的關卡\n    private right_mission:number = 0;//答對的關卡數\n    private error_mission:number = 0;//答錯的關卡數\n    private ComboCount:number = 0;//連續答對次數\n    private last_is_right:boolean = false;//上一個是否是答對\n\n    private play_last_time:number = 0;//剩餘玩的時間\n\n    private node_StartTime:Node = null;//開始時間的文字\n    private node_TimesUp:Node = null;//時間到的文字\n    private node_score_panle:Node = null;//結算\n    private colorButton_RLs:gameD_ColorButton[] = [];\n\n    private box_base_node:Node = null!;\n    private clone_node:Node = null!;\n    private cBoxTool:CBoxTool = null;\n\n    private strTutorialPath:string[] = [\n        \"Canvas/tutorial/遊戲說明_01\",\n        \"Canvas/tutorial/遊戲說明_02\",\n        \"Canvas/tutorial/遊戲說明_03\"\n    ];\n    private blPlay10TimesSound:boolean = false;\n\n\n    \n    public init(){\n\n        //初始化\n        this.cFSM = new CFSM();\n        this.add_FSM_state();\n\n        this.cFSM.set_Next_state(D_scene_state.st_init);\n        this.last_timestamp = Date.now();\n\n\n        this.md = getST().get_mission_data();\n        this.mission = 0;\n        this.right_mission = 0;\n        this.ComboCount = 0;\n        this.last_is_right = false;\n\n       \n        find(\"Canvas/返回\").once(Node.EventType.TOUCH_START, function(){\n            AudioManager.playSound(\"UI_click\");\n            common_getEventTarget().emit(EventEnum_Scene.Go_GameHome);\n        }, this);\n\n        find(\"Canvas/tutorial\").active = false;\n        this.node_StartTime = find(\"Canvas/start\");\n        this.node_StartTime.active = false;\n        this.node_TimesUp = find(\"Canvas/timesup\");\n        this.node_TimesUp.active = false;\n        this.node_score_panle = find(\"Canvas/score_panle\");\n        this.node_score_panle.active = false;\n\n        this.box_base_node = find(\"Canvas/box/base/diamond_box\");\n        this.clone_node = find(\"Canvas/box/clone\");\n\n        this.colorButton_RLs.push(find(\"Canvas/button_right\").getComponent(gameD_ColorButton));\n        this.colorButton_RLs.push(find(\"Canvas/button_left\").getComponent(gameD_ColorButton));\n\n        this.cBoxTool = new CBoxTool();\n        this.cBoxTool.init(this.box_base_node,this.clone_node);\n\n        \n        common_getEventTarget().on(EventEnum_Scene.GameD_event_BoxMoveEnd, this.gameD_event_BoxMoveEnd, this);\n    }\n    private add_FSM_state(){\n        this.cFSM.add_new_state(D_scene_state.st_init,\"st_init\",this.st_init_into,this.st_init_update,this);\n        this.cFSM.add_new_state(D_scene_state.st_tutorial,\"st_tutorial\",this.st_tutorial_into,this.st_tutorial_update,this);\n        this.cFSM.add_new_state(D_scene_state.st_into_animation,\"st_into_animation\",this.st_into_animation_into,this.st_into_animation_update,this);\n        this.cFSM.add_new_state(D_scene_state.st_play_input,\"st_play_input\",this.st_play_input_into,this.st_play_input_update,this);\n        this.cFSM.add_new_state(D_scene_state.st_timeup_animation,\"st_timeup_animation\",this.st_timeup_animation_into,this.st_timeup_animation_update,this);\n        this.cFSM.add_new_state(D_scene_state.st_show_score,\"st_show_score\",this.st_show_score_into,this.st_show_score_update,this);\n        this.cFSM.add_new_state(D_scene_state.st_end,\"st_end\",this.st_end_into,this.st_end_update,this);\n    }\n       \n\n    private gameD_event_BoxMoveEnd(iType:number,_BoxID:number){\n        if(this.cFSM.get_now_state().state != D_scene_state.st_play_input) return;\n        //log(iType,_BoxID);\n        if(iType == 0){\n            this.right_mission++;\n            AudioManager.playSound(\"answer02\");\n            if(this.last_is_right){\n                this.ComboCount++;\n            }\n            this.last_is_right = true;\n\n        }else if(iType == 1){\n            this.error_mission++;\n            AudioManager.playSound(\"answer01\");\n            this.last_is_right = false;\n        }\n        this.mission++;\n\n        if(iType == 2){\n            this.cBoxTool.delBox(_BoxID);\n        }\n    }\n\n\n    public st_init_into(){\n       \n        this.mission = 0;//目前玩到的關卡\n        this.right_mission = 0;//答對的關卡數\n        this.error_mission = 0;//答錯的關卡數\n        this.ComboCount = 0;\n        this.last_is_right = false;\n\n        this.play_last_time = 0;//剩餘玩的時間\n        this.node_score_panle.active = false;\n\n        this.cBoxTool.deleteAll();\n        this.cFSM.set_Next_state(D_scene_state.st_tutorial);\n        this.blPlay10TimesSound = false;\n    }\n\n    public st_init_update(){}\n    public st_tutorial_into(){\n        find(\"Canvas/tutorial\").active = true;\n        let btn_start = find(\"Canvas/tutorial/btn_start\");\n        let btn_next_page = find(\"Canvas/tutorial/btn_next_page\");\n        btn_start.once(Node.EventType.TOUCH_START,\n            function(){\n                this.cFSM.set_Next_state(D_scene_state.st_into_animation);\n                find(\"Canvas/tutorial\").active = false;\n                this.node_StartTime.getComponent(gtool_start_time).switchShow(true);\n                AudioManager.playSound(\"countdown01\");\n            }, this);\n\n        btn_start.active = true;\n        btn_next_page.active = true;\n\n        btn_next_page.off(Node.EventType.TOUCH_START);\n        btn_next_page.on(Node.EventType.TOUCH_START,\n            function(){\n                let _page:number = 0;\n                for(let i=0;i<this.strTutorialPath.length;i++){\n                    if(find(this.strTutorialPath[i]).active == true){\n                        _page = i;\n                        break;\n                    }\n                }\n                _page++;\n                if(_page >= this.strTutorialPath.length){\n                    _page = 0;\n                }\n                \n               log(\"page = \"+_page);\n                for(let i=0;i<this.strTutorialPath.length;i++){\n                    find(this.strTutorialPath[i]).active = false;\n                    if(i == _page){\n                        find(this.strTutorialPath[i]).active = true;\n                    }\n                }\n            }, this);\n\n        for(let i=0;i<this.strTutorialPath.length;i++){\n            find(this.strTutorialPath[i]).active = false;\n        }\n        find(this.strTutorialPath[0]).active = true;\n        \n    }\n    public st_tutorial_update(){}\n    public st_into_animation_into(){\n        AudioManager.stopMusic();\n    }\n    public st_into_animation_update(){\n        if(this.node_StartTime.getComponent(gtool_start_time).blTimesUP){\n            this.node_StartTime.active = false;\n            this.cFSM.set_Next_state(D_scene_state.st_play_input);\n            this.play_last_time = this.md.Time*1000;\n\n            AudioManager.playMusic(\"bgm02\");\n        }\n    }\n    public st_play_input_into(){\n        for(let i=0;i<this.colorButton_RLs.length;i++){\n            this.colorButton_RLs[i].touchSwitch(true);\n        }\n    }\n    public st_play_input_update(){\n        if(this.cBoxTool.createNewBox()){\n            this.mission++;\n        }\n    }\n    public st_timeup_animation_into(){\n        this.node_TimesUp.getComponent(gtool_start_time).switchShow(true);\n        AudioManager.stopMusic();\n    }\n    public st_timeup_animation_update(){\n        if(this.node_TimesUp.getComponent(gtool_start_time).blTimesUP){\n            this.cFSM.set_Next_state(D_scene_state.st_show_score);\n        }\n    }\n    public st_show_score_into(){\n        this.mission = this.right_mission+this.error_mission;\n        getST().setWin(this.mission,this.right_mission,this.ComboCount);\n        this.node_score_panle.active = true;\n        this.node_TimesUp.active = false;\n\n        this.node_score_panle.getChildByName(\"again\").once(Node.EventType.TOUCH_START,\n             function(){\n                AudioManager.playSound(\"UI_click\");\n                this.cFSM.set_Next_state(D_scene_state.st_init);\n             }, \n             this);\n        this.node_score_panle.getChildByName(\"exit\").once(Node.EventType.TOUCH_START,\n            function(){\n                AudioManager.playSound(\"UI_click\");\n                this.cFSM.set_Next_state(D_scene_state.st_end);\n            }, \n            this);\n        \n        this.node_score_panle.getChildByName(\"right_num\").getComponent(Label).string = this.right_mission.toString();\n        this.node_score_panle.getChildByName(\"err_num\").getComponent(Label).string = this.error_mission.toString();\n        this.node_score_panle.getChildByName(\"rate\").getComponent(Label).string = Math.floor(this.right_mission*100/this.mission).toString()+\"%\";\n\n        this.node_score_panle.getChildByName(\"time_num\").getComponent(Label).string = getST().time_num.toString()+'s';\n        this.node_score_panle.getChildByPath(\"score/right_score\").getComponent(RichText).string = \"<b><color=#7a4706>\"+getST().play_score.toString()+\"</color></b>\";\n        this.node_score_panle.getChildByPath(\"score/combo_score\").getComponent(RichText).string = \"<b><color=#7a4706>\"+getST().comble_score.toString()+\"</color></b>\";\n        this.node_score_panle.getChildByPath(\"score/total_score\").getComponent(RichText).string = \"<b><color=#7a4706>\"+getST().play_totle_score.toString()+\"</color></b>\";\n        let bastScore = getST().myRankData[getST().select_Game-1].score;\n        this.node_score_panle.getChildByPath(\"score/total_score-001\").getComponent(RichText).string = \"<b><color=f8e0b3>\"+bastScore.toString()+\"</color></b>\";\n        let strTitlePath:string[] = [ //0  認知  1\t數學  2\t記憶  3\t總排行  4\t注意力\n            \"txt_objext/title/成績結算_小標_打破障礙\",\n            \"txt_objext/title/成績結算_小標_點擊加法\",\n            \"txt_objext/title/成績結算_小標_安全路徑\",\n            \"\",\n            \"txt_objext/title/成績結算_小標_切換顏色\",\n        ]\n        for(let i=0;i<5;i++){\n            if(i == 3)\n                continue;\n            if(i == (getST().select_Game-1)){\n                this.node_score_panle.getChildByPath(strTitlePath[i]).active = true;\n            }\n            else{\n                this.node_score_panle.getChildByPath(strTitlePath[i]).active = false;\n            }\n\n        }\n        AudioManager.playSound(\"result01\");\n    }\n    public st_show_score_update(){\n        let step:number = Math.floor(this.cFSM.get_now_state().elapsed_time/33);\n        if(step <= 25){\n            let rate:number =  this.right_mission/this.mission;\n            let rateP:number = rate*(step/25);\n            rateP = (Math.round(rateP * 100) / 100)*-1;\n            find(\"Canvas/score_panle/成績結算_藍圈\").getComponent(Sprite).fillRange = rateP;\n        }\n    }\n    public st_end_into(){\n        common_getEventTarget().emit(EventEnum_Scene.Go_GameHome);\n    }\n    public st_end_update(){}\n\n\n        \n\n\n\n   \n    \n   \n    \n\n    public update(){\n        //經過時間\n        let elapsed_time = Date.now() - this.last_timestamp;\n        \n        if(elapsed_time < 33){\n            return;\n        }\n        this.last_timestamp = Date.now();\n        this.cFSM.update();\n\n        \n        if(this.cFSM.get_now_state().state == D_scene_state.st_play_input){\n            //----測試除錯用--------------------\n            if(getST().getIsInTestMode()){\n                elapsed_time = 0;   \n            }\n            //---------------------------------\n            this.play_last_time = this.play_last_time-elapsed_time;\n            if(this.play_last_time < 0){\n                this.play_last_time = 0;\n            }\n            let _sec = Math.floor(this.play_last_time/1000).toString().padStart(2, '0');\n            let _msec = Math.floor(this.play_last_time%1000/10).toString().padStart(2, '0');\n        \n            find(\"Canvas/time/TimeText_sec\").getComponent(RichText).string = \"<color=#ffffff>\"+_sec+\":\"+ \"</color>\";\n            find(\"Canvas/time/TimeText_msec\").getComponent(RichText).string = \"<color=#ffffff>\"+_msec+ \"</color>\";\n            if(this.play_last_time<=0){\n                for(let i=0;i<this.colorButton_RLs.length;i++){\n                    this.colorButton_RLs[i].touchSwitch(false);\n                }\n                this.cFSM.set_Next_state(D_scene_state.st_timeup_animation);\n            }\n            if(this.blPlay10TimesSound==false){\n                if(this.play_last_time <= 3000){\n                    this.blPlay10TimesSound = true;\n                    AudioManager.playSound(\"countdown01\");\n                }\n            }\n        }\n    }\n    \n}\n\n\n\nvar _proc_D_scene:Proc_D_scene = null;\n\n\nexport function getProc_D_scene() {\n\n    if(_proc_D_scene === null) {\n        _proc_D_scene = new Proc_D_scene();\n        console.log('new Proc_D_scene');\n    }\n    return _proc_D_scene;\n} \n\n","import { find, UITransform,Node,RichText, Sprite, Label} from 'cc';\nimport { common_getEventTarget,EventEnum_Scene,common_bind_touch_start,getST } from './Common';\nimport { AudioManager } from './AudioManager';\nimport { SpriteFrameManager } from './SpriteFrameManager';\nimport { ground_t } from './ground_t';\n\nclass Proc_GameHome{ \n    public game_scene_name:string[][]=[\n        [\"CognitionScene\"],\n        [\"MathScene\"],\n        [\"MemoryScene\"],\n        [\"Rankings\"],\n        [\"AttentionScene\"]\n    ];\n    public game_sprite_name:string[][]=[\n        [\"gh_mis_1_1\"],\n        [\"gh_mis_2_1\"],\n        [\"gh_mis_3_1\"],\n        [\"gh_mis_4_1\"],\n        [\"gh_mis_5_1\"]\n    ];\n    public game_book_sprite_name:string[][]=[\n        [\"gh_mis_book_1\"],\n        [\"gh_mis_book_2\"],\n        [\"gh_mis_book_3\"],\n        [\"gh_mis_book_4\"],\n        [\"gh_mis_book_5\"]\n    ];\n\n    private gameSprite:Sprite = null;\n    private gameBookSprite:Sprite = null;\n\n    //回登入頁按鈕\n    private btn_goLogin_name:string[] = [\"Canvas/leave_btn\"];\n\n\n    //到Info按鈕\n    private btn_goInfo_name:string = \"Canvas/info/button\";\n\n   \n    public gh_group:number = 1;//1-5\n    public gh_subpage:number=1;//子選項\n   \n    \n    public init():void{\n        common_getEventTarget().on(EventEnum_Scene.Ground_Event_UpdateGroup, this.ground_event_UpdateGroup,this);\n\n        //綁定輸入事件\n         for(let i=0;i<this.btn_goLogin_name.length;i++){\n             common_bind_touch_start(this.btn_goLogin_name[i],this.gh_show_exit,this);\n         }\n        common_bind_touch_start(\"Canvas/Exit_game/yes\",this.goLogin_Y,this);\n        common_bind_touch_start(\"Canvas/Exit_game/no\",this.goLogin_N,this);\n        find(\"Canvas/Exit_game\").active = false;\n\n\n        common_bind_touch_start(this.btn_goInfo_name,this.goInfo,this);\n\n        this.gameSprite = find(\"Canvas/level_book/gameSprite\").getComponent(Sprite);\n        this.gameSprite.spriteFrame = SpriteFrameManager.getSpriteFrame(this.game_sprite_name[this.gh_group-1][this.gh_subpage-1]);\n\n        this.gameBookSprite = find(\"Canvas/level_book/BG_book/gameSprite_book\").getComponent(Sprite);\n        this.gameBookSprite.spriteFrame = SpriteFrameManager.getSpriteFrame(this.game_book_sprite_name[this.gh_group-1][this.gh_subpage-1]);\n\n        common_bind_touch_start(\"Canvas/level_book/gameSprite/btn_event_Mask\",this.goGame,this);\n\n        if(getST().get_bl_open_test_debug()){\n            let debug_btn:Node = find(\"Canvas/標題/debug_btn\");\n            debug_btn.active = true;\n\n            debug_btn.on(Node.EventType.TOUCH_START, function(){\n                if(getST().switchTestMode()){\n                    find(\"Canvas/標題/debug_btn/Label_sw\").getComponent(Label).string = \"Open\";\n                }else{\n                    find(\"Canvas/標題/debug_btn/Label_sw\").getComponent(Label).string = \"Close\";\n                }      \n            }, this);\n\n            if(getST().getIsInTestMode()){\n                find(\"Canvas/標題/debug_btn/Label_sw\").getComponent(Label).string = \"Open\";\n            }\n            else{\n                find(\"Canvas/標題/debug_btn/Label_sw\").getComponent(Label).string = \"Close\";\n            }\n        }\n        //排行榜按鈕\n        find(\"Canvas/Rank/button\").on(Node.EventType.TOUCH_START, function(){\n            AudioManager.playSound(\"UI_click\");\n            this.gh_subpage = 1;\n            this.gh_group = 4;\n            getST().select_Game=4;\n            this.goGameUnlock();\n        }, this);\n\n        AudioManager.playMusic(\"bgm01\");\n    }\n\n    private goInfo(){\n        AudioManager.playSound(\"UI_click\");\n        common_getEventTarget().emit(EventEnum_Scene.Go_Info);\n    }\n\n    public gh_show_exit(){\n      \n        let node:Node = find(\"Canvas/Exit_game\");\n        node.active = true;\n        find(\"Canvas/ground/btn_event_Mask/ground\").getComponent(ground_t).disableTouch();\n    }\n\n    private ground_event_UpdateGroup(_pos:number){\n        console.log(\"ground_event_GoGame:\"+_pos);\n\n       \n        this.gh_group = _pos;\n        //暫時\n        getST().select_Game=this.gh_group;\n\n        this.gh_subpage = 1;\n        console.log(\"gh_group:\"+this.gh_group);\n        \n        this.gameSprite.spriteFrame = SpriteFrameManager.getSpriteFrame(this.game_sprite_name[this.gh_group-1][this.gh_subpage-1]);\n\n        this.gameBookSprite.spriteFrame = SpriteFrameManager.getSpriteFrame(this.game_book_sprite_name[this.gh_group-1][this.gh_subpage-1]);\n\n        \n    }\n\n    private goGame(){\n        AudioManager.playSound(\"UI_click\");\n        if(getST().select_Game==4){\n            return;\n        }\n\n        common_getEventTarget().emit(EventEnum_Scene.Go_Game);\n    }\n\n    private goGameUnlock(){\n        AudioManager.playSound(\"UI_click\");\n        \n        common_getEventTarget().emit(EventEnum_Scene.Go_Game);\n    }\n\n    private goLogin_Y(){\n\n        AudioManager.playSound(\"UI_click\");\n        window.location.href = \"../index.html\";\n    }\n\n    public goLogin_N(){\n        AudioManager.playSound(\"UI_click\");\n        let node:Node = find(\"Canvas/Exit_game\");\n        node.active = false;\n        find(\"Canvas/ground/btn_event_Mask/ground\").getComponent(ground_t).enableTouch();\n    }\n    \n\n    public getGameSceneName():string{\n        \n        return this.game_scene_name[this.gh_group-1][this.gh_subpage-1];\n    }\n    \n}\n\n\n\nvar _proc_gameHome:Proc_GameHome = null;\n\n\nexport function getProc_GameHome() {\n\n    if(_proc_gameHome === null) {\n        _proc_gameHome = new Proc_GameHome();\n        console.log('new Proc_GameHome');\n    }\n    return _proc_gameHome;\n} \n\n","import { find, UITransform,Node,RichText} from 'cc';\nimport { common_getEventTarget,EventEnum_Scene,common_bind_touch_start } from './Common';\nimport { AudioManager } from './AudioManager';\n\nclass Proc_Info{ \n   \n\n    //回主頁按鈕\n    private btn_goHome_name:string[] = [\"Canvas/返回\"];\n\n  \n    public init():void{\n\n        //綁定輸入事件\n        for(let i=0;i<this.btn_goHome_name.length;i++){\n            common_bind_touch_start(this.btn_goHome_name[i],this.goHome,this);\n        }\n\n        //N1\n        common_bind_touch_start(\"Canvas/N_Button/button\",function(){\n            window.location.href = \"http://axis.chanliu.org/\";\n        }\n        ,this);\n        //N2\n        common_bind_touch_start(\"Canvas/N_Button/button-001\",function(){\n            window.location.href = \"http://flames.chanliu.org/\";\n        }\n        ,this);\n        //N3\n        common_bind_touch_start(\"Canvas/N_Button/button-002\",function(){\n            window.location.href = \"http://cachecache.chanliu.org/\";\n        }\n        ,this);\n    }\n\n\n    private goHome(){\n        AudioManager.playSound(\"UI_click\");\n        common_getEventTarget().emit(EventEnum_Scene.Go_GameHome);\n    }\n\n}\n\n\n\nvar _proc_info:Proc_Info = null;\n\n\nexport function getProc_Info() {\n\n    if(_proc_info === null) {\n        _proc_info = new Proc_Info();\n        console.log('new Proc_GameHome');\n    }\n    return _proc_info;\n} \n\n","import { find, UITransform,Node,RichText,AudioClip,resources} from 'cc';\nimport { common_getEventTarget,EventEnum_Scene,common_bind_touch_start,getST } from './Common';\nimport { AudioManager } from './AudioManager';\nimport { SpriteFrameManager } from './SpriteFrameManager';\n\nclass Proc_Login{ \n\n    public isRunning:boolean = false;\n\n    private isLoading:boolean = false;\n    private wait_loading_time:number = 0;\n    \n\n    public init():void{\n     \n        \n\n        this.isLoading = true;\n        this.wait_loading_time = Date.now()+1000;\n        this.isRunning = true;\n\n        getST().init();\n\n        find(\"Canvas/Loading\").active = true;\n        find(\"Canvas/story\").active = false;\n\n        common_bind_touch_start(\"Canvas/story/開始訓練_一般\",this.go_GameHome,this);\n        AudioManager.playMusic(\"bgm01\");\n\n    }\n    private go_GameHome():void{\n        AudioManager.playSound(\"UI_click\");\n        AudioManager.playMusic(\"bgm01\");\n        common_getEventTarget().emit(EventEnum_Scene.Go_GameHome);\n    }\n\n    public update():void{\n        if(this.isLoading && (Date.now() > this.wait_loading_time)){\n            if(getST().isLoadOk == false){\n                 return;\n             }\n            if(AudioManager.isLoadOk() == false){\n                return;\n            }\n            if(SpriteFrameManager.isLoadOk() == false){\n                return;\n            }\n            this.isLoading = false;\n            this.isRunning = false;\n\n            find(\"Canvas/Loading\").active = false;\n            find(\"Canvas/story\").active = true;\n           \n        }\n\n    }\n    \n}\n\n\n\nvar _proc_login:Proc_Login = null;\n\n\nexport function getProc_Login() {\n\n    if(_proc_login === null) {\n        _proc_login = new Proc_Login();\n        console.log('new Proc_Login');\n    }\n    return _proc_login;\n} \n\n","import { find, instantiate,Node,RichText, Sprite, Color,Label, EventTouch, log} from 'cc';\nimport { common_getEventTarget,EventEnum_Scene,common_bind_touch_start,getST,RankData } from './Common';\nimport { AudioManager } from './AudioManager';\nimport { SpriteFrameManager } from './SpriteFrameManager';\n\n\n\n\n\n//遊戲流程\nenum R_scene_state  { \n    st_none=100,    //無狀態\n    st_init,        //初始化 \n    st_end, //结束\n}\n\nclass Proc_R_scene{ \n    \n    private state:number = R_scene_state.st_none;\n\n   \n\n    //輸入數字的node路徑\n    private page_name:string[] = [\n        \"page_01\",\"page_02\",\"page_03\",\"page_04\"\n    ];\n\n    private strButtonPath:string[] = [\n        \"Canvas/BG/view/跳出選單_切換顏色_一般\",\n        \"Canvas/BG/view/跳出選單_安全路徑_一般\",\n        \"Canvas/BG/view/跳出選單_點擊加法_一般\",\n        \"Canvas/BG/項目/總排行\",\n        \"Canvas/BG/view/跳出選單_打破障礙_一般\"\n    ] \n\n    private strButtonName:string[] = [\n        \"跳出選單_切換顏色_一般\",\n        \"跳出選單_安全路徑_一般\",\n        \"跳出選單_點擊加法_一般\",\n        \"總排行\",\n        \"跳出選單_打破障礙_一般\"\n    ] \n\n    //現在的頁數\n    private now_page:number = 1;\n\n\n    \n    \n    public init(){\n        \n        this.now_page = 1;////1 認知  2 數學  3\t記憶  4\t總排行  5 注意力\n        \n        common_bind_touch_start(\"Canvas/BG/總排行_背景/外框/返回\",this.go_GameHome,this); \n        for(let i=0;i<this.strButtonPath.length;i++){\n            common_bind_touch_start(this.strButtonPath[i],this.onSelectGame,this); \n        }\n        common_bind_touch_start(\"Canvas/BG/view/返回\",this.onCloseSelectGame,this); \n        common_bind_touch_start(\"Canvas/BG/項目/下拉選單\",this.onOpenSelectGame,this); \n\n     \n        this.update_page();\n      \n    }\n\n    private onOpenSelectGame(){\n        AudioManager.playSound(\"UI_click\");\n        let SelectGame:Node = find(\"Canvas/BG/view\");\n        SelectGame.active = true;\n    }\n    private onCloseSelectGame(){\n        AudioManager.playSound(\"UI_click\");\n        let SelectGame:Node = find(\"Canvas/BG/view\");\n        SelectGame.active = false;\n    }\n\n    private onSelectGame(event:EventTouch){\n        \n        let SelectGame:Node = find(\"Canvas/BG/view\");\n        SelectGame.active = false;\n\n        AudioManager.playSound(\"UI_click\");\n\n        let index:number = this.strButtonName.indexOf(event.target.name);\n        if(index != -1){\n            this.now_page = index+1;\n            this.update_page();\n        }\n        //log(\"onSelectGame \",event.target.name,\" now_page \",this.now_page);\n    }\n\n\n\n    private update_page(){\n        let clone:Node = find(\"Canvas/BG/ScrollView/view/content/clone\");\n        let baseItem:Node = find(\"Canvas/BG/ScrollView/view/content/base/item\");\n\n        clone.destroyAllChildren();\n        clone.removeAllChildren();\n\n        find(\"Canvas/BG/playerinfo/playerName\").getComponent(RichText).string = \"<b><color=#492c1c>\"+getST().myRankData[this.now_page-1].name+\"</color></b>\";\n        find(\"Canvas/BG/playerinfo/sc01\").getComponent(RichText).string = \"<b><color=#492c1c>\"+getST().myRankData[this.now_page-1].rank+\"</color></b>\";\n        find(\"Canvas/BG/playerinfo/sc02\").getComponent(RichText).string = \"<b><color=#492c1c>\"+getST().myRankData[this.now_page-1].score+\"</color></b>\";\n        \n        let pageRankData:RankData[] = getST().rank_data[this.now_page-1];\n        for(let i=0;i<pageRankData.length;i++){\n            let item:Node = instantiate(baseItem);\n            clone.addChild(item);\n\n            let num:Label = item.getChildByName(\"num\").getComponent(Label);\n            let name:Label = item.getChildByName(\"name\").getComponent(Label);\n            let score:Label = item.getChildByName(\"score\").getComponent(Label);\n            num.string = pageRankData[i].rank.toString();\n            name.string = pageRankData[i].name;\n            score.string = pageRankData[i].score.toString();\n            item.active = true;\n            item.setPosition(0,(-65)*i);\n        }\n\n        let str_page_tip_path:string[] = [\n            \"Canvas/BG/項目/項目名稱/超能學習_排行_切換顏色_一般\",\n            \"Canvas/BG/項目/項目名稱/超能學習_排行_安全路徑_一般\",\n            \"Canvas/BG/項目/項目名稱/超能學習_排行_點擊加法_一般\",\n            \"\",\n            \"Canvas/BG/項目/項目名稱/超能學習_排行_打破障礙_一般\",\n        ];\n        \n        let ipos:number = this.now_page-1;\n        if(ipos == 3) ipos = 0;\n        for(let i=0;i<str_page_tip_path.length;i++){\n            let page_tip:Node = find(str_page_tip_path[i]);\n            if(i == ipos){\n                page_tip.active = true;\n            }\n            else{\n                page_tip.active = false;\n            }\n        }\n\n        let str_page_title_path:string[] = [\n            \"Canvas/BG/總排行_背景/排行_文字/排行_文字_切換顏色\",\n            \"Canvas/BG/總排行_背景/排行_文字/排行_文字_安全路徑\",\n            \"Canvas/BG/總排行_背景/排行_文字/排行_文字_點擊加法\",\n            \"Canvas/BG/總排行_背景/排行_文字/排行_文字_總排行\",\n            \"Canvas/BG/總排行_背景/排行_文字/排行_文字_打破障礙\",\n        ];\n        ipos = this.now_page-1;\n        for(let i=0;i<str_page_title_path.length;i++){\n            let page_title:Node = find(str_page_title_path[i]);\n            if(i == ipos){\n                page_title.active = true;\n            }\n            else{\n                page_title.active = false;\n            }\n        }\n\n    }\n\n\n\n    private go_GameHome():void{\n        AudioManager.playSound(\"UI_click\");\n        common_getEventTarget().emit(EventEnum_Scene.Go_GameHome);\n        \n    }\n\n    public update(){\n        \n    }\n\n\n\n}\n\n\n\nvar _proc_R_scene:Proc_R_scene = null;\n\n\nexport function getProc_R_scene() {\n\n    if(_proc_R_scene === null) {\n        _proc_R_scene = new Proc_R_scene();\n        console.log('new Proc_R_scene');\n    }\n    return _proc_R_scene;\n} \n\n","import { assert, assetManager, log, SpriteFrame,resources } from \"cc\";\n\nexport class SpriteFrameManager {\n\n    private static _cachedSpriteFrameMap: Record<string, SpriteFrame> = {};\n    private static _spriteName: string[]= [];\n\n    // init AudioManager in GameRoot component.\n    public static init () {\n        log('Init SpriteFrameManager !');\n    }\n\n    //是否載入完成\n    public static isLoadOk ():boolean {\n        for (let key in SpriteFrameManager._cachedSpriteFrameMap) {\n            if(SpriteFrameManager._cachedSpriteFrameMap[key] == null) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    public static preloadSpriteFrame (name: string) {\n        const path = `img/${name}/spriteFrame`;\n        if(path in SpriteFrameManager._spriteName) {\n            return;\n        }\n        SpriteFrameManager._spriteName.push(path);\n        SpriteFrameManager._cachedSpriteFrameMap[path] = null;\n        resources.load(path, SpriteFrame, (err, sprite_frame) => {\n            if (err) {\n                console.warn(err);\n                return;\n            }\n            \n            SpriteFrameManager._cachedSpriteFrameMap[path] = sprite_frame;\n        });\n    }\n\n    public static getSpriteFrame(name: string): SpriteFrame {\n        \n        const path = `img/${name}/spriteFrame`;\n        return SpriteFrameManager._cachedSpriteFrameMap[path];\n        \n    }\n}"]}