{"version":3,"sources":["../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/AudioManager.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/CLastPlayTime.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/Common.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/main.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/ns_SwitchSprite.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/Proc_A_scene.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/Proc_B_scene.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/Proc_C_scene.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/Proc_GameHome.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/Proc_Info.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/Proc_Login.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/Proc_R_scene.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/Proc_Select_scene.ts","../../file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/file:/Users/louislai/Downloads/work/OtherProject/objob/ob_202208/Cocos_CreatorGame/assets/Script/SpriteFrameManager.ts"],"names":["AudioManager","init","audioSource","log","_audioSource","isLoadOk","key","_cachedAudioClipMap","playMusic","name","path","cachedAudioClip","stop","clip","play","console","stopMusic","preloadSound","_soundName","push","assetManager","resources","load","AudioClip","err","warn","playSound","assert","playOneShot","richText_time","last_play_time","blEnd","blPlay10TimesSound","_proto","start","_last_play_time","node_labe_time","find","getComponent","RichText","ui_update","getLastPlayTime","this","time_s","Math","floor","time_m","time_ms","time_str_s","toString","padStart","time_str_m","time_str_ms","string","update","dt","nodeName","callback","target","_node","off","Node","EventType","TOUCH_START","on","_eventTarget","EventTarget","_store_data","store_data","EventEnum_Scene","RankData","_rank","_name","_score","rank","score","Update_Scean","play_totle_score","play_score","play_last_time_m","play_last_time_s","play_last_time_ms","play_Game_Max_Mission_level","GameData_Max_Mission_level","mission_data_A","mission_data_B","mission_data_C","select_Game","select_Mission","myRankData","rank_data","bl_open_test_debug","bl_in_test_mode","load_mission_data","window","location","hostname","i","b64DecodeUnicode","str","decodeURIComponent","Array","prototype","map","call","atob","c","charCodeAt","slice","join","TextAsset","file","str_b64","text","c0","c1","length","split","arr_b64js","b64js","d64","_this","jobj","JSON","parse","get_mission_data","setWin","play_last_time","sec","Score","LevelBase","SecondPlus","setLose","get_bl_open_test_debug","getIsInTestMode","switchTestMode","ccclass","_decorator","property","type","String","AudioSource","args","_initializerDefineProperty","_inheritsLoose","onLoad","getST","node","game","addPersistRootNode","common_getEventTarget","Go_GameHome","go_GameHome","Go_Login","go_Login","Go_SelectScene","go_SelectScene","Go_Game_A","go_Game_A","Go_Game_B","go_Game_B","Go_Game_C","go_Game_C","Go_Rankings","go_Rankings","Go_Info","go_Info","str_sound_Flute","str_sound_Guitar","str_sound_Piano","str_sound_SoundEffect","str_music","str_spriteFrame","SpriteFrameManager","preloadSpriteFrame","playname","getProc_Login","deltaTime","isRunning","getProc_A_scene","getProc_B_scene","getProc_C_scene","director","loadScene","getProc_GameHome","getProc_Select_scene","getGameSceneName","getProc_R_scene","getProc_Info","Component","configurable","enumerable","writable","initializer","SpriteFrame","_blLock","_blSelected","switchSelect","sw","_sp","Sprite","spriteFrame","selected_Sprite","normal_Sprite","switchLock","lock_Sprite","onMouseEnter","moveOver_Sprite","onMouseLeave","MOUSE_ENTER","MOUSE_LEAVE","A_scene_state","_proc_A_scene","Proc_A_scene","state","st_none","state_next","question_number","anser_number","last_timestamp","last_wait_timestamp","node_result_number","node_result_light","node_start_last_time","input_btn_Number","input_btn_hide","input_count","state_win_lose_show","cLastPlayTime","blPlayCount01Sound","node_result_number_path","node_result_light_path","node_input_number_path","node_input_number","set_Next_state","st_init","Date","now","common_bind_touch_start","go_select","active","Label","go_again","CLastPlayTime","emit","st_lose","st_init_in","mis_data","LevelSet","NumberCount","number","random","NumberRepeat","indexOf","richText","sprite","enabled","getSpriteFrame","splice","Time","GameLevel","input_event","PositionShift","tmp_nb","unshift","st_into_animation_in","st_into_animation_update","last_time","iLastTime","node_tmp","st_start","st_play_input_in","RightRetain","st_play_input_update","blComplete","st_show_result","st_show_result_in","anumber","blHint","j","HintPosition","blFind","bl_right","st_show_result_update","st_win","st_play_input","st_win_in","sc_01","sc_02","sc_03","st_win_update","showscore","pow","st_timeup_animation_in","st_timeup_animation_update","st_lose_in","st_lose_update","event","real_number","ShowNumber","_state_change","real_change","st_into_animation","st_timeup_animation","_state_update","elapsed_time","B_scene_state","_proc_B_scene","Proc_B_scene","play_count","btn_play_question_sound","btn_to_play_input","st_play_question_sound","st_start_in","switchNS","switchNS_lock","st_play_question_sound_in","st_play_question_sound_update","play_sound","_number","timbre","ns_SwitchSprite","C_scene_state","light_state","_proc_C_scene","Proc_C_scene","cQuestion","lt_none","input_light","q_step","wait_user_anser_time","wait_show_time","wait_next_time","max_question_number","blLose","node_input_name","res_tip","isArray","QuestionType","next_question","cnt","QuestionInterval","pos","reset_input_light","lt_show","q_num","light_pos","AnswerPositionShift","update_tip","player_input","blRet","blplay","lt_waitnext","tip_1","tip_2","imax","pos2","set_input_light","_node_input_name","get_blloae","get_ans_tip","lt_hide","cquestion","input_nodes","st_play_in","st_play_update","ans_tip","st_play","_proc_gameHome","Proc_GameHome","game_scene_name","game_scene_lable","btn_goLogin_name","btn_goGame_name","btn_goInfo_name","btn_Left_name","btn_Right_name","gh_page","updatePage","gh_show_exit","goLogin_Y","goLogin_N","goGame","gh_page_left","gh_page_right","goInfo","debug_btn","href","gh_MaxPage","contentNode","UITransform","setAnchorPoint","_proc_info","Proc_Info","btn_goHome_name","goHome","_proc_login","Proc_Login","btn_goGamehome_name","isLoading","wait_loading_time","_node2","R_scene_state","_proc_R_scene","Proc_R_scene","page_path_name","page_name","my_info_type_path","my_info_type_Node","baseItem","cloneBase","now_page","pageDown","update_page","_nodeNS","destroyAllChildren","removeAllChildren","rankData","_item","instantiate","parent","setPosition","getChildByName","addChild","_proc_Select_scene","Proc_Select_scene","btn_mis_path","node_input_mis","node_mission_info","go_game_home","go_game","node_mark_btn","node_mis_btn","input_mission_event","node_mission_info_path","node_label_tmp","update_SelectF_and_info","mission","node_btn","node_sf","btn_pos","getPosition","x","y","Information","Difficulty","Description","_cachedSpriteFrameMap","_spriteName","sprite_frame"],"mappings":"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","file":"all.js","sourcesContent":["import { assert, assetManager, AudioClip, AudioSource, log } from \"cc\";\n\nexport class AudioManager {\n    private static _audioSource?: AudioSource;\n    private static _cachedAudioClipMap: Record<string, AudioClip> = {};\n    private static _soundName: string[]= [];\n  \n  \n\n    // init AudioManager in GameRoot component.\n    public static init (audioSource: AudioSource) {\n        log('Init AudioManager !');\n        AudioManager._audioSource = audioSource;\n    }\n\n    //是否載入完成\n    public static isLoadOk ():boolean {\n        for (let key in AudioManager._cachedAudioClipMap) {\n            if(AudioManager._cachedAudioClipMap[key] == null) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    public static playMusic (name: string) {\n        const path = `mp3/${name}`;\n        let cachedAudioClip = AudioManager._cachedAudioClipMap[path];\n        if (cachedAudioClip) {\n            const audioSource = AudioManager._audioSource!;\n            audioSource.stop();\n            audioSource.clip = cachedAudioClip;\n            audioSource.play();\n\n            console.log(`AudioManager play music ${name}`);\n        }\n    }\n\n    public static stopMusic () {\n        const audioSource = AudioManager._audioSource!;\n        audioSource.stop();\n    }\n\n    \n\n    public static preloadSound (name: string) {\n        const path = `mp3/${name}`;\n        if(path in AudioManager._soundName) {\n            return;\n        }\n        AudioManager._soundName.push(path);\n        AudioManager._cachedAudioClipMap[path] = null;\n        assetManager.resources?.load(path, AudioClip, (err, clip) => {\n            if (err) {\n                console.warn(err);\n                return;\n            }\n            \n            AudioManager._cachedAudioClipMap[path] = clip;\n        });\n    }\n\n    public static playSound(name: string) {\n        \n        const audioSource = AudioManager._audioSource!;\n        assert(audioSource, 'AudioManager not inited!');\n        \n        console.log(`AudioManager play sound ${name}`);\n        \n        const path = `mp3/${name}`;\n        let cachedAudioClip = AudioManager._cachedAudioClipMap[path];\n        if (cachedAudioClip) {\n            audioSource.playOneShot(cachedAudioClip, 1);\n        } else {\n            if(path in AudioManager._soundName) {\n                return;\n            }\n            AudioManager._soundName.push(path);\n            AudioManager._cachedAudioClipMap[path] = null;\n            assetManager.resources?.load(path, AudioClip, (err, clip) => {\n                if (err) {\n                    console.warn(err);\n                    return;\n                }\n                \n                AudioManager._cachedAudioClipMap[path] = clip;\n                audioSource.playOneShot(clip, 1);\n            });\n        }\n    }\n}","import { EventTarget,Node,find,resources, TextAsset, RichText } from 'cc';\nimport { AudioManager } from './AudioManager';\n\nexport class CLastPlayTime {\n\n  \n    \n    private richText_time:RichText = null;\n\n    private last_play_time:number = 0;\n    private blEnd:boolean = true;\n    private blPlay10TimesSound:boolean = false;\n\n\n    constructor() {\n        this.blEnd = true;\n        this.last_play_time = 0;\n        this.blPlay10TimesSound = false;\n    }\n\n\n    public start(_last_play_time:number) {\n        let node_labe_time:Node = find(\"Canvas/TimeText\");\n        this.richText_time = node_labe_time.getComponent(RichText);\n\n        this.last_play_time =  _last_play_time;\n        this.blEnd = false;\n        this.blPlay10TimesSound = false;\n        this.ui_update();\n    }\n\n    public getLastPlayTime():number{\n        return this.last_play_time;\n    }\n\n   \n\n    private ui_update() {\n        if(this.richText_time == null) return;\n\n        let time_s:number = Math.floor((this.last_play_time/1000)%60);\n        let time_m:number = Math.floor((this.last_play_time/1000)/60); \n        let time_ms:number = Math.floor((this.last_play_time%1000)/10); \n        let time_str_s:string = time_s.toString().padStart(2, '0');\n        let time_str_m:string = time_m.toString().padStart(2, '0');\n        let time_str_ms:string = time_ms.toString().padStart(2, '0');\n   \n        this.richText_time.string = \"<color=#FFFFFF>\"+time_str_m+\":\"+time_str_s+\":\"+time_str_ms+\"</color>\";\n\n    }\n\n    //更新 return true:结束\n    //dt:时间间隔 毫秒\n    public update(dt: number):boolean {\n        if(this.blEnd){\n            return false;\n        }\n        this.last_play_time -= dt;\n        if(this.last_play_time <= 0){\n            this.last_play_time = 0;\n        }\n\n        this.ui_update();\n\n        if(this.last_play_time <= 0){\n            this.blEnd = true;\n            return true;\n        }\n        \n        if(this.blPlay10TimesSound==false){\n            if(this.last_play_time <= 3000){\n                this.blPlay10TimesSound = true;\n                AudioManager.playSound(\"8_9_countdown_and_start\");\n                // AudioManager.playSound(\"10_timeout\");\n            }\n        }\n        return false;\n    \n    }\n}\n\n\n\n","import { EventTarget,Node,find,resources, TextAsset, log } from 'cc';\n\n\nvar _eventTarget:EventTarget = null;\n\nexport enum EventEnum_Scene {\n    Go_Login=       1000,//\"go_Login\"\n    Go_GameHome=    1001,//\"go_GameHome\"\n    Go_SelectScene= 1002,//\"go_SelectScene\"\n    Go_Game_A=      1003,//\"go_Game_A\"\n    Go_Game_B=      1004,//\"go_Game_B\"\n    Go_Game_C=      1005,//\"go_Game_C\"\n    Go_Rankings=    1006,//\"go_Rankings\"\n    Go_Info=        1007,//\"go_Info\"\n    }\n\n//綁定按鈕事件\nexport function common_bind_touch_start(nodeName:string,callback?: Function,target?:any):void{\n    let _node:Node = find(nodeName);\n    if(_node){\n        _node.off(Node.EventType.TOUCH_START, callback,target);\n        _node.on(Node.EventType.TOUCH_START, callback,target);\n    }\n    else{\n        console.log(\"common_bind_touch_start: node not found -> \"+nodeName);\n    }\n}\n\n//上層自定義事件發送\nexport function common_getEventTarget() {\n    if(_eventTarget === null) {\n        _eventTarget = new EventTarget();\n        console.log('new eventTarget');\n    }\n    return _eventTarget;\n  } \n\n  export class RankData{\n    public rank:number = 0;\n    public name:string = \"\";\n    public score:number = 0;\n    \n    public constructor(_rank:number,_name:string,_score:number){\n        this.rank = _rank;\n        this.name = _name;\n        this.score = _score;\n    }\n  }\n\nclass store_data{\n    //load ok\n    public isLoadOk:boolean = false; \n    \n    //開始進行遊戲循環\n    public Update_Scean:number = 0;   \n    \n    //玩家總積分\n    public play_totle_score:number = 0;\n\n    //玩家這一場獲得積分\n    public play_score:number = 0;\n\n    //玩家剩餘時間_分\n    public play_last_time_m:number = 0;\n    //玩家剩餘時間_秒\n    public play_last_time_s:number = 0;\n    //玩家剩餘時間_毫秒\n    public play_last_time_ms:number = 0;\n    \n    //玩家個關卡過關資料\n    public play_Game_Max_Mission_level:number[] = [1,1,1];//1,1,1\n    public GameData_Max_Mission_level:number[] = [10,10,10];\n    \n    public mission_data_A:any[] = [];\n    public mission_data_B:any[] = [];\n    public mission_data_C:any[] = [];\n    \n    public select_Game:number = 1;//1=\"A\" 2=\"B\" 3=\"C\"\n    public select_Mission:number = 1;\n\n    public myRankData:RankData[] = [];\n    public rank_data:RankData[][] = [];\n\n    private bl_open_test_debug:boolean = false;//是否開啟測試模式\n    private bl_in_test_mode:boolean = false;//是否正在進行測試\n\n\n    public init(){\n        this.Update_Scean = 0;\n        this.play_totle_score = 0;//測試\n        this.load_mission_data();\n       \n        if(window.location.hostname == \"ccg2022.mosasaurs-studio.com\"){\n            this.bl_open_test_debug = true;\n        }\n        //test data\n        this.myRankData = [\n            new RankData(50,\"VIP06\",1000),\n            new RankData(50,\"VIP06\",1020),\n            new RankData(41,\"VIP06\",1030),\n            new RankData(47,\"VIP06\",0),\n        ];\n        this.myRankData[3].score = 0;\n        for(let i=0;i<3;i++){   \n            this.myRankData[3].score += this.myRankData[i].score;\n        }\n\n\n        //測試排行資料\n        this.rank_data = [\n            [\n                new RankData(1,\"VIP33\",889630),\n                new RankData(2,\"VIP15\",852145),\n                new RankData(3,\"VIP03\",695830),\n                new RankData(4,\"VIP19\",569900),\n                new RankData(5,\"VIP07\",407020),\n                new RankData(6,\"VIP26\",386430),\n                new RankData(7,\"VIP11\",296655),\n                new RankData(8,\"VIP01\",274110),\n                new RankData(9,\"VIP28\",196890),\n            ],\n            [\n                new RankData(1,\"VIP19\",548505),\n                new RankData(2,\"VIP15\",465520),\n                new RankData(3,\"VIP33\",422700),\n                new RankData(4,\"VIP07\",388710),\n                new RankData(5,\"VIP03\",250040),\n                new RankData(6,\"VIP01\",236100),\n                new RankData(7,\"VIP08\",174105),\n                new RankData(8,\"VIP11\",166560),\n                new RankData(9,\"VIP05\",122280),\n            ],\n            [\n                new RankData(1,\"VIP33\",687790),\n                new RankData(2,\"VIP15\",674125),\n                new RankData(3,\"VIP04\",635895),\n                new RankData(4,\"VIP19\",634770),\n                new RankData(5,\"VIP18\",596390),\n                new RankData(6,\"VIP22\",558845),\n                new RankData(7,\"VIP13\",508795),\n                new RankData(8,\"VIP27\",496220),\n                new RankData(9,\"VIP25\",457500),\n            ],\n            [\n                new RankData(1,\"VIP33\",2015425),\n                new RankData(2,\"VIP15\",1986540),\n                new RankData(3,\"VIP19\",1647800),\n                new RankData(4,\"VIP26\",1403365),\n                new RankData(5,\"VIP03\",1386545),\n                new RankData(6,\"VIP07\",1279900),\n                new RankData(7,\"VIP01\",1126945),\n                new RankData(8,\"VIP28\",1086630),\n                new RankData(9,\"VIP11\",1044500),\n            ]\n        ];\n    }\n\n    private b64DecodeUnicode(str) {\n        return decodeURIComponent(Array.prototype.map.call(atob(str), function(c) {\n            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)\n        }).join(''))\n    }\n\n    public load_mission_data(){\n        resources.load('jms',TextAsset, (err, file) => {\n            if (err) {\n                console.warn(err);\n                return;\n            }\n            let str_b64 = file.text;\n            let c0:string[] = ['!','-','>','<','~'];\n            let c1:string[] = ['=','0','A','N','C'];\n            for (let i = 0; i < c0.length; i++) {\n                str_b64 = str_b64.split(c0[i]).join(c1[i]);\n            }\n            //console.log(str_b64);\n            let arr_b64js = str_b64.split('|');\n     \n            \n            for (let i = 0; i < arr_b64js.length-1; i++) {\n                let b64js = arr_b64js[i];\n                let d64 = this.b64DecodeUnicode(b64js);\n           \n               \n                \n                let jobj = JSON.parse(d64);\n                if(Math.floor(i/10) == 0){\n                    this.mission_data_A.push(jobj);\n                }\n                else if(Math.floor(i/10)== 1){\n                    this.mission_data_B.push(jobj);\n                }\n                else if(Math.floor(i/10) == 2){\n                    this.mission_data_C.push(jobj);\n                }\n            }\n            this.isLoadOk = true;\n            console.log(\n                \"load_mission_data ok -> \"+this.mission_data_A.length+\" \"+\n                this.mission_data_B.length+\" \"+this.mission_data_C.length);\n            \n        });\n\n    }\n\n    //取得關卡資料\n    public get_mission_data():any{\n        \n        if(this.select_Game == 1){\n            return this.mission_data_A[this.select_Mission-1];\n        }\n        else if(this.select_Game == 2){\n            return this.mission_data_B[this.select_Mission-1];\n        }\n        else if(this.select_Game == 3){\n            return this.mission_data_C[this.select_Mission-1];\n        }\n        \n    }\n\n    //設定贏的數據\n    public setWin(play_last_time:number){\n        this.play_last_time_m = Math.floor((play_last_time/1000)/60);\n        this.play_last_time_s = Math.floor((play_last_time/1000)%60); \n        this.play_last_time_ms = Math.floor((play_last_time%1000)/10); \n\n\n        let sec= this.play_last_time_m*60+this.play_last_time_s;\n        //計算分數\n        this.play_score = this.get_mission_data().Score.LevelBase;\n        this.play_score += this.get_mission_data().Score.SecondPlus*sec;\n\n        //計算目前玩家分數\n        this,this.myRankData[this.select_Game-1].score += this.play_score;\n        this.myRankData[3].score = 0;\n        for(let i=0;i<3;i++){   \n            this.myRankData[3].score += this.myRankData[i].score;\n        }\n        //同步該遊戲總分\n        this.play_totle_score = this.myRankData[this.select_Game-1].score;\n\n        if(this.select_Mission < this.GameData_Max_Mission_level[this.select_Game-1] &&\n            this.select_Mission == this.play_Game_Max_Mission_level[this.select_Game-1]){\n            this.select_Mission+=1;\n            this.play_Game_Max_Mission_level[this.select_Game-1] = this.select_Mission;\n        }\n    }\n    public setLose(play_last_time:number){\n        this.play_last_time_m = Math.floor((play_last_time/1000)/60);\n        this.play_last_time_s = Math.floor((play_last_time/1000)%60); \n        this.play_last_time_ms = Math.floor((play_last_time%1000)/10); \n        this.play_score = 0;\n        this.play_totle_score = this.myRankData[this.select_Game-1].score;\n\n\n    }\n\n    //取得是否開啟測試模式\n    public get_bl_open_test_debug():boolean{\n        return this.bl_open_test_debug;\n    }\n\n    //取得目前測試模式\n    public getIsInTestMode():boolean{\n        if(this.bl_open_test_debug){\n            return this.bl_in_test_mode;\n        }\n        return false;\n    }\n\n    //測試開關\n    public switchTestMode ():boolean {\n        if(this.bl_open_test_debug){\n            this.bl_in_test_mode = !this.bl_in_test_mode;\n        }\n        return this.bl_in_test_mode;\n    }\n\n}\n\nvar _store_data:store_data = null;\n\n\nexport function getST() {\n\n    if(_store_data === null) {\n        _store_data = new store_data();\n        console.log('new store_data');\n    }\n    return _store_data;\n} \n\n\n\n\n","import { _decorator, Component, Node,game,director,Enum,find, UITransform, RichText,AudioSource } from 'cc';\nconst { ccclass, property } = _decorator;\nimport { common_getEventTarget,EventEnum_Scene,getST } from './Common';\nimport { AudioManager } from './AudioManager';\nimport { SpriteFrameManager } from './SpriteFrameManager';\n\nimport { getProc_Login } from './Proc_Login';\nimport { getProc_GameHome } from './Proc_GameHome';\nimport { getProc_Select_scene } from './Proc_Select_scene';\nimport { getProc_A_scene } from './Proc_A_scene';\nimport { getProc_B_scene } from './Proc_B_scene';\nimport { getProc_C_scene } from './Proc_C_scene';\nimport { getProc_R_scene } from './Proc_R_scene';\nimport { getProc_Info } from './Proc_Info';\n\n\n\n@ccclass('main')\nexport class main extends Component {\n\n\n    @property({ type: String })\n    public playname:String = \"\";\n\n    @property(AudioSource) \n    _audioSource: AudioSource = null!;\n\n\n    onLoad () {\n        console.log(\"main onLoad\"); \n        getST().init();//資料初始化\n\n        let node = this.node;\n        game.addPersistRootNode(node);\n\n        \n        common_getEventTarget().on(EventEnum_Scene.Go_GameHome, this.go_GameHome);\n        common_getEventTarget().on(EventEnum_Scene.Go_Login, this.go_Login);\n\n        common_getEventTarget().on(EventEnum_Scene.Go_SelectScene, this.go_SelectScene);\n        common_getEventTarget().on(EventEnum_Scene.Go_Game_A, this.go_Game_A);\n        common_getEventTarget().on(EventEnum_Scene.Go_Game_B, this.go_Game_B);\n        common_getEventTarget().on(EventEnum_Scene.Go_Game_C, this.go_Game_C);\n        common_getEventTarget().on(EventEnum_Scene.Go_Rankings, this.go_Rankings);\n        common_getEventTarget().on(EventEnum_Scene.Go_Info, this.go_Info);\n\n        const audioSource = this.node.getComponent(AudioSource)!;\n        this._audioSource = audioSource;\n        \n        AudioManager.init(this._audioSource);\n\n        //音效預先載入\n        let str_sound_Flute:string[] = [\n            \"23_flute_do\",\"24_flute_re\",\"25_flute_mi\",\"26_flute_fa\",\"27_flute_so\",\n            \"28_flute_la\",\"29_flute_si\",\"30_flute_do1\",\"31_flute_re1\"];\n        let str_sound_Guitar:string[] = [\n            \"32_guitar_do\",\"33_guitar_re\",\"34_guitar_mi\",\"35_guitar_fa\",\"36_guitar_so\",\n            \"37_guitar_la\",\"38_guitar_si\",\"39_guitar_do1\",\"40_guitar_re1\"];\n        let str_sound_Piano:string[] = [\n            \"14_Piano_Do\",\"15_Piano_Re\",\"16_Piano_Mi\",\"17_Piano_Fa\",\"18_Piano_So\",\n            \"19_Piano_La\",\"20_Piano_Si\",\"21_Piano_Do_1\",\"22_Piano_Re_1\"];\n\n        let str_sound_SoundEffect:string[] = [\n            \"8_9_countdown_and_start\",\"7_click01\",\"11_click02\",\"12_answer01\",\"13_answer02\",\n            \"5_info\",\"6_count01\",\"10_timeout\"\n        ];\n\n        let str_music:string[] = [\"1_bgm01\",\"2_bgm02\",\"3_bgm03\",\"4_bgm04\"];\n               \n        for(let i:number = 0;i<str_sound_Flute.length;i++){\n            AudioManager.preloadSound(str_sound_Flute[i]);\n        }\n        for(let i:number = 0;i<str_sound_Guitar.length;i++){\n            AudioManager.preloadSound(str_sound_Guitar[i]);\n        }\n        for(let i:number = 0;i<str_sound_Piano.length;i++){\n            AudioManager.preloadSound(str_sound_Piano[i]);\n        }\n        for(let i:number = 0;i<str_sound_SoundEffect.length;i++){\n            AudioManager.preloadSound(str_sound_SoundEffect[i]);\n        }\n        for(let i:number = 0;i<str_music.length;i++){\n            AudioManager.preloadSound(str_music[i]);\n        }\n\n\n        //圖片預先載入\n        let str_spriteFrame:string[] = [\n            \"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\n            \"l_1\",\"l_2\",\"l_3\",\"l_4\",\"l_5\",\"l_6\",\"l_7\",\"l_8\",\"l_9\",\n            \"L1_icon_1\",\"L1_icon_2\",\"L1_icon_3\",\"L1_icon_4\",\"L1_icon_5\",\n            \"L1_icon_6\",\"L1_icon_7\",\"L1_icon_8\",\"L1_icon_9\",\n            \"yellow_light\",\"red_light\",\"green_light\",\n            \"L1_未知圖騰_藍\",\"L2_未知圖騰_藍\",\"L3_未知圖騰_藍\",\"L3_未知圖騰3_高亮\",\n            \"白燈\",\"黃燈\",\"綠燈\",\"紅燈\",\"黑燈\",\n        ];\n        for(let i:number = 0;i<str_spriteFrame.length;i++){\n            SpriteFrameManager.preloadSpriteFrame(str_spriteFrame[i]);\n        }\n\n    }\n\n\n    start() {\n        console.log(\"main start\");    \n        console.log(this.playname);\n        getProc_Login().init(); \n\n    }\n\n    update(deltaTime: number) {\n        if(getProc_Login().isRunning){\n            getProc_Login().update();\n        }\n        switch(getST().Update_Scean){\n            case 1:\n                getProc_A_scene().update();\n                break;\n            case 2:\n                getProc_B_scene().update();\n                break;\n            case 3:\n                getProc_C_scene().update();\n                break;\n        }\n    }\n \n    go_GameHome(){\n        console.log(\"go_GameHome\"); \n        director.loadScene(\"GameHome\",function(){\n            getProc_GameHome().init();\n            getST().Update_Scean = 0;\n            AudioManager.playMusic(\"1_bgm01\");\n        });\n    }\n\n    go_Login(){\n        console.log(\"go_Login\");\n        director.loadScene(\"Login\",function(){\n            getProc_Login().init();\n            getST().Update_Scean = 0;\n        });\n    }\n\n    go_SelectScene(){\n        console.log(\"go_SelectScene\");\n        director.loadScene(\"SelectMission\",function(){\n            getProc_Select_scene().init();\n            getST().Update_Scean = 0;\n            AudioManager.playMusic(\"2_bgm02\");\n        });\n    }\n\n    go_Game_A(){\n        director.loadScene(getProc_GameHome().getGameSceneName(),function(){\n            getProc_A_scene().init();\n            getST().Update_Scean = 1;\n        });\n    }\n\n    go_Game_B(){\n        director.loadScene(getProc_GameHome().getGameSceneName(),function(){\n            getProc_B_scene().init();\n            getST().Update_Scean = 2;\n        });\n    }\n\n    go_Game_C(){\n        director.loadScene(getProc_GameHome().getGameSceneName(),function(){\n            getProc_C_scene().init();\n            getST().Update_Scean = 3;\n        });\n    }\n    go_Rankings(){\n        director.loadScene(getProc_GameHome().getGameSceneName(),function(){\n            getProc_R_scene().init();\n            getST().Update_Scean = 4;\n        });\n\n    }\n\n    go_Info(){\n        console.log(\"go_Info\");\n        director.loadScene(\"Info\",function(){\n            getProc_Info().init();\n        });\n    }\n\n    \n}\n\n","import { _decorator, Component, Node,game,director,Enum,find, UITransform, Sprite ,SpriteFrame} from 'cc';\nconst { ccclass, property } = _decorator;\n\n\n\n\n\n@ccclass('ns_SwitchSprite')\nexport class ns_SwitchSprite extends Component {\n\n\n    @property({ type: SpriteFrame })\n    public normal_Sprite:SpriteFrame = null;\n\n    @property({ type: SpriteFrame })\n    public selected_Sprite: SpriteFrame = null!;\n\n    @property({ type: SpriteFrame })\n    public moveOver_Sprite: SpriteFrame = null!;\n\n    @property({ type: SpriteFrame })\n    public lock_Sprite: SpriteFrame = null!;\n\n    private _blLock:boolean = false;\n    private _blSelected:boolean = false;\n\n    public switchSelect(sw:boolean){\n        this._blSelected = sw;\n        let _sp = this.node.getComponent(Sprite)!;\n        if(sw){\n            _sp.spriteFrame = this.selected_Sprite;\n        }else{\n            _sp.spriteFrame = this.normal_Sprite;\n        }    \n    }\n\n    public switchLock(sw:boolean){\n        this._blLock = sw;\n        if(this._blLock == false){\n            this.switchSelect(this._blSelected);\n        }\n        else{\n            let _sp = this.node.getComponent(Sprite)!;\n            _sp.spriteFrame = this.lock_Sprite;   \n        }\n    }\n\n    private onMouseEnter() {\n        if(this._blLock) return;\n        let _sp = this.node.getComponent(Sprite)!;\n        _sp.spriteFrame = this.moveOver_Sprite;\n        console.log(\"onMouseEnter\");\n        \n    }\n    private onMouseLeave() {\n        if(this._blLock) return;\n        this.switchSelect(this._blSelected);\n        console.log(\"onMouseLeave\");\n    } \n\n    start(){\n        this.switchSelect(false);\n        if(this.moveOver_Sprite!=null){\n             this.node.on(Node.EventType.MOUSE_ENTER, this.onMouseEnter, this);\n             this.node.on(Node.EventType.MOUSE_LEAVE, this.onMouseLeave, this);\n        }    \n    }\n\n    onLoad () {\n        this.switchSelect(false);\n    }\n\n    \n}\n\n","import { find, UITransform,Node,RichText, Sprite, Color, log, EventTouch,Label} from 'cc';\nimport { common_getEventTarget,EventEnum_Scene,common_bind_touch_start,getST } from './Common';\nimport { AudioManager } from './AudioManager';\nimport { SpriteFrameManager } from './SpriteFrameManager';\nimport { CLastPlayTime } from './CLastPlayTime';\n\n\n\n//遊戲流程\nenum A_scene_state  { \n    st_none=100,    //無狀態\n    st_init,        //初始化 \n    st_into_animation, //进入动画\n    st_start, //开始\n    st_play_input, //玩家输入\n    st_show_result, //显示结果\n    st_win, //赢了\n    st_timeup_animation, //時間到動畫\n    st_lose, //输了\n    st_end, //结束\n}\n\nclass Proc_A_scene{ \n    \n\n\n    private state:number = A_scene_state.st_none;\n    private state_next:number = -1;//-1表示沒有下一個狀態\n    \n \n    private question_number:number[] = [];//目前題目\n    private anser_number:number[] = [];//使用者答案\n    \n    \n    private last_timestamp:number = 0;//主要FPS上一次時間\n\n    private last_wait_timestamp:number = 0;//計算等待時間的上一次時間(timestamp)\n\n    private node_result_number:RichText[] = [];//結果文字\n    private node_result_light:Sprite[] = [];//結果的燈號\n\n    private node_start_last_time:Label = null;//開始功能的倒數字\n\n    private input_btn_Number:number[] = [];//輸入按鈕實際對應的數字\n    private input_btn_hide:boolean[] = [];//輸入按鈕隱藏實際數字\n    private input_count:number = 0;//玩家輸入的次數\n\n    private state_win_lose_show:number = 0;//顯示贏或輸的階段 0 1 2\n    private cLastPlayTime:CLastPlayTime = null;\n    private blPlayCount01Sound:boolean = false;//跑分音效\n\n    //結果文字node路徑\n    private node_result_number_path:string[] = [\n        \"Canvas/數字位置/數字1\",\"Canvas/數字位置/數字2\",\"Canvas/數字位置/數字3\",\n        \"Canvas/數字位置/數字4\",\"Canvas/數字位置/數字5\",\"Canvas/數字位置/數字6\"\n    ];\n    \n    //結果燈號node路徑\n    private node_result_light_path:string[] = [\n        \"Canvas/tip_Light燈號位置/green_light\",\"Canvas/tip_Light燈號位置/green_light-001\",\n        \"Canvas/tip_Light燈號位置/green_light-002\",\"Canvas/tip_Light燈號位置/green_light-003\",\n        \"Canvas/tip_Light燈號位置/green_light-004\",\"Canvas/tip_Light燈號位置/green_light-005\",\n    ];\n\n    //輸入數字的node路徑\n    private node_input_number_path:string[] = [\n        \"Canvas/Layer 1/Node-001/1_icon\",\"Canvas/Layer 1/Node-001/2_icon\",\n        \"Canvas/Layer 1/Node-001/3_icon\",\"Canvas/Layer 1/Node-001/4_icon\",\n        \"Canvas/Layer 1/Node-001/5_icon\",\"Canvas/Layer 1/Node-001/6_icon\",\n        \"Canvas/Layer 1/Node-001/7_icon\",\"Canvas/Layer 1/Node-001/8_icon\",\n        \"Canvas/Layer 1/Node-001/9_icon\"\n    ];\n    //輸入數字的node路徑\n    private node_input_number:string[] = [\n        \"1_icon\",\"2_icon\",\"3_icon\",\"4_icon\",\"5_icon\",\n        \"6_icon\",\"7_icon\",\"8_icon\",\"9_icon\"\n    ];\n\n    \n    public init(){\n        this.set_Next_state(A_scene_state.st_init);\n        this.last_timestamp = Date.now();\n        \n\n\n        common_bind_touch_start(\"Canvas/Arrow\",this.go_select,this);\n        \n        //提示動畫初始化\n        let node_lose:Node = find(\"Canvas/outturn_lose\");\n        node_lose.active = false;  \n        let node_win:Node = find(\"Canvas/outturn_win\");\n        node_win.active = false;  \n        let node_start:Node = find(\"Canvas/start\");\n        node_start.active = true;  \n        let node_timesup:Node = find(\"Canvas/times_up\");\n        node_timesup.active = false;\n\n        //開場倒數數字\n        this.node_start_last_time = find(\"Canvas/start/time\").getComponent(Label);\n\n        //回到選擇關卡\n        common_bind_touch_start(\"Canvas/outturn_win/btn_back_mis\",this.go_select,this);\n        common_bind_touch_start(\"Canvas/outturn_lose/btn_back_mis\",this.go_select,this);\n        \n        //再一次\n        common_bind_touch_start(\"Canvas/outturn_lose/btn_agn\",this.go_again,this);\n\n        this.cLastPlayTime = new CLastPlayTime();\n        \n    }\n\n\n    private go_select():void{\n        AudioManager.playSound(\"7_click01\");\n        common_getEventTarget().emit(EventEnum_Scene.Go_SelectScene);\n        \n    }\n\n    private go_again():void{\n        AudioManager.playSound(\"7_click01\");\n        if(this.state == A_scene_state.st_lose){\n            this.set_Next_state(A_scene_state.st_init);\n        }\n    }\n\n    private st_init_in():boolean{\n\n        \n        let mis_data = getST().get_mission_data();\n        \n        \n        //產生答案\n        this.anser_number = [];\n        this.question_number = [];\n        this.question_number = [];//true表示答案正確\n        for(let i=0;i<mis_data.LevelSet.NumberCount;i++){\n            let number = Math.floor(Math.random()*9)+1;\n            if(mis_data.LevelSet.NumberRepeat != 'True'){\n                while(this.question_number.indexOf(number)>=0){\n                    number = Math.floor(Math.random()*9)+1;\n                }\n            }\n            this.question_number.push(number);\n            this.anser_number.push(-1);\n            //測試用\n            console.log(number);\n            \n        }\n        //初始化 result node\n        this.node_result_number = [];\n        this.node_result_light = [];\n        for(let i=0;i<6;i++){\n            let node_label:Node = find(this.node_result_number_path[i]);\n            let richText:RichText = node_label.getComponent(RichText);\n            this.node_result_number.push(richText);\n\n            let node_label2:Node = find(this.node_result_light_path[i]);\n            let sprite:Sprite = node_label2.getComponent(Sprite);\n            this.node_result_light.push(sprite);\n        }\n        for(let i=0;i<6;i++){\n            this.node_result_number[i].enabled = false;\n            this.node_result_light[i].enabled=true;\n            let sprite:Sprite = this.node_result_light[i].getComponent(Sprite);\n            sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"白燈\");\n        }\n        //清除多於控制\n        if(mis_data.LevelSet.NumberCount == 4){\n            this.node_result_number.splice(5,1);\n            this.node_result_number.splice(0,1);\n            this.node_result_light[0].enabled=false;\n            this.node_result_light[5].enabled=false;\n            this.node_result_light.splice(5,1);\n            this.node_result_light.splice(0,1);\n        }\n\n        //剩餘秒數\n        this.cLastPlayTime.start(mis_data.LevelSet.Time*1000);\n\n        //改變標題文字\n        let node_labe_title:Node = find(\"Canvas/標題\");\n        let richText_title:RichText = node_labe_title.getComponent(RichText);\n        richText_title.string = \"<color=#FFFFFF>\"+mis_data.GameLevel+\"</color>\";\n      \n        //綁定輸入事件\n        for(let i=0;i<this.node_input_number_path.length;i++){\n            let node_input_number:Node = find(this.node_input_number_path[i]);\n\n            node_input_number.off(Node.EventType.TOUCH_START, this.input_event, this);\n            node_input_number.on(Node.EventType.TOUCH_START, this.input_event, this);\n        }\n\n        //顯示提示\n        let node_lose:Node = find(\"Canvas/outturn_lose\");\n        node_lose.active = false;  \n        let node_win:Node = find(\"Canvas/outturn_win\");\n        node_win.active = false;  \n        let node_start:Node = find(\"Canvas/start\");\n        node_start.active = true;  \n        let node_timesup:Node = find(\"Canvas/times_up\");\n        node_timesup.active = false;\n\n        //產生輸入按鈕實際對應的數字\n        this.input_btn_Number = [];\n        this.input_btn_hide = [];\n        for (let i = 0; i < 9; i++) {\n            this.input_btn_hide.push(false);\n            if(mis_data.LevelSet.PositionShift == 0){\n                this.input_btn_Number.push(i+1);\n            }\n            else if (mis_data.LevelSet.PositionShift > 0) {\n                let tmp_nb = i+1-mis_data.LevelSet.PositionShift;\n                if(tmp_nb<=0){\n                    tmp_nb = tmp_nb+9;\n                }\n                this.input_btn_Number.push(tmp_nb);\n            }\n            else if (mis_data.LevelSet.PositionShift < 0) {\n                if(Math.floor(Math.random()*2)==0){\n                    this.input_btn_Number.push(i+1);\n                }\n                else{\n                    this.input_btn_Number.unshift(i+1);\n                }\n            }\n        }\n\n        //回覆輸入的圖案\n        for(let i=0;i<9;i++){\n            let node_input_number:Node = find(this.node_input_number_path[i]);\n            let sprite:Sprite = node_input_number.getComponent(Sprite);\n            sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"L1_未知圖騰_藍\");\n        }\n\n      \n        this.blPlayCount01Sound = false;\n\n        return true;\n    }\n\n    public st_into_animation_in():boolean{\n        this.last_wait_timestamp = Date.now()+3000;\n        AudioManager.playSound(\"8_9_countdown_and_start\");\n        return true;\n    }\n\n    public st_into_animation_update():void{\n        let last_time = this.last_wait_timestamp-Date.now();\n   \n        \n        if(last_time>=0){\n\n            let iLastTime = Math.floor(last_time/1000)+1;\n            \n            for(let i=0;i<3;i++){\n                let node_tmp:Node = find(\"Canvas/start/start_\"+(i+1));  \n                if(iLastTime == (i+1)){\n                    node_tmp.active = true;\n                }\n                else{\n                    node_tmp.active = false;\n                }\n            }\n            \n            this.node_start_last_time.string = \"...\"+(Math.floor(last_time/1000)).toString()+\"...\";\n        }\n        else{\n            this.set_Next_state(A_scene_state.st_start);\n            let node_start:Node = find(\"Canvas/start\");\n            node_start.active = false;   \n\n            AudioManager.playMusic(\"3_bgm03\");\n        }\n    }\n\n\n\n    private st_play_input_in():boolean{\n        let mis_data = getST().get_mission_data();\n        //關掉結果提示\n        for(let i=0;i<this.node_result_number.length;i++){\n            if(mis_data.LevelSet.RightRetain == \"True\" && this.question_number[i] == this.anser_number[i]){\n                continue;\n            }\n            this.anser_number[i] = -1;\n            this.node_result_number[i].enabled = false;\n            let sprite:Sprite = this.node_result_light[i].getComponent(Sprite);\n            sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"白燈\");\n        }\n        this.input_count = 0;\n        return true;\n\n    }\n\n    private st_play_input_update():void{\n        let blComplete:boolean = true;\n        for(let i=0;i<this.anser_number.length;i++){\n            if(this.anser_number[i] == -1){\n                blComplete = false;\n                break;\n            }\n        }\n        if(blComplete){\n            this.set_Next_state(A_scene_state.st_show_result);\n        }\n    }\n\n    private st_show_result_in():boolean{\n        this.last_wait_timestamp = Date.now();\n\n        //判斷與設定燈號\n        for(let i=0;i<this.anser_number.length;i++){\n            let anumber = this.anser_number[i];\n            let sprite:Sprite = this.node_result_light[i].getComponent(Sprite);\n\n            if(anumber == this.question_number[i]){\n                sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"綠燈\");\n            }\n            else{\n                //判斷是否要提示\n                let mis_data = getST().get_mission_data();\n                let blHint = false;\n                for(let j=0;j<mis_data.LevelSet.HintPosition.length;j++){\n                    if(mis_data.LevelSet.HintPosition[j] == (i+1)){\n                        blHint = true;\n                        break;\n                    }\n                }\n                if(blHint == false){//不提供提示\n                    sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"黑燈\");\n                }\n                else{//提供提示\n                    let blFind = false;\n                    for(let i=0;i<this.question_number.length;i++){\n                        if(this.question_number[i] == anumber){\n                            blFind = true;\n                            break;\n                        }\n                    }\n                    if(blFind){\n                        sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"黃燈\");\n                    }\n                    else{\n                        sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"紅燈\");\n                    }\n                }\n            }\n        }\n\n        //檢查答案\n        let bl_right = true;\n        for(let i=0;i<this.question_number.length;i++){\n            if(this.question_number[i] != this.anser_number[i]){\n                bl_right = false;\n                break;\n            }\n        }\n        if(bl_right){\n            AudioManager.playSound(\"12_answer01\");\n        }\n        else{\n            AudioManager.playSound(\"13_answer02\");\n        }\n\n        return true;\n    }\n    \n    private st_show_result_update():void{\n        if(Date.now()-this.last_wait_timestamp>=1200){\n            //檢查答案\n            let bl_right = true;\n            for(let i=0;i<this.question_number.length;i++){\n                if(this.question_number[i] != this.anser_number[i]){\n                    bl_right = false;\n                    break;\n                }\n            }\n            if(bl_right){\n                this.set_Next_state(A_scene_state.st_win);\n            }\n            else{\n                this.set_Next_state(A_scene_state.st_play_input);\n            }\n        }\n    }\n    private st_win_in():boolean{\n        this.last_wait_timestamp = Date.now();\n   \n\n        getST().setWin(this.cLastPlayTime.getLastPlayTime());\n\n        let node_win:Node = find(\"Canvas/outturn_win\");\n        node_win.active = true;\n\n        this.state_win_lose_show = 0;\n        this.last_wait_timestamp = Date.now();\n        \n        //剩餘分數\n        let sc_01: Label = find(\"Canvas/outturn_win/SpriteSplash/Node/sc_01\").getComponent(Label);\n        sc_01.enabled = false;\n        \n        sc_01.string = \n        getST().play_last_time_m.toString().padStart(2, '0')+\":\"+\n        getST().play_last_time_s.toString().padStart(2, '0')+\":\"+\n        getST().play_last_time_ms.toString().padStart(2, '0');\n\n        //顯示關卡分數\n        let sc_02: Label = find(\"Canvas/outturn_win/SpriteSplash/Node/sc_02\").getComponent(Label);\n        sc_02.string = \"0\";\n        sc_02.enabled = false;\n\n        //顯示總分數\n        let sc_03: Label = find(\"Canvas/outturn_win/SpriteSplash/Node/sc_03\").getComponent(Label);\n        sc_03.string = \"0\";\n        sc_03.enabled = false;\n\n        //關掉按鈕\n        let node_btn_back:Node = find(\"Canvas/outturn_win/btn_back_mis\");\n        node_btn_back.active = false;\n       \n\n        AudioManager.stopMusic();\n        AudioManager.playSound(\"4_bgm04\");\n        \n        return true;\n    }\n\n    private st_win_update():void{\n        if(this.state_win_lose_show == 0){\n            if(Date.now()-this.last_wait_timestamp>=1000){\n                let sc_01: Label = find(\"Canvas/outturn_win/SpriteSplash/Node/sc_01\").getComponent(Label);\n                sc_01.enabled = true;\n                this.state_win_lose_show = 1;\n                this.last_wait_timestamp = Date.now();\n                \n            }\n        }\n        else if(this.state_win_lose_show == 1){\n            let showscore = Math.floor((getST().play_score/Math.pow(2, 20))*Math.pow(2, (Date.now()-this.last_wait_timestamp)/50));\n            if(Date.now()-this.last_wait_timestamp>=1200){\n                showscore = getST().play_score;\n                this.state_win_lose_show = 2;\n                this.last_wait_timestamp = Date.now();\n            }\n            \n\n            let sc_02: Label = find(\"Canvas/outturn_win/SpriteSplash/Node/sc_02\").getComponent(Label);\n            if(sc_02.enabled == false){\n                sc_02.enabled = true;\n            }\n\n            sc_02.string = showscore.toString();\n\n            \n        }\n        else if(this.state_win_lose_show == 2){\n            let showscore = Math.floor((getST().play_totle_score/Math.pow(2, 20))*Math.pow(2, (Date.now()-this.last_wait_timestamp)/50));\n            if(Date.now()-this.last_wait_timestamp>=1200){\n                showscore = getST().play_totle_score;\n                this.state_win_lose_show = 3;\n                this.last_wait_timestamp = Date.now();\n                \n            }\n            //顯示總分數\n            let sc_03: Label = find(\"Canvas/outturn_win/SpriteSplash/Node/sc_03\").getComponent(Label);\n            if(sc_03.enabled == false)\n                sc_03.enabled = true;\n            sc_03.string = showscore.toString();\n\n            if(this.blPlayCount01Sound == false){\n                if(Date.now()-this.last_wait_timestamp>=200){\n                    this.blPlayCount01Sound = true;\n                    AudioManager.playMusic(\"6_count01\");\n                }\n            }\n\n        }\n        else if(this.state_win_lose_show == 3){\n            let node_btn_back:Node = find(\"Canvas/outturn_win/btn_back_mis\");\n            node_btn_back.active = true;\n            this.state_win_lose_show = 4;\n            AudioManager.stopMusic();\n        } \n    }\n\n    public st_timeup_animation_in():boolean{\n        this.last_wait_timestamp = Date.now();\n        let node_timeup:Node = find(\"Canvas/times_up\");\n        node_timeup.active = true;\n        return true;\n    }\n\n    public st_timeup_animation_update():void{\n        if(Date.now()-this.last_wait_timestamp>=2000){\n            this.set_Next_state(A_scene_state.st_lose);\n            let node_timeup:Node = find(\"Canvas/times_up\");\n            node_timeup.active = false;\n        }\n    }\n\n    private st_lose_in():boolean{\n        this.last_wait_timestamp = Date.now();\n        let node_lose:Node = find(\"Canvas/outturn_lose\");\n        node_lose.active = true;\n\n        this.state_win_lose_show = 0;\n        this.last_wait_timestamp = Date.now();\n\n        let sc_01:Label = find(\"Canvas/outturn_lose/SpriteSplash/sc_01\").getComponent(Label);\n        sc_01.enabled = false;\n\n        let sc_02:Label = find(\"Canvas/outturn_lose/SpriteSplash/sc_02\").getComponent(Label);\n        sc_02.enabled = false;\n\n        //顯示總分數\n        let sc_03:Label = find(\"Canvas/outturn_lose/SpriteSplash/sc_03\").getComponent(Label);\n        sc_03.enabled = false;\n        sc_03.string = getST().play_totle_score.toString();\n\n        let node_btn_back = find(\"Canvas/outturn_lose/btn_back_mis\");\n        node_btn_back.active = false;\n\n        let node_btn_agn = find(\"Canvas/outturn_lose/btn_agn\");\n        node_btn_agn.active = false;\n\n        AudioManager.stopMusic();\n        \n\n        return true;\n    }\n    private st_lose_update():void{\n        if(this.state_win_lose_show == 0){\n            if(Date.now()-this.last_wait_timestamp>=1000){\n                let sc_01:Label = find(\"Canvas/outturn_lose/SpriteSplash/sc_01\").getComponent(Label);\n                sc_01.enabled = true;\n                this.state_win_lose_show = 1;\n                this.last_wait_timestamp = Date.now();\n              //  AudioManager.playSound(\"5_info\");//關掉失敗音效\n            }\n        }\n        else if(this.state_win_lose_show == 1){\n            if(Date.now()-this.last_wait_timestamp>=1000){\n                let sc_02:Label = find(\"Canvas/outturn_lose/SpriteSplash/sc_02\").getComponent(Label);\n                sc_02.enabled = true;\n                this.state_win_lose_show = 2;\n                this.last_wait_timestamp = Date.now();\n            }\n        }\n        else if(this.state_win_lose_show == 2){\n            if(Date.now()-this.last_wait_timestamp>=1000){\n                let sc_03:Label = find(\"Canvas/outturn_lose/SpriteSplash/sc_03\").getComponent(Label);\n                sc_03.enabled = true;\n                this.state_win_lose_show = 3;\n                this.last_wait_timestamp = Date.now();\n            }\n        }\n        else if(this.state_win_lose_show == 3){\n            if(Date.now()-this.last_wait_timestamp>=1000){\n                this.state_win_lose_show = 4;\n        \n                let node_btn_back = find(\"Canvas/outturn_lose/btn_back_mis\");\n                node_btn_back.active = true;\n\n                let node_btn_agn = find(\"Canvas/outturn_lose/btn_agn\");\n                node_btn_agn.active = true;\n            }\n        }   \n    }\n            \n\n\n    public input_event(event:EventTouch){\n \n        let number:number = this.node_input_number.indexOf((event.target as Node).name)+1;\n\n        AudioManager.playSound(\"11_click02\");\n        if(this.state == A_scene_state.st_show_result){//顯示結果跳過\n            this.last_wait_timestamp = Date.now()-20000;\n            return;\n        }\n\n        let mis_data = getST().get_mission_data();\n\n        \n\n        //保留答案判斷\n        if(mis_data.LevelSet.RightRetain == \"True\"){\n            for(let i=this.input_count;i<this.anser_number.length;i++){\n                if(this.anser_number[i] == -1){\n                    break;   \n                }\n                this.input_count++;\n            }\n        }\n\n        if(this.input_count>=mis_data.LevelSet.NumberCount){\n            return;\n        }\n\n        //取得實際按鈕數字\n        let real_number:number = this.input_btn_Number[number-1];\n\n        //是否顯示輸入按鈕數字\n        if(this.input_btn_hide[number-1] == false){\n            if(mis_data.LevelSet.ShowNumber == \"True\"){\n                //顯示數字\n                this.input_btn_hide[number-1] = true;\n                let sprite:Sprite = (event.target as Node).getComponent(Sprite);\n                let strFrameName:string[] = [ \"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\"];\n                sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(strFrameName[real_number-1]);\n            }\n        }\n\n        //記錄答案\n        this.anser_number[this.input_count] = real_number;\n\n        //設定按下的字\n        this.node_result_number[this.input_count].string = \"<color=#FFFFFF>\"+real_number+\"</color>\";\n        this.node_result_number[this.input_count].enabled = true;\n\n        this.input_count++;\n        \n    }\n\n    \n    \n    public set_Next_state(state:number):boolean{\n        console.log(\"set_Next_state:\"+state);\n        if(this.state_next == -1){\n            this.state_next = state;\n            return true;\n        }\n        return false;\n    }\n    \n    private _state_change(){\n        if(this.state_next == -1){\n            return;\n        }\n\n        let real_change:boolean = true;\n        switch(this.state_next){\n            case A_scene_state.st_init:\n                real_change = this.st_init_in();\n                break;\n            case A_scene_state.st_into_animation:  \n                real_change = this.st_into_animation_in();\n                break;\n            case A_scene_state.st_play_input:\n                real_change = this.st_play_input_in();\n                break;\n            case A_scene_state.st_show_result:\n                real_change = this.st_show_result_in();\n                break;\n            case A_scene_state.st_win:\n                real_change = this.st_win_in();\n                break;\n            case A_scene_state.st_timeup_animation:\n                real_change = this.st_timeup_animation_in();\n                break;\n            case A_scene_state.st_lose: \n                real_change = this.st_lose_in();\n                break;\n\n        }\n        if(real_change){\n            this.state = this.state_next;\n            this.state_next = -1;\n        }\n    }\n\n    private _state_update(){\n\n        switch(this.state){\n \n            case A_scene_state.st_init:\n                this.set_Next_state(A_scene_state.st_into_animation);\n                break;\n            case A_scene_state.st_into_animation:  \n                this.st_into_animation_update();   \n                break;\n            case A_scene_state.st_start:\n                this.set_Next_state(A_scene_state.st_play_input);\n                break;\n            case A_scene_state.st_play_input:\n                this.st_play_input_update();\n                break;\n            case A_scene_state.st_show_result:\n                this.st_show_result_update();\n                break;\n            case A_scene_state.st_win:\n                this.st_win_update();\n                break;\n            case A_scene_state.st_timeup_animation:\n                this.st_timeup_animation_update();\n                break;\n            case A_scene_state.st_lose:\n                this.st_lose_update();\n                break;\n\n        }\n    }\n\n    public update(){\n        //經過時間\n        let elapsed_time = Date.now() - this.last_timestamp;\n        \n        if(elapsed_time < 33){\n            return;\n        }\n        this.last_timestamp = Date.now();\n  \n\n        //時間更新\n        if(this.state == A_scene_state.st_play_input){\n            //----測試除錯用--------------------\n            if(getST().getIsInTestMode()){\n                elapsed_time = 0;   \n            }\n            //---------------------------------\n            if(this.cLastPlayTime.update(elapsed_time)){\n                this.set_Next_state(A_scene_state.st_timeup_animation);\n            }\n        }\n\n        this._state_update();\n        this._state_change();\n    }\n    \n}\n\n\n\nvar _proc_A_scene:Proc_A_scene = null;\n\n\nexport function getProc_A_scene() {\n\n    if(_proc_A_scene === null) {\n        _proc_A_scene = new Proc_A_scene();\n        console.log('new Proc_A_scene');\n    }\n    return _proc_A_scene;\n} \n\n","import { find, EventTouch,Node,RichText, Sprite, Color,Label} from 'cc';\nimport { common_getEventTarget,EventEnum_Scene,common_bind_touch_start,getST } from './Common';\nimport { AudioManager } from './AudioManager';\nimport { SpriteFrameManager } from './SpriteFrameManager';\nimport { CLastPlayTime } from './CLastPlayTime';\nimport { ns_SwitchSprite } from './ns_SwitchSprite';\n\n//遊戲流程\nenum B_scene_state  { \n    st_none=100,    //無狀態\n    st_init,        //初始化 \n    st_into_animation, //进入动画\n    st_start, //开始答題的主畫面，等待玩家選擇\n    st_play_question_sound, //播放题目音频\n    st_play_input, //玩家输入\n    st_show_result, //显示结果\n    st_win, //赢了\n    st_timeup_animation, //時間到動畫\n    st_lose, //输了\n    st_end, //结束\n}\n\nclass Proc_B_scene{ \n    \n    private state:number = B_scene_state.st_none;\n    private state_next:number = -1;//-1表示沒有下一個狀態\n    \n\n    private question_number:number[] = [];//目前題目\n    private anser_number:number[] = [];//使用者答案\n    \n    \n    private last_timestamp:number = 0;//主要FPS上一次時間\n\n    private last_wait_timestamp:number = 0;//計算等待時間的上一次時間(timestamp)\n\n    private node_result_number:RichText[] = [];//結果文字\n    private node_result_light:Sprite[] = [];//結果的燈號\n\n    private node_start_last_time:Label = null;//開始功能的倒數字\n\n    private play_count:number = 0;//題目播放次數\n\n    private input_btn_Number:number[] = [];//輸入按鈕實際對應的數字\n    private input_btn_hide:boolean[] = [];//輸入按鈕隱藏實際數字\n    private input_count:number = 0;//玩家輸入的次數\n\n    private state_win_lose_show:number = 0;//顯示贏或輸的階段 0 1 2\n\n    //結果文字node路徑\n    private node_result_number_path:string[] = [\n        \"Canvas/數字位置/數字1\",\"Canvas/數字位置/數字2\",\"Canvas/數字位置/數字3\",\n        \"Canvas/數字位置/數字4\",\"Canvas/數字位置/數字5\",\"Canvas/數字位置/數字6\"\n    ];\n    \n    //結果燈號node路徑\n    private node_result_light_path:string[] = [\n        \"Canvas/tip_Light燈號位置/green_light\",\"Canvas/tip_Light燈號位置/green_light-001\",\n        \"Canvas/tip_Light燈號位置/green_light-002\",\"Canvas/tip_Light燈號位置/green_light-003\",\n        \"Canvas/tip_Light燈號位置/green_light-004\",\"Canvas/tip_Light燈號位置/green_light-005\",\n    ];\n\n    //輸入數字的node路徑\n    private node_input_number_path:string[] = [\n        \"Canvas/Layer 1/Node-001/1_icon\",\"Canvas/Layer 1/Node-001/2_icon\",\n        \"Canvas/Layer 1/Node-001/3_icon\",\"Canvas/Layer 1/Node-001/4_icon\",\n        \"Canvas/Layer 1/Node-001/5_icon\",\"Canvas/Layer 1/Node-001/6_icon\",\n        \"Canvas/Layer 1/Node-001/7_icon\",\"Canvas/Layer 1/Node-001/8_icon\",\n        \"Canvas/Layer 1/Node-001/9_icon\"\n    ];\n    //輸入數字的node路徑\n    private node_input_number:string[] = [\n        \"1_icon\",\"2_icon\",\"3_icon\",\"4_icon\",\"5_icon\",\n        \"6_icon\",\"7_icon\",\"8_icon\",\"9_icon\"\n    ];\n\n    private cLastPlayTime:CLastPlayTime = null;\n\n    private blPlayCount01Sound:boolean = false;//跑分音效\n    \n    \n    public init(){\n        this.set_Next_state(B_scene_state.st_init);\n        this.last_timestamp = Date.now();\n        \n     \n\n        common_bind_touch_start(\"Canvas/Arrow\",this.go_select,this); \n        common_bind_touch_start(\"Canvas/play_icon\",this.btn_play_question_sound,this); \n        common_bind_touch_start(\"Canvas/confirm_icon\",this.btn_to_play_input,this); \n\n        //提示動畫初始化\n        let node_lose:Node = find(\"Canvas/outturn_lose\");\n        node_lose.active = false;  \n        let node_win:Node = find(\"Canvas/outturn_win\");\n        node_win.active = false;  \n        let node_start:Node = find(\"Canvas/start\");\n        node_start.active = true;  \n        let node_timesup:Node = find(\"Canvas/times_up\");\n        node_timesup.active = false;\n\n        //開場倒數數字\n        this.node_start_last_time = find(\"Canvas/start/time\").getComponent(Label);\n\n        //回到選擇關卡\n        common_bind_touch_start(\"Canvas/outturn_win/btn_back_mis\",this.go_select,this);\n        common_bind_touch_start(\"Canvas/outturn_lose/btn_back_mis\",this.go_select,this);\n        \n        //再一次\n        common_bind_touch_start(\"Canvas/outturn_lose/btn_agn\",this.go_again,this);\n\n        this.cLastPlayTime = new CLastPlayTime();\n      \n    }\n\n    private go_select():void{\n        AudioManager.playSound(\"7_click01\");\n        common_getEventTarget().emit(EventEnum_Scene.Go_SelectScene);\n        \n    }\n\n    private go_again():void{\n        if(this.state == B_scene_state.st_lose){\n            this.set_Next_state(B_scene_state.st_init);\n        }\n    }\n\n    private btn_play_question_sound():void{\n        if(this.state == B_scene_state.st_start){\n            AudioManager.playSound(\"7_click01\");\n            this.set_Next_state(B_scene_state.st_play_question_sound);\n        }\n    }\n\n    private btn_to_play_input():void{   \n        if(this.state == B_scene_state.st_start){\n            AudioManager.playSound(\"7_click01\");\n            this.set_Next_state(B_scene_state.st_play_input);\n        }\n        else if(this.state == B_scene_state.st_play_input){\n            AudioManager.playSound(\"7_click01\");\n            this.set_Next_state(B_scene_state.st_start);\n        }\n    }\n\n\n    private st_init_in():boolean{\n\n        \n        let mis_data = getST().get_mission_data();\n        \n        //產生答案\n        this.anser_number = [];\n        this.question_number = [];\n        this.question_number = [];//true表示答案正確\n        for(let i=0;i<mis_data.LevelSet.NumberCount;i++){\n            let number = Math.floor(Math.random()*9)+1;\n            if(mis_data.LevelSet.NumberRepeat != 'True'){\n                while(this.question_number.indexOf(number)>=0){\n                    number = Math.floor(Math.random()*9)+1;\n                }\n            }\n            this.question_number.push(number);\n            this.anser_number.push(-1);\n            //測試用\n            console.log(number);\n            \n        }\n        //初始化 result node\n        this.node_result_number = [];\n        this.node_result_light = [];\n        for(let i=0;i<6;i++){\n            let node_label:Node = find(this.node_result_number_path[i]);\n            let richText:RichText = node_label.getComponent(RichText);\n            this.node_result_number.push(richText);\n\n            let node_label2:Node = find(this.node_result_light_path[i]);\n            let sprite:Sprite = node_label2.getComponent(Sprite);\n            this.node_result_light.push(sprite);\n        }\n        for(let i=0;i<6;i++){\n            this.node_result_number[i].enabled = false;\n            this.node_result_light[i].enabled=true;\n            let sprite:Sprite = this.node_result_light[i].getComponent(Sprite);\n            sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"白燈\");\n        }\n        //清除多於控制\n        if(mis_data.LevelSet.NumberCount == 4){\n            this.node_result_number.splice(5,1);\n            this.node_result_number.splice(0,1);\n            this.node_result_light[0].enabled=false;\n            this.node_result_light[5].enabled=false;\n            this.node_result_light.splice(5,1);\n            this.node_result_light.splice(0,1);\n        }\n        else if(mis_data.LevelSet.NumberCount == 2){\n            this.node_result_number.splice(4,2);\n            this.node_result_number.splice(0,2);   \n            this.node_result_light[0].enabled=false;\n            this.node_result_light[1].enabled=false;\n            this.node_result_light[4].enabled=false;\n            this.node_result_light[5].enabled=false;\n            this.node_result_light.splice(4,2);\n            this.node_result_light.splice(0,2); \n        }\n\n        //剩餘秒數\n        this.cLastPlayTime.start(mis_data.LevelSet.Time*1000);\n\n        //改變標題文字\n        let node_labe_title:Node = find(\"Canvas/標題\");\n        let richText_title:RichText = node_labe_title.getComponent(RichText);\n        richText_title.string = \"<color=#FFFFFF>\"+mis_data.GameLevel+\"</color>\";\n      \n        //綁定輸入事件\n        for(let i=0;i<this.node_input_number_path.length;i++){\n            let node_input_number:Node = find(this.node_input_number_path[i]);\n       \n            node_input_number.off(Node.EventType.TOUCH_START, this.input_event, this);\n            node_input_number.on(Node.EventType.TOUCH_START, this.input_event, this);\n        }\n\n        //提示動畫初始化\n        let node_lose:Node = find(\"Canvas/outturn_lose\");\n        node_lose.active = false;  \n        let node_win:Node = find(\"Canvas/outturn_win\");\n        node_win.active = false;  \n        let node_start:Node = find(\"Canvas/start\");\n        node_start.active = true;  \n        let node_timesup:Node = find(\"Canvas/times_up\");\n        node_timesup.active = false;\n\n        //產生輸入按鈕實際對應的數字\n        this.input_btn_Number = [];\n        this.input_btn_hide = [];\n        for (let i = 0; i < 9; i++) {\n            this.input_btn_hide.push(false);\n            if(mis_data.LevelSet.PositionShift == 0){\n                this.input_btn_Number.push(i+1);\n            }\n            else if (mis_data.LevelSet.PositionShift > 0) {\n                let tmp_nb = i+1-mis_data.LevelSet.PositionShift;\n                if(tmp_nb<=0){\n                    tmp_nb = tmp_nb+9;\n                }\n                this.input_btn_Number.push(tmp_nb);\n            }\n            else if (mis_data.LevelSet.PositionShift < 0) {\n                if(Math.floor(Math.random()*2)==0){\n                    this.input_btn_Number.push(i+1);\n                }\n                else{\n                    this.input_btn_Number.unshift(i+1);\n                }\n            }\n        }\n\n        //回覆輸入的圖案\n        for(let i=0;i<9;i++){\n            let node_input_number:Node = find(this.node_input_number_path[i]);\n            let sprite:Sprite = node_input_number.getComponent(Sprite);\n            sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"L2_未知圖騰_藍\");\n        }\n\n\n        this.blPlayCount01Sound = false;\n\n        return true;\n    }\n\n    public st_into_animation_in():boolean{\n        this.last_wait_timestamp = Date.now()+3000;\n        AudioManager.playSound(\"8_9_countdown_and_start\");\n        return true;\n    }\n\n    public st_into_animation_update():void{\n        let last_time = this.last_wait_timestamp-Date.now();\n        if(last_time>=0){\n            let iLastTime = Math.floor(last_time/1000)+1;\n            for(let i=0;i<3;i++){\n                let node_tmp:Node = find(\"Canvas/start/start_\"+(i+1));  \n                if(iLastTime == (i+1)){\n                    node_tmp.active = true;\n                }\n                else{\n                    node_tmp.active = false;\n                }\n            }\n\n            this.node_start_last_time.string = \"...\"+(Math.floor(last_time/1000)).toString()+\"...\";\n        }\n        else{\n            let node_start:Node = find(\"Canvas/start\");\n            node_start.active = false;  \n            this.set_Next_state(B_scene_state.st_play_question_sound); \n            //暫時關閉音效\n            AudioManager.stopMusic();\n            //AudioManager.playMusic(\"3_bgm03\");\n        }\n    }\n\n    private st_start_in():boolean{\n        let mis_data = getST().get_mission_data();\n        //關掉結果提示\n        for(let i=0;i<this.node_result_number.length;i++){\n            if(mis_data.LevelSet.RightRetain == \"True\" && this.question_number[i] == this.anser_number[i]){\n                continue;\n            }\n            this.anser_number[i] = -1;\n            this.node_result_number[i].enabled = false;\n            let sprite:Sprite = this.node_result_light[i].getComponent(Sprite);\n            sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"白燈\");\n        }\n        this.input_count = 0;\n        this.switchNS(\"Canvas/play_icon\",false);\n        this.switchNS(\"Canvas/confirm_icon\",false);\n        this.switchNS_lock(\"Canvas/play_icon\",false);\n        this.switchNS_lock(\"Canvas/confirm_icon\",false);\n        return true;\n    }\n\n    private st_play_question_sound_in():boolean{\n        this.last_wait_timestamp = Date.now();\n        this.play_count = 0;\n        this.switchNS(\"Canvas/play_icon\",true);\n        this.switchNS(\"Canvas/confirm_icon\",false);\n        this.switchNS_lock(\"Canvas/play_icon\",true);\n        this.switchNS_lock(\"Canvas/confirm_icon\",true);\n        return true;\n    }\n\n    private st_play_question_sound_update():void{\n        \n        if(Date.now()-this.last_wait_timestamp>1000){\n            this.last_wait_timestamp = Date.now();\n            this.play_sound(this.question_number[this.play_count]);\n            this.play_count++;\n            if(this.play_count>=this.question_number.length){\n                this.set_Next_state(B_scene_state.st_start);\n            }\n        }\n    }\n    private st_play_input_in():boolean{\n\n        this.switchNS(\"Canvas/play_icon\",false);\n        this.switchNS(\"Canvas/confirm_icon\",true);\n        this.switchNS_lock(\"Canvas/play_icon\",true);\n        this.switchNS_lock(\"Canvas/confirm_icon\",false);\n        return true;\n    }\n\n\n    private st_play_input_update():void{\n        let blComplete:boolean = true;\n        for(let i=0;i<this.anser_number.length;i++){\n            if(this.anser_number[i] == -1){\n                blComplete = false;\n                break;\n            }\n        }\n        if(blComplete){\n            this.set_Next_state(B_scene_state.st_show_result);\n        }\n    }\n\n    private st_show_result_in():boolean{\n        this.last_wait_timestamp = Date.now();\n\n        //判斷與設定燈號\n        for(let i=0;i<this.anser_number.length;i++){\n            let anumber = this.anser_number[i];\n            let sprite:Sprite = this.node_result_light[i].getComponent(Sprite);\n\n            if(anumber == this.question_number[i]){\n                sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"綠燈\");\n            }\n            else{\n                //判斷是否要提示\n                let mis_data = getST().get_mission_data();\n                let blHint = false;\n                for(let j=0;j<mis_data.LevelSet.HintPosition.length;j++){\n                    if(mis_data.LevelSet.HintPosition[j] == (i+1)){\n                        blHint = true;\n                        break;\n                    }\n                }\n                if(blHint == false){//不提供提示\n                    sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"黑燈\");\n                }\n                else{//提供提示\n                    let blFind = false;\n                    for(let i=0;i<this.question_number.length;i++){\n                        if(this.question_number[i] == anumber){\n                            blFind = true;\n                            break;\n                        }\n                    }\n                    if(blFind){\n                        sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"黃燈\");\n                    }\n                    else{\n                        sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"紅燈\");\n                    }\n                }\n            }\n        }\n        //檢查答案\n        let bl_right = true;\n        for(let i=0;i<this.question_number.length;i++){\n            if(this.question_number[i] != this.anser_number[i]){\n                bl_right = false;\n                break;\n            }\n        }\n        if(bl_right){\n            AudioManager.playSound(\"12_answer01\");\n        }\n        else{\n            AudioManager.playSound(\"13_answer02\");\n        }\n\n        return true;\n    }\n    \n    private st_show_result_update():void{\n        if(Date.now()-this.last_wait_timestamp>=1000){\n            //檢查答案\n            let bl_right = true;\n            for(let i=0;i<this.question_number.length;i++){\n                if(this.question_number[i] != this.anser_number[i]){\n                    bl_right = false;\n                    break;\n                }\n            }\n            if(bl_right){\n                this.set_Next_state(B_scene_state.st_win);\n            }\n            else{\n                this.set_Next_state(B_scene_state.st_start);\n            }\n        }\n    }\n    private st_win_in():boolean{\n\n        getST().setWin(this.cLastPlayTime.getLastPlayTime());\n        let node_win:Node = find(\"Canvas/outturn_win\");\n        node_win.active = true;\n        \n        this.state_win_lose_show = 0;\n        this.last_wait_timestamp = Date.now();\n        \n        //剩餘分數\n        let sc_01:Label = find(\"Canvas/outturn_win/SpriteSplash/Node/sc_01\").getComponent(Label);\n        sc_01.enabled = false;\n        \n        sc_01.string = \n        getST().play_last_time_m.toString().padStart(2, '0')+\":\"+\n        getST().play_last_time_s.toString().padStart(2, '0')+\":\"+\n        getST().play_last_time_ms.toString().padStart(2, '0');\n\n        //顯示關卡分數\n        let sc_02:Label = find(\"Canvas/outturn_win/SpriteSplash/Node/sc_02\").getComponent(Label);\n        sc_02.string = \"0\";\n        sc_02.enabled = false;\n\n        //顯示總分數\n        let sc_03:Label = find(\"Canvas/outturn_win/SpriteSplash/Node/sc_03\").getComponent(Label);\n        sc_03.string = \"0\";\n        sc_03.enabled = false;\n\n        //關掉按鈕\n        let node_btn_back:Node = find(\"Canvas/outturn_win/btn_back_mis\");\n        node_btn_back.active = false;\n\n        AudioManager.stopMusic();\n        AudioManager.playSound(\"4_bgm04\");\n        \n        return true;\n    }\n    private st_win_update():void{\n        if(this.state_win_lose_show == 0){\n            if(Date.now()-this.last_wait_timestamp>=1000){\n                let sc_01:Label = find(\"Canvas/outturn_win/SpriteSplash/Node/sc_01\").getComponent(Label);\n                sc_01.enabled = true;\n                this.state_win_lose_show = 1;\n                this.last_wait_timestamp = Date.now();\n              \n            }\n        }\n        else if(this.state_win_lose_show == 1){\n            let showscore = Math.floor((getST().play_score/Math.pow(2, 20))*Math.pow(2, (Date.now()-this.last_wait_timestamp)/50));\n            if(Date.now()-this.last_wait_timestamp>=1000){\n                showscore = getST().play_score;\n                this.state_win_lose_show = 2;\n                this.last_wait_timestamp = Date.now();\n            }\n\n            let sc_02:Label = find(\"Canvas/outturn_win/SpriteSplash/Node/sc_02\").getComponent(Label);\n            if(sc_02.enabled == false)\n                sc_02.enabled = true;\n            sc_02.string = showscore.toString();\n\n            \n        }\n        else if(this.state_win_lose_show == 2){\n            let showscore = Math.floor((getST().play_totle_score/Math.pow(2, 20))*Math.pow(2, (Date.now()-this.last_wait_timestamp)/50));\n            if(Date.now()-this.last_wait_timestamp>=1000){\n                showscore = getST().play_totle_score;\n                this.state_win_lose_show = 3;\n                this.last_wait_timestamp = Date.now();\n            }\n            //顯示總分數\n            let sc_03:Label = find(\"Canvas/outturn_win/SpriteSplash/Node/sc_03\").getComponent(Label);\n            if(sc_03.enabled == false)\n                sc_03.enabled = true;\n            sc_03.string = showscore.toString();\n\n            if(this.blPlayCount01Sound == false){\n                if(Date.now()-this.last_wait_timestamp>=200){\n                    this.blPlayCount01Sound = true;\n                    AudioManager.playMusic(\"6_count01\");\n                }\n            }\n\n        }\n        else if(this.state_win_lose_show == 3){\n            let node_btn_back:Node = find(\"Canvas/outturn_win/btn_back_mis\");\n            node_btn_back.active = true;\n            this.state_win_lose_show = 4;\n            AudioManager.stopMusic();\n        } \n    }\n\n    public st_timeup_animation_in():boolean{\n        this.last_wait_timestamp = Date.now();\n        let node_timeup:Node = find(\"Canvas/times_up\");\n        node_timeup.active = true;\n        return true;\n    }\n\n    public st_timeup_animation_update():void{\n        if(Date.now()-this.last_wait_timestamp>=2000){\n            this.set_Next_state(B_scene_state.st_lose);\n            let node_timeup:Node = find(\"Canvas/times_up\");\n            node_timeup.active = false;\n        }\n    }\n\n    private st_lose_in():boolean{\n        this.last_wait_timestamp = Date.now();\n        let node_lose:Node = find(\"Canvas/outturn_lose\");\n        node_lose.active = true;\n\n        this.state_win_lose_show = 0;\n        this.last_wait_timestamp = Date.now();\n\n        let sc_01:Label = find(\"Canvas/outturn_lose/SpriteSplash/sc_01\").getComponent(Label);\n        sc_01.enabled = false;\n\n        let sc_02:Label = find(\"Canvas/outturn_lose/SpriteSplash/sc_02\").getComponent(Label);\n        sc_02.enabled = false;\n\n        //顯示總分數\n        let sc_03:Label = find(\"Canvas/outturn_lose/SpriteSplash/sc_03\").getComponent(Label);\n        sc_03.enabled = false;\n        sc_03.string = getST().play_totle_score.toString();\n\n        let node_btn_back = find(\"Canvas/outturn_lose/btn_back_mis\");\n        node_btn_back.active = false;\n\n        let node_btn_agn = find(\"Canvas/outturn_lose/btn_agn\");\n        node_btn_agn.active = false;\n\n        AudioManager.stopMusic();\n\n        return true;\n    }\n    private st_lose_update():void{\n        if(this.state_win_lose_show == 0){\n            if(Date.now()-this.last_wait_timestamp>=1000){\n                let sc_01:Label = find(\"Canvas/outturn_lose/SpriteSplash/sc_01\").getComponent(Label);\n                sc_01.enabled = true;\n                this.state_win_lose_show = 1;\n                this.last_wait_timestamp = Date.now();\n               // AudioManager.playSound(\"5_info\");//關掉失敗音效\n            }\n        }\n        else if(this.state_win_lose_show == 1){\n            if(Date.now()-this.last_wait_timestamp>=1000){\n                let sc_02:Label = find(\"Canvas/outturn_lose/SpriteSplash/sc_02\").getComponent(Label);\n                sc_02.enabled = true;\n                this.state_win_lose_show = 2;\n                this.last_wait_timestamp = Date.now();\n            }\n        }\n        else if(this.state_win_lose_show == 2){\n            if(Date.now()-this.last_wait_timestamp>=1000){\n                let sc_03:Label = find(\"Canvas/outturn_lose/SpriteSplash/sc_03\").getComponent(Label);\n                sc_03.enabled = true;\n                this.state_win_lose_show = 3;\n                this.last_wait_timestamp = Date.now();\n            }\n        }\n        else if(this.state_win_lose_show == 3){\n            if(Date.now()-this.last_wait_timestamp>=1000){\n                this.state_win_lose_show = 4;\n        \n                let node_btn_back = find(\"Canvas/outturn_lose/btn_back_mis\");\n                node_btn_back.active = true;\n\n                let node_btn_agn = find(\"Canvas/outturn_lose/btn_agn\");\n                node_btn_agn.active = true;\n            }\n        }  \n    }\n\n    public input_event(event:EventTouch){\n \n        let number:number = this.node_input_number.indexOf((event.target as Node).name)+1;\n        \n        //取得實際按鈕數字\n        let real_number:number = this.input_btn_Number[number-1];\n\n        if(this.state == B_scene_state.st_show_result){//顯示結果跳過\n            this.last_wait_timestamp = Date.now()-20000;\n            return;\n        }\n\n        //不是在可以輸入的狀態就離開\n        if(!(this.state == B_scene_state.st_play_input || this.state == B_scene_state.st_show_result)){\n            if(this.state == B_scene_state.st_start){\n                this.play_sound(real_number);\n                if(this.state == B_scene_state.st_start){\n                    //是否顯示輸入按鈕數字\n                    if(this.input_btn_hide[number-1] == false){\n                        let mis_data = getST().get_mission_data();\n                        if(mis_data.LevelSet.ShowNumber == \"True\"){\n                            //顯示數字\n                            this.input_btn_hide[number-1] = true;\n                            let sprite:Sprite = (event.target as Node).getComponent(Sprite);\n                            let strFrameName:string[] = [ \"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\"];\n                            sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(strFrameName[real_number-1]);\n                        }\n                    }\n                }\n            }\n            return;\n        }\n\n        let mis_data = getST().get_mission_data();\n\n        //保留答案判斷\n        if(mis_data.LevelSet.RightRetain == \"True\"){\n            for(let i=this.input_count;i<this.anser_number.length;i++){\n                if(this.anser_number[i] == -1){\n                    break;   \n                }\n                this.input_count++;\n            }\n        }\n\n        if(this.input_count>=mis_data.LevelSet.NumberCount){\n            return;\n        }\n\n        //是否顯示輸入按鈕數字\n        if(this.input_btn_hide[number-1] == false){\n            if(mis_data.LevelSet.ShowNumber == \"True\"){\n                //顯示數字\n                this.input_btn_hide[number-1] = true;\n                let sprite:Sprite = (event.target as Node).getComponent(Sprite);\n                let strFrameName:string[] = [ \"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\"];\n                sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(strFrameName[real_number-1]);\n            }\n        }\n\n        this.anser_number[this.input_count] = real_number;\n\n        //設定按下的字\n        this.node_result_number[this.input_count].string = \"<color=#FFFFFF>\"+real_number+\"</color>\";\n        this.node_result_number[this.input_count].enabled = true;\n\n        this.input_count++;\n\n        this.play_sound(real_number);\n        \n    }\n\n\n    public set_Next_state(state:number):boolean{\n        console.log(\"set_Next_state:\"+state);\n        if(this.state_next == -1){\n            this.state_next = state;\n            return true;\n        }\n        return false;\n    }\n\n    \n    private _state_change(){\n        if(this.state_next == -1){\n            return;\n        }\n\n        let real_change:boolean = true;\n        switch(this.state_next){\n            case B_scene_state.st_init:\n                real_change = this.st_init_in();\n                break;\n            case B_scene_state.st_into_animation:  \n                real_change = this.st_into_animation_in();\n                break;\n            case B_scene_state.st_start:\n                real_change = this.st_start_in();\n                break;\n            case B_scene_state.st_play_question_sound:\n                real_change = this.st_play_question_sound_in();\n                break;\n            case B_scene_state.st_play_input:\n                real_change = this.st_play_input_in();\n                break;\n            case B_scene_state.st_show_result:\n                real_change = this.st_show_result_in();\n                break;\n            case B_scene_state.st_win:\n                real_change = this.st_win_in();\n                break;\n            case B_scene_state.st_timeup_animation:\n                real_change = this.st_timeup_animation_in();\n                break;\n            case B_scene_state.st_lose: \n                real_change = this.st_lose_in();\n                break;\n            \n\n        }\n        if(real_change){\n            this.state = this.state_next;\n            this.state_next = -1;\n        }\n    }\n\n    private _state_update(){\n\n        switch(this.state){\n \n            case B_scene_state.st_init:\n                this.set_Next_state(B_scene_state.st_into_animation);\n                break;\n            case B_scene_state.st_into_animation:  \n                this.st_into_animation_update();   \n                break;\n            case B_scene_state.st_play_question_sound:\n                this.st_play_question_sound_update();\n                break;\n            case B_scene_state.st_play_input:\n                this.st_play_input_update();\n                break;\n            case B_scene_state.st_show_result:\n                this.st_show_result_update();\n                break;\n            case B_scene_state.st_win:\n                this.st_win_update();\n                break;\n            case B_scene_state.st_timeup_animation:\n                this.st_timeup_animation_update();\n                break;\n            case B_scene_state.st_lose:\n                this.st_lose_update();\n                break;\n\n        }\n    }\n    \n\n\n    //播放輸入與提示音效\n    private play_sound(_number:number){\n        let mis_data = getST().get_mission_data();\n        \n        //音效預先載入\n        let str_sound_Flute:string[] = [\n            \"23_flute_do\",\"24_flute_re\",\"25_flute_mi\",\"26_flute_fa\",\"27_flute_so\",\n            \"28_flute_la\",\"29_flute_si\",\"30_flute_do1\",\"31_flute_re1\"];\n        let str_sound_Guitar:string[] = [\n            \"32_guitar_do\",\"33_guitar_re\",\"34_guitar_mi\",\"35_guitar_fa\",\"36_guitar_so\",\n            \"37_guitar_la\",\"38_guitar_si\",\"39_guitar_do1\",\"40_guitar_re1\"];\n        let str_sound_Piano:string[] = [\n            \"14_Piano_Do\",\"15_Piano_Re\",\"16_Piano_Mi\",\"17_Piano_Fa\",\"18_Piano_So\",\n            \"19_Piano_La\",\"20_Piano_Si\",\"21_Piano_Do_1\",\"22_Piano_Re_1\"];\n               \n\n        if(mis_data.LevelSet.timbre==1){\n            AudioManager.playSound(str_sound_Piano[_number-1]);\n        }\n        else if(mis_data.LevelSet.timbre==2){\n            AudioManager.playSound(str_sound_Flute[_number-1]);\n        }\n        else{\n            AudioManager.playSound(str_sound_Guitar[_number-1]);\n        }\n        \n    }\n\n\n    private switchNS(nodeName:string,sw:boolean){\n        let node:Node = find(nodeName);\n        node.getComponent(ns_SwitchSprite).switchSelect(sw);\n    }\n    private switchNS_lock(nodeName:string,sw:boolean){\n        let node:Node = find(nodeName);\n        node.getComponent(ns_SwitchSprite).switchLock(sw);\n    }\n\n    public update(){\n        //經過時間\n        let elapsed_time = Date.now() - this.last_timestamp;\n        \n        if(elapsed_time < 33){\n            return;\n        }\n        this.last_timestamp = Date.now();\n  \n\n\n        //時間更新\n        if(this.state == B_scene_state.st_play_input || \n            this.state == B_scene_state.st_play_question_sound ||\n            this.state == B_scene_state.st_start){\n                //----測試除錯用--------------------\n                if(getST().getIsInTestMode()){\n                    elapsed_time = 0;   \n                }\n                //---------------------------------\n                if(this.cLastPlayTime.update(elapsed_time)){\n                    this.set_Next_state(B_scene_state.st_timeup_animation);\n                }\n        }\n\n        this._state_update();\n        this._state_change();  \n    }\n    \n}\n\n\n\nvar _proc_B_scene:Proc_B_scene = null;\n\n\nexport function getProc_B_scene() {\n\n    if(_proc_B_scene === null) {\n        _proc_B_scene = new Proc_B_scene();\n        console.log('new Proc_B_scene');\n    }\n    return _proc_B_scene;\n} \n\n","import { find, EventTouch,Node,RichText, Sprite, Color,Label, log} from 'cc';\nimport { common_getEventTarget,EventEnum_Scene,common_bind_touch_start,getST } from './Common';\nimport { AudioManager } from './AudioManager';\nimport { SpriteFrameManager } from './SpriteFrameManager';\nimport { CLastPlayTime } from './CLastPlayTime';\n\n\n\n\n\n//遊戲流程\nenum C_scene_state  { \n    st_none=100,    //無狀態\n    st_init,        //初始化 \n    st_into_animation, //进入动画\n    st_start, //开始答題的主畫面，等待玩家選擇\n    st_play, //答題中\n    st_win, //赢了\n    st_lose, //输了\n    st_end, //结束\n}\n\nenum light_state  {\n    lt_none=100,    //無狀態\n    lt_show,\n    lt_hide,\n    lt_waitnext,\n    \n}\n\nclass cQuestion{\n    private state:number = light_state.lt_none;\n    private input_light:Node[] = []; \n    private question_number:number[] = [];//200 題\n    private anser_number:number[] = [];//使用者答案 累積\n    private q_step:number = 0;  //目前第幾的題目\n    private wait_user_anser_time:number = 0;\n    private wait_show_time:number = 0;\n    private wait_next_time:number = 0;\n \n    private max_question_number:number = 350;//最高題目數量\n\n    private blLose:boolean = false;//失敗\n\n    private input_btn_Number:number[] = [];//輸入按鈕實際對應的數字\n    private input_btn_hide:boolean[] = [];//輸入按鈕隱藏實際數字\n    private node_input_name:string[] = [];\n\n    private res_tip:number[][] = [];\n\n    public init(){\n        this.state = light_state.lt_none;\n        this.input_light = [];\n        this.question_number = [];\n        this.anser_number = [];\n     \n        this.q_step = 0;\n\n        //初始化按鈕數字\n        let mis_data = getST().get_mission_data();\n        for (let i = 0; i < 9; i++) {\n            this.input_btn_hide.push(false);\n            if(mis_data.LevelSet.PositionShift == 0){\n                this.input_btn_Number.push(i+1);\n            }\n            else if (mis_data.LevelSet.PositionShift > 0) {\n                let tmp_nb = i+1-mis_data.LevelSet.PositionShift;\n                if(tmp_nb<=0){\n                    tmp_nb = tmp_nb+9;\n                }\n                this.input_btn_Number.push(tmp_nb);\n            }\n            else if (mis_data.LevelSet.PositionShift < 0) {\n                if(Math.floor(Math.random()*2)==0){\n                    this.input_btn_Number.push(i+1);\n                }\n                else{\n                    this.input_btn_Number.unshift(i+1);\n                }\n            }\n        }\n        \n    }\n\n    public start () {\n        this.blLose = false;\n\n        this.input_btn_hide = [];\n        \n        for (let i = 0; i < 9; i++) \n         this.input_btn_hide.push(false);\n\n        //算出題目\n        let mis_data = getST().get_mission_data();\n        this.q_step = 0;\n        this.anser_number = [];\n        this.question_number = [];\n        for(let i=0;i<this.max_question_number;i++){\n            let number = 0;\n            if(Array.isArray(mis_data.LevelSet.QuestionType)){\n                number = mis_data.LevelSet.QuestionType[i%mis_data.LevelSet.QuestionType.length];    \n            }\n            else{\n                number = Math.floor(Math.random()*9)+1;    \n            }\n           \n            this.question_number.push(number);\n            this.anser_number.push(-1);\n        }\n        console.log(mis_data.LevelSet.QuestionType);\n        console.log(this.question_number);\n        \n        \n        this.next_question();\n    }\n\n    private next_question(){\n        //判斷輸贏\n        if(this.q_step > 0 ){\n            if(this.anser_number[this.q_step-1] == -1){\n                let cnt = 0;\n                for(let i=0;i<this.q_step;i++){\n                    if(this.anser_number[i] == -1){\n                        cnt++;\n                    }\n                }\n                if(cnt>=3){\n                    this.blLose = true;\n                }\n            }\n            if(this.blLose == false){\n                for(let i=0;i<this.q_step;i++){\n                    if(this.anser_number[i] != -1){\n                        if(this.anser_number[i] != this.question_number[i]){\n                            this.blLose = true;\n                            break;\n                        }\n                    }\n                }\n            }   \n        }\n        //---test--------\n        //this.blLose = false;\n        //----------------\n\n        if(this.blLose){\n            return;\n        }\n\n        this.q_step++;\n        let mis_data = getST().get_mission_data();\n        //時間\n        this.wait_show_time = Date.now()+500;//1200\n  \n        if(Array.isArray(mis_data.LevelSet.QuestionInterval)){\n           let pos = Math.floor(Math.random() * mis_data.LevelSet.QuestionInterval.length); \n           this.wait_user_anser_time = mis_data.LevelSet.QuestionInterval[pos]*1000+this.wait_show_time;\n        }\n        else{\n            this.wait_user_anser_time = mis_data.LevelSet.QuestionInterval*1000+this.wait_show_time;\n        }\n        this.wait_next_time = this.wait_user_anser_time+0;//500\n        //顯示\n        this.reset_input_light();\n        this.state = light_state.lt_show;\n\n\n        let q_num = this.question_number[this.q_step-1];\n        let light_pos = this.input_btn_Number.indexOf(q_num);\n        if(mis_data.LevelSet.AnswerPositionShift != 0){//答案燈號移動\n            if(mis_data.LevelSet.AnswerPositionShift ==4){ //4的時候額外處理 針對對腳問題\n                if(light_pos != 8){ //中間格子跳過\n                    let newArray:number[] = [4,5,6,7,0,1,2,3];\n                    light_pos = newArray[light_pos];\n                }\n            }\n            else{\n                light_pos = light_pos - mis_data.LevelSet.AnswerPositionShift;\n                if(light_pos<0){\n                    light_pos = light_pos+9;\n                }\n            }\n        }\n\n        let sprite:Sprite = this.input_light[light_pos].getComponent(Sprite);\n\n     \n\n        \n        if(this.input_btn_hide[light_pos]){\n            \n            let real_number = this.input_btn_Number[light_pos]; // 量顏色\n            let strFrameName:string[] = [ \"l_1\",\"l_2\",\"l_3\",\"l_4\",\"l_5\",\"l_6\",\"l_7\",\"l_8\",\"l_9\"];\n            sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(strFrameName[real_number-1]);\n        }\n        else\n            sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"L3_未知圖騰3_高亮\");\n\n        //更新提示\n        this.update_tip();\n\n    }\n\n    private reset_input_light(){\n        //回覆圖案\n        for(let i=0;i<9;i++){\n            let sprite:Sprite = this.input_light[i].getComponent(Sprite);\n\n            let strFrameName:string[] = [ \"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\"];\n            if(this.input_btn_hide[i]){\n                let real_number = this.input_btn_Number[i];\n                sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(strFrameName[real_number-1]);\n            }\n            else{\n                sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"L3_未知圖騰_藍\");\n            }\n        }\n    }\n\n    //播放輸入與提示音效\n    private play_sound(_number:number){\n        let mis_data = getST().get_mission_data();\n        \n        //音效預先載入\n        let str_sound_Flute:string[] = [\n            \"23_flute_do\",\"24_flute_re\",\"25_flute_mi\",\"26_flute_fa\",\"27_flute_so\",\n            \"28_flute_la\",\"29_flute_si\",\"30_flute_do1\",\"31_flute_re1\"];\n        let str_sound_Guitar:string[] = [\n            \"32_guitar_do\",\"33_guitar_re\",\"34_guitar_mi\",\"35_guitar_fa\",\"36_guitar_so\",\n            \"37_guitar_la\",\"38_guitar_si\",\"39_guitar_do1\",\"40_guitar_re1\"];\n        let str_sound_Piano:string[] = [\n            \"14_Piano_Do\",\"15_Piano_Re\",\"16_Piano_Mi\",\"17_Piano_Fa\",\"18_Piano_So\",\n            \"19_Piano_La\",\"20_Piano_Si\",\"21_Piano_Do_1\",\"22_Piano_Re_1\"];\n               \n\n        if(mis_data.LevelSet.timbre==1){\n            AudioManager.playSound(str_sound_Piano[_number-1]);\n        }\n        else if(mis_data.LevelSet.timbre==2){\n            AudioManager.playSound(str_sound_Flute[_number-1]);\n        }\n        else{\n            AudioManager.playSound(str_sound_Guitar[_number-1]);\n        }\n        \n    }\n\n    public player_input(input_light:Node){\n        \n        let number:number = this.node_input_name.indexOf(input_light.name)+1;\n        let real_number:number = this.input_btn_Number[number-1];\n\n        \n        let blRet:boolean = false;\n        if(this.state == light_state.lt_none){// || this.state == light_state.lt_waitnext\n            blRet = true;\n        }\n        if(!blRet){\n            if(this.anser_number[this.q_step-1]!=-1){\n                blRet = true;\n            }\n        }\n        if(!blRet){\n            //有輸入錯誤的就不繼續\n            for(let i=0;i<this.q_step;i++){\n                if(this.anser_number[i] != -1){\n                    if(this.anser_number[i] != this.question_number[i]){\n                        blRet = true;\n                        break;\n                    }\n                }\n            }\n        }\n        let blplay:boolean = true;\n        if(!blRet){\n            for(let i=0;i<this.q_step;i++){\n                if(this.anser_number[i] == -1){\n                    this.anser_number[i] = real_number;\n                    if(this.anser_number[i] != this.question_number[i]){\n                        blplay = false;\n                        AudioManager.playSound(\"13_answer02\");    \n                    }\n                    break;\n                }\n            }\n        }\n        if(blplay){\n            this.play_sound(real_number);\n        }\n        if(blRet){\n            return;\n        }   \n    \n\n        let mis_data = getST().get_mission_data();\n\n        if(mis_data.LevelSet.ShowNumber == \"True\"){\n            //顯示數字\n            this.input_btn_hide[number-1] = true;\n        }\n        \n        this.update_tip();\n        \n\n        this.reset_input_light();\n\n        //判斷輸入錯誤的輸贏\n        for(let i=0;i<this.q_step;i++){\n            if(this.anser_number[i] != -1){\n                if(this.anser_number[i] != this.question_number[i]){\n                    this.wait_next_time = Date.now()+500;\n                    this.state = light_state.lt_waitnext;\n                    break;\n                }\n            }\n        }\n    }\n\n    private update_tip(){\n        let tip_1:number[] = [];\n        let tip_2:number[] = [];\n        for(let i=0;i<6;i++){\n            tip_1.push(-1);\n            tip_2.push(-1);\n        }\n        if(this.q_step  > 0){\n            //let imax = 6;\n            let imax = this.q_step%6+1;//每6個就清空一次\n\n            if(imax>this.q_step){\n                imax = this.q_step;\n            }\n            let pos2 = 0;\n            for(let i=imax-1;i>=0;i--){\n                let pos = this.q_step-i-1;\n            \n                tip_2[pos2] = this.anser_number[pos];\n\n                if(this.anser_number[pos] != -1){\n                    if(this.anser_number[pos] == this.question_number[pos]){\n                        tip_1[pos2] = 1;\n                    }\n                    else{\n                        tip_1[pos2] = 2;\n                    }\n                }\n                else{\n                    tip_1[pos2] = 0;\n                }\n                pos2++;\n                \n            }\n        }\n        this.res_tip = [];\n        this.res_tip.push(tip_1);\n        this.res_tip.push(tip_2);\n    }\n\n    //編號依序\n    public set_input_light(input_light:Node[],_node_input_name:string[]){\n        this.input_light = input_light;\n        this.node_input_name = _node_input_name;\n        this.reset_input_light();\n    }\n\n    //是否已經失敗\n    public get_blloae():boolean{\n        return this.blLose;\n    }\n\n    //取得提示狀態\n    public get_ans_tip():number[][]{\n        \n        return this.res_tip;\n    }\n\n    public update(){\n        if(this.blLose){\n            return;\n        }\n\n        switch(this.state){\n            case light_state.lt_show:\n                if(Date.now()>=this.wait_show_time){\n                    this.state = light_state.lt_hide;\n                    this.reset_input_light();\n                }\n                break;\n            case light_state.lt_hide:\n                if(Date.now()>=this.wait_user_anser_time){\n                    this.state = light_state.lt_waitnext;\n                }\n\n            case light_state.lt_waitnext:\n                if(Date.now()>=this.wait_next_time){\n                    this.next_question();\n                }\n                break;\n            }\n\n    }\n}\n\n\nclass Proc_C_scene{ \n    \n    private state:number = C_scene_state.st_none;\n    private state_next:number = -1;//-1表示沒有下一個狀態\n\n    private cquestion:cQuestion = null;\n    \n    private last_timestamp:number = 0;//主要FPS上一次時間\n    private cLastPlayTime:CLastPlayTime = null;\n    private last_wait_timestamp:number = 0;//計算等待時間的上一次時間(timestamp)\n\n    private node_result_number:RichText[] = [];//結果文字\n    private node_result_light:Sprite[] = [];//結果的燈號\n\n    private node_start_last_time:Label = null;//開始功能的倒數字\n\n\n    private input_nodes:Node[] = [];\n\n    private state_win_lose_show:number = 0;//顯示贏或輸的階段 0 1 2\n\n\n    //結果文字node路徑\n    private node_result_number_path:string[] = [\n        \"Canvas/數字位置/數字1\",\"Canvas/數字位置/數字2\",\"Canvas/數字位置/數字3\",\n        \"Canvas/數字位置/數字4\",\"Canvas/數字位置/數字5\",\"Canvas/數字位置/數字6\"\n    ];\n    \n    //結果燈號node路徑\n    private node_result_light_path:string[] = [\n        \"Canvas/tip_Light燈號位置/green_light\",\"Canvas/tip_Light燈號位置/green_light-001\",\n        \"Canvas/tip_Light燈號位置/green_light-002\",\"Canvas/tip_Light燈號位置/green_light-003\",\n        \"Canvas/tip_Light燈號位置/green_light-004\",\"Canvas/tip_Light燈號位置/green_light-005\",\n    ];\n\n    //輸入數字的node路徑\n    private node_input_number_path:string[] = [\n        \"Canvas/Layer 1/Node-001/1_icon\",\"Canvas/Layer 1/Node-001/2_icon\",\n        \"Canvas/Layer 1/Node-001/3_icon\",\"Canvas/Layer 1/Node-001/4_icon\",\n        \"Canvas/Layer 1/Node-001/5_icon\",\"Canvas/Layer 1/Node-001/6_icon\",\n        \"Canvas/Layer 1/Node-001/7_icon\",\"Canvas/Layer 1/Node-001/8_icon\",\n        \"Canvas/Layer 1/Node-001/9_icon\"\n    ];\n    //輸入數字的node名字\n    private node_input_name:string[] = [\n        \"1_icon\",\"2_icon\",\"3_icon\",\"4_icon\",\"5_icon\",\n        \"6_icon\",\"7_icon\",\"8_icon\",\"9_icon\"\n    ];\n\n    \n    private blPlay10TimesSound:boolean = false;//倒數10秒音效\n    private blPlayCount01Sound:boolean = false;//跑分音效\n    \n    \n    public init(){\n        this.state = C_scene_state.st_none;\n        this.set_Next_state(C_scene_state.st_init);\n        this.last_timestamp = Date.now();\n        this.cLastPlayTime =new CLastPlayTime();\n\n\n        common_bind_touch_start(\"Canvas/Arrow\",this.go_select,this); \n\n        //提示動畫初始化\n        let node_lose:Node = find(\"Canvas/outturn_lose\");\n        node_lose.active = false;  \n        let node_win:Node = find(\"Canvas/outturn_win\");\n        node_win.active = false;  \n        let node_start:Node = find(\"Canvas/start\");\n        node_start.active = true;  \n        let node_timesup:Node = find(\"Canvas/times_up\");\n        node_timesup.active = false;\n\n        //開場倒數數字\n        this.node_start_last_time = find(\"Canvas/start/time\").getComponent(Label);\n\n        //回到選擇關卡\n        common_bind_touch_start(\"Canvas/outturn_win/btn_back_mis\",this.go_select,this);\n        common_bind_touch_start(\"Canvas/outturn_lose/btn_back_mis\",this.go_select,this);\n        \n        //再一次\n        common_bind_touch_start(\"Canvas/outturn_lose/btn_agn\",this.go_again,this);\n\n    \n        this.input_nodes = [];\n        for(let i=0;i<this.node_input_number_path.length;i++){\n            let node:Node = find(this.node_input_number_path[i]);\n\n            node.off(Node.EventType.TOUCH_START, this.input_event, this);\n            node.on(Node.EventType.TOUCH_START, this.input_event, this);\n\n            this.input_nodes.push(node);\n        }\n\n        this.cquestion = new cQuestion();\n        this.cquestion.init();\n        this.cquestion.set_input_light(this.input_nodes,this.node_input_name);\n\n      \n    }\n\n    private go_select():void{\n        AudioManager.playSound(\"7_click01\");\n        common_getEventTarget().emit(EventEnum_Scene.Go_SelectScene);\n        \n    }\n\n    private go_again():void{\n        if(this.state == C_scene_state.st_lose){\n            AudioManager.playSound(\"7_click01\");\n            this.set_Next_state(C_scene_state.st_init);\n        }\n    }\n\n\n    private st_init_in():boolean{\n\n        let mis_data = getST().get_mission_data();\n        \n        //初始化 result node\n        this.node_result_number = [];\n        this.node_result_light = [];\n        for(let i=0;i<6;i++){\n            let node_label:Node = find(this.node_result_number_path[i]);\n            let richText:RichText = node_label.getComponent(RichText);\n            this.node_result_number.push(richText);\n\n            let node_label2:Node = find(this.node_result_light_path[i]);\n            let sprite:Sprite = node_label2.getComponent(Sprite);\n            this.node_result_light.push(sprite);\n        }\n        for(let i=0;i<6;i++){\n            this.node_result_number[i].enabled = false;\n            this.node_result_light[i].enabled=true;\n            let sprite:Sprite = this.node_result_light[i].getComponent(Sprite);\n            sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"白燈\");\n        }\n        \n\n        //剩餘秒數\n        this.cLastPlayTime.start(mis_data.LevelSet.Time*1000);\n        \n        //改變標題文字\n        let node_labe_title:Node = find(\"Canvas/標題\");\n        let richText_title:RichText = node_labe_title.getComponent(RichText);\n        richText_title.string = \"<color=#FFFFFF>\"+mis_data.GameLevel+\"</color>\";\n\n        //提示動畫初始化\n        let node_lose:Node = find(\"Canvas/outturn_lose\");\n        node_lose.active = false;  \n        let node_win:Node = find(\"Canvas/outturn_win\");\n        node_win.active = false;  \n        let node_start:Node = find(\"Canvas/start\");\n        node_start.active = true;  \n        let node_timesup:Node = find(\"Canvas/times_up\");\n        node_timesup.active = false;\n\n        //回覆輸入的圖案\n        for(let i=0;i<9;i++){\n            let node_input_number:Node = find(this.node_input_number_path[i]);\n            let sprite:Sprite = node_input_number.getComponent(Sprite);\n            sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"L3_未知圖騰_藍\");\n            \n        }\n\n        this.blPlay10TimesSound = false;\n        this.blPlayCount01Sound = false;\n        return true;\n    }\n\n    public st_into_animation_in():boolean{\n        this.last_wait_timestamp = Date.now()+3000;\n        AudioManager.playSound(\"8_9_countdown_and_start\");\n        return true;\n    }\n\n    public st_into_animation_update():void{\n        let last_time = this.last_wait_timestamp-Date.now();\n        if(last_time>=0){\n            let iLastTime = Math.floor(last_time/1000)+1;\n            \n            for(let i=0;i<3;i++){\n                let node_tmp:Node = find(\"Canvas/start/start_\"+(i+1));  \n                if(iLastTime == (i+1)){\n                    node_tmp.active = true;\n                }\n                else{\n                    node_tmp.active = false;\n                }\n            }\n            \n            this.node_start_last_time.string = \"...\"+(Math.floor(last_time/1000)).toString()+\"...\";\n        }\n        else{\n            this.set_Next_state(C_scene_state.st_start);\n            let node_start:Node = find(\"Canvas/start\");\n            node_start.active = false;  \n            \n            AudioManager.playMusic(\"3_bgm03\");\n        }\n    }\n\n    private st_start_in():boolean{\n        return true;\n    }\n\n    private st_play_in():boolean{\n        //關掉結果提示\n        for(let i=0;i<this.node_result_number.length;i++){\n            this.node_result_number[i].enabled = false;\n            let sprite:Sprite = this.node_result_light[i].getComponent(Sprite);\n            sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"白燈\");\n        }\n        \n        this.cquestion.start();\n        return true;\n    }\n\n    private st_play_update():void{\n        if(this.cquestion.get_blloae()){\n            this.set_Next_state(C_scene_state.st_lose);\n        }\n        else{\n            this.cquestion.update();\n        }\n        \n        let ans_tip = this.cquestion.get_ans_tip();\n\n        \n        for(let i=0;i<6;i++){\n            if(ans_tip[1][i] != -1){\n                this.node_result_number[i].string = \"<color=#FFFFFF>\"+ans_tip[1][i]+\"</color>\";\n                this.node_result_number[i].enabled = true;\n            }\n            else{\n                this.node_result_number[i].enabled = false;\n            }\n        }\n        //設定燈號\n        for(let i=0;i<6;i++){\n            let sprite:Sprite = this.node_result_light[i].getComponent(Sprite);\n            if(ans_tip[0][i] == 1){//綠\n                sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"綠燈\");\n            }\n            else if(ans_tip[0][i] == 2){//紅\n                sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"紅燈\");\n            }\n            else if(ans_tip[0][i] == 0){//黃\n                sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"黃燈\");\n            }\n            else{//-1 白\n                sprite.spriteFrame = SpriteFrameManager.getSpriteFrame(\"白燈\");\n            }\n        }\n\n    }\n    \n   \n    private st_win_in():boolean{\n\n        getST().setWin(this.cLastPlayTime.getLastPlayTime());\n        let node_win:Node = find(\"Canvas/outturn_win\");\n        node_win.active = true;\n        \n        this.state_win_lose_show = 0;\n        this.last_wait_timestamp = Date.now();\n        \n        //剩餘分數\n        let sc_01:Label = find(\"Canvas/outturn_win/SpriteSplash/Node/sc_01\").getComponent(Label);\n        sc_01.enabled = false;\n        \n        sc_01.string = \n        getST().play_last_time_m.toString().padStart(2, '0')+\":\"+\n        getST().play_last_time_s.toString().padStart(2, '0')+\":\"+\n        getST().play_last_time_ms.toString().padStart(2, '0');\n\n        //顯示關卡分數\n        let sc_02:Label = find(\"Canvas/outturn_win/SpriteSplash/Node/sc_02\").getComponent(Label);\n        sc_02.string = \"0\";\n        sc_02.enabled = false;\n\n        //顯示總分數\n        let sc_03:Label = find(\"Canvas/outturn_win/SpriteSplash/Node/sc_03\").getComponent(Label);\n        sc_03.string = \"0\";\n        sc_03.enabled = false;\n\n        //關掉按鈕\n        let node_btn_back:Node = find(\"Canvas/outturn_win/btn_back_mis\");\n        node_btn_back.active = false;\n\n        AudioManager.stopMusic();\n        AudioManager.playSound(\"4_bgm04\");\n\n        return true;\n    }\n    private st_win_update():void{\n        if(this.state_win_lose_show == 0){\n            if(Date.now()-this.last_wait_timestamp>=1000){\n                let sc_01:Label = find(\"Canvas/outturn_win/SpriteSplash/Node/sc_01\").getComponent(Label);\n                sc_01.enabled = true;\n                this.state_win_lose_show = 1;\n                this.last_wait_timestamp = Date.now();\n                \n            }\n        }\n        else if(this.state_win_lose_show == 1){\n            let showscore = Math.floor((getST().play_score/Math.pow(2, 20))*Math.pow(2, (Date.now()-this.last_wait_timestamp)/50));\n            if(Date.now()-this.last_wait_timestamp>=1000){\n                showscore = getST().play_score;\n                this.state_win_lose_show = 2;\n                this.last_wait_timestamp = Date.now();\n            }\n\n            let sc_02:Label = find(\"Canvas/outturn_win/SpriteSplash/Node/sc_02\").getComponent(Label);\n            if(sc_02.enabled == false)\n                sc_02.enabled = true;\n            sc_02.string = showscore.toString();\n\n            \n        }\n        else if(this.state_win_lose_show == 2){\n            let showscore = Math.floor((getST().play_totle_score/Math.pow(2, 20))*Math.pow(2, (Date.now()-this.last_wait_timestamp)/50));\n            if(Date.now()-this.last_wait_timestamp>=1000){\n                showscore = getST().play_totle_score;\n                this.state_win_lose_show = 3;\n                this.last_wait_timestamp = Date.now();\n            }\n            //顯示總分數\n            let sc_03:Label = find(\"Canvas/outturn_win/SpriteSplash/Node/sc_03\").getComponent(Label);\n            if(sc_03.enabled == false)\n                sc_03.enabled = true;\n            sc_03.string = showscore.toString();\n\n\n            if(this.blPlayCount01Sound == false){\n                if(Date.now()-this.last_wait_timestamp>=200){\n                    this.blPlayCount01Sound = true;\n                    AudioManager.playMusic(\"6_count01\");\n                }\n            }\n        }\n        else if(this.state_win_lose_show == 3){\n            let node_btn_back:Node = find(\"Canvas/outturn_win/btn_back_mis\");\n            node_btn_back.active = true;\n            this.state_win_lose_show = 4;\n            AudioManager.stopMusic();\n        }    \n    }\n   \n    private st_lose_in():boolean{\n        \n        getST().setLose(this.cLastPlayTime.getLastPlayTime());\n        \n        this.last_wait_timestamp = Date.now();\n        let node_lose:Node = find(\"Canvas/outturn_lose\");\n        node_lose.active = true;\n\n        this.state_win_lose_show = 0;\n        this.last_wait_timestamp = Date.now();\n\n        let sc_01:Label = find(\"Canvas/outturn_lose/SpriteSplash/sc_01\").getComponent(Label);\n        sc_01.enabled = false;\n\n        sc_01.string = \n        getST().play_last_time_m.toString().padStart(2, '0')+\":\"+\n        getST().play_last_time_s.toString().padStart(2, '0')+\":\"+\n        getST().play_last_time_ms.toString().padStart(2, '0');\n\n        let sc_02:Label = find(\"Canvas/outturn_lose/SpriteSplash/sc_02\").getComponent(Label);\n        sc_02.enabled = false;\n\n        //顯示總分數\n        let sc_03:Label = find(\"Canvas/outturn_lose/SpriteSplash/sc_03\").getComponent(Label);\n        sc_03.enabled = false;\n        sc_03.string = getST().play_totle_score.toString();\n\n        let node_btn_back = find(\"Canvas/outturn_lose/btn_back_mis\");\n        node_btn_back.active = false;\n\n        let node_btn_agn = find(\"Canvas/outturn_lose/btn_agn\");\n        node_btn_agn.active = false;\n\n        AudioManager.stopMusic();\n\n        return true;\n    }\n    private st_lose_update():void{\n        if(this.state_win_lose_show == 0){\n            if(Date.now()-this.last_wait_timestamp>=1000){\n                let sc_01:Label = find(\"Canvas/outturn_lose/SpriteSplash/sc_01\").getComponent(Label);\n                sc_01.enabled = true;\n                this.state_win_lose_show = 1;\n                this.last_wait_timestamp = Date.now();\n              //  AudioManager.playSound(\"5_info\");關掉失敗音效\n            }\n        }\n        else if(this.state_win_lose_show == 1){\n            if(Date.now()-this.last_wait_timestamp>=1000){\n                let sc_02:Label = find(\"Canvas/outturn_lose/SpriteSplash/sc_02\").getComponent(Label);\n                sc_02.enabled = true;\n                this.state_win_lose_show = 2;\n                this.last_wait_timestamp = Date.now();\n            }\n        }\n        else if(this.state_win_lose_show == 2){\n            if(Date.now()-this.last_wait_timestamp>=1000){\n                let sc_03:Label = find(\"Canvas/outturn_lose/SpriteSplash/sc_03\").getComponent(Label);\n                sc_03.enabled = true;\n                this.state_win_lose_show = 3;\n                this.last_wait_timestamp = Date.now();\n            }\n        }\n        else if(this.state_win_lose_show == 3){\n            if(Date.now()-this.last_wait_timestamp>=1000){\n                this.state_win_lose_show = 4;\n        \n                let node_btn_back = find(\"Canvas/outturn_lose/btn_back_mis\");\n                node_btn_back.active = true;\n\n                let node_btn_agn = find(\"Canvas/outturn_lose/btn_agn\");\n                node_btn_agn.active = true;\n            }\n        }    \n    }\n\n    public input_event(event:EventTouch){\n \n        //不是在可以輸入的狀態就離開\n        if(this.state != C_scene_state.st_play){\n            return;\n        }\n        AudioManager.playSound(\"11_click02\");\n        this.cquestion.player_input(event.target as Node);\n    }\n\n\n    public set_Next_state(state:number):boolean{\n        console.log(\"set_Next_state:\"+state);\n        if(this.state_next == -1){\n            this.state_next = state;\n            return true;\n        }\n        return false;\n    }\n\n    \n    private _state_change(){\n        if(this.state_next == -1){\n            return;\n        }\n\n        let real_change:boolean = true;\n        switch(this.state_next){\n            case C_scene_state.st_init:\n                real_change = this.st_init_in();\n                break;\n            case C_scene_state.st_into_animation:  \n                real_change = this.st_into_animation_in();\n                break;\n            case C_scene_state.st_start:\n                real_change = this.st_start_in();\n                break;\n            case C_scene_state.st_play:\n                real_change = this.st_play_in();\n                break;\n            case C_scene_state.st_win:\n                real_change = this.st_win_in();\n                break;\n            case C_scene_state.st_lose: \n                real_change = this.st_lose_in();\n                break;\n        }\n        if(real_change){\n            this.state = this.state_next;\n            this.state_next = -1;\n        }\n    }\n\n    private _state_update(){\n\n        switch(this.state){\n \n            case C_scene_state.st_init:\n                this.set_Next_state(C_scene_state.st_into_animation);\n                break;\n            case C_scene_state.st_into_animation:  \n                this.st_into_animation_update();   \n                break; \n  \n            case C_scene_state.st_start:\n                this.set_Next_state(C_scene_state.st_play);\n                break;\n            case C_scene_state.st_play:\n                this.st_play_update();\n                break;\n            case C_scene_state.st_win:\n                this.st_win_update();\n                break;\n            case C_scene_state.st_lose:\n                this.st_lose_update();\n                break;\n\n        }\n    }\n    \n\n    \n\n\n    public update(){\n        //經過時間\n        let elapsed_time = Date.now() - this.last_timestamp;\n        \n        if(elapsed_time < 33){\n            return;\n        }\n        this.last_timestamp = Date.now();\n  \n\n\n        //時間更新\n        if(this.state == C_scene_state.st_play || \n            this.state == C_scene_state.st_start){\n            //----測試除錯用--------------------\n            if(getST().getIsInTestMode()){\n                elapsed_time = 0;   \n            }\n            //---------------------------------\n            if(this.cLastPlayTime.update(elapsed_time)){\n                this.set_Next_state(C_scene_state.st_win);\n            }\n        }\n\n        this._state_update();\n        this._state_change();  \n    }\n}\n\n\n\nvar _proc_C_scene:Proc_C_scene = null;\n\n\nexport function getProc_C_scene() {\n\n    if(_proc_C_scene === null) {\n        _proc_C_scene = new Proc_C_scene();\n        console.log('new Proc_C_scene');\n    }\n    return _proc_C_scene;\n} \n\n","import { find, UITransform,Node,RichText,Label} from 'cc';\nimport { common_getEventTarget,EventEnum_Scene,common_bind_touch_start,getST } from './Common';\nimport { AudioManager } from './AudioManager';\n\nclass Proc_GameHome{ \n    public game_scene_name:string[]=[\"A_scene\",\"B_scene\",\"C_scene\",\"Rankings\"];\n    private game_scene_lable:string[]=[\"破解密碼\",\"尋找聲波\",\"攔截訊號\",\"戰績排行\"];\n\n    //回登入頁按鈕\n    private btn_goLogin_name:string[] = [\"Canvas/back/Button\"];\n\n    //到遊戲按鈕\n    private btn_goGame_name:string = \"Canvas/PageView\";\n\n    //到Info按鈕\n    private btn_goInfo_name:string = \"Canvas/info/Button\";\n\n    //換頁_左\n    private btn_Left_name: string = \"Canvas/箭頭_L\";\n    //換頁_右\n    private btn_Right_name: string = \"Canvas/箭頭_R\";\n\n\n    public gh_page:number=1;//遊戲主頁頁面選擇遊戲頁\n   \n    \n    public init():void{\n        this.updatePage();\n\n        //綁定輸入事件\n        for(let i=0;i<this.btn_goLogin_name.length;i++){\n            common_bind_touch_start(this.btn_goLogin_name[i],this.gh_show_exit,this);\n        }\n        common_bind_touch_start(\"Canvas/Exit_game/聲波密碼戰_確定\",this.goLogin_Y,this);\n        common_bind_touch_start(\"Canvas/Exit_game/聲波密碼戰_取消\",this.goLogin_N,this);\n\n\n        common_bind_touch_start(this.btn_goGame_name,this.goGame,this);\n        common_bind_touch_start(\"Canvas/RichText\",this.goGame,this);\n        common_bind_touch_start(this.btn_Left_name,this.gh_page_left,this);\n        common_bind_touch_start(this.btn_Right_name,this.gh_page_right,this);\n        common_bind_touch_start(this.btn_goInfo_name,this.goInfo,this);\n\n        if(getST().get_bl_open_test_debug()){\n            let debug_btn:Node = find(\"Canvas/debug_btn\");\n            debug_btn.active = true;\n\n            debug_btn.on(Node.EventType.TOUCH_START, function(){\n                if(getST().switchTestMode()){\n                    find(\"Canvas/debug_btn/Label_sw\").getComponent(Label).string = \"Open\";\n                }else{\n                    find(\"Canvas/debug_btn/Label_sw\").getComponent(Label).string = \"Close\";\n                }      \n            }, this);\n\n            if(getST().getIsInTestMode()){\n                find(\"Canvas/debug_btn/Label_sw\").getComponent(Label).string = \"Open\";\n            }\n            else{\n                find(\"Canvas/debug_btn/Label_sw\").getComponent(Label).string = \"Close\";\n            }\n        }\n    }\n\n    public gh_show_exit(){\n        AudioManager.playSound(\"7_click01\");\n        let node:Node = find(\"Canvas/Exit_game\");\n        node.active = true;\n    }\n\n    private goLogin_Y(){\n        AudioManager.stopMusic();\n        AudioManager.playSound(\"7_click01\");\n        window.location.href = \"../index.html\";\n    }\n\n    public goLogin_N(){\n        AudioManager.playSound(\"7_click01\");\n        let node:Node = find(\"Canvas/Exit_game\");\n        node.active = false;\n    }\n\n    private goInfo(){\n        common_getEventTarget().emit(EventEnum_Scene.Go_Info);\n        AudioManager.playSound(\"7_click01\");\n    }\n\n    private goGame():void{\n        if(this.gh_page == 4){\n            common_getEventTarget().emit(EventEnum_Scene.Go_Rankings);\n        }else{\n            getST().select_Game = this.gh_page;//遊戲\n            common_getEventTarget().emit(EventEnum_Scene.Go_SelectScene);\n        }\n        AudioManager.playSound(\"7_click01\");\n    }\n\n    public gh_page_left(){\n      \n        AudioManager.playSound(\"7_click01\");\n        if(this.gh_page>1){\n            this.gh_page--;\n        }\n        else{\n            this.gh_page = this.game_scene_name.length;  \n        }\n        this.updatePage();\n    }\n\n    \n\n  \n    \n    public gh_page_right(){\n \n        AudioManager.playSound(\"7_click01\");\n        let gh_MaxPage = this.game_scene_name.length;\n        \n        if(this.gh_page<gh_MaxPage){\n            this.gh_page++;\n        }\n        else{\n            this.gh_page = 1;  \n        }\n        this.updatePage();\n    }\n\n    public getGameSceneName():string{\n        return this.game_scene_name[this.gh_page-1];\n    }\n\n\n    public updatePage(): void{\n    \n        \n        let node:Node = find(\"Canvas/PageView/view/content\");\n        let contentNode:UITransform = node.getComponent(UITransform);\n    \n        if(contentNode){\n            contentNode.setAnchorPoint((this.gh_page-1)*0.25,0.5);\n        }\n\n        let node_label:Node = find(\"Canvas/RichText\");\n        let richText:RichText = node_label.getComponent(RichText);\n     \n        \n        if(richText){\n            richText.string = \"<b>\"+\"<color=#FFFFFF>\"+this.game_scene_lable[this.gh_page-1]+\"</color>\"+\"</b>\";\n        }\n    }\n    \n}\n\n\n\nvar _proc_gameHome:Proc_GameHome = null;\n\n\nexport function getProc_GameHome() {\n\n    if(_proc_gameHome === null) {\n        _proc_gameHome = new Proc_GameHome();\n        console.log('new Proc_GameHome');\n    }\n    return _proc_gameHome;\n} \n\n","import { find, UITransform,Node,RichText} from 'cc';\nimport { common_getEventTarget,EventEnum_Scene,common_bind_touch_start } from './Common';\nimport { AudioManager } from './AudioManager';\n\nclass Proc_Info{ \n   \n\n    //回主頁按鈕\n    private btn_goHome_name:string[] = [\"Canvas/back/Button\"];\n\n  \n    public init():void{\n\n        //綁定輸入事件\n        for(let i=0;i<this.btn_goHome_name.length;i++){\n            common_bind_touch_start(this.btn_goHome_name[i],this.goHome,this);\n        }\n\n         //N1\n         common_bind_touch_start(\"Canvas/聲波密碼戰_N1\",function(){\n            window.location.href = \"http://axis.chanliu.org/\";\n        }\n        ,this);\n        //N2\n        common_bind_touch_start(\"Canvas/聲波密碼戰_N2\",function(){\n            window.location.href = \"http://flames.chanliu.org/\";\n        }\n        ,this);\n        //N3\n        common_bind_touch_start(\"Canvas/聲波密碼戰_N3\",function(){\n            window.location.href = \"http://cachecache.chanliu.org/\";\n        }\n        ,this);\n    }\n\n\n    private goHome(){\n        AudioManager.playSound(\"7_click01\");\n        common_getEventTarget().emit(EventEnum_Scene.Go_GameHome);\n    }\n\n}\n\n\n\nvar _proc_info:Proc_Info = null;\n\n\nexport function getProc_Info() {\n\n    if(_proc_info === null) {\n        _proc_info = new Proc_Info();\n        console.log('new Proc_GameHome');\n    }\n    return _proc_info;\n} \n\n","import { find, UITransform,Node,RichText,AudioClip,resources} from 'cc';\nimport { common_getEventTarget,EventEnum_Scene,common_bind_touch_start,getST } from './Common';\nimport { AudioManager } from './AudioManager';\nimport { SpriteFrameManager } from './SpriteFrameManager';\n\nclass Proc_Login{ \n\n    //登入按鈕\n    private btn_goGamehome_name:string[] = [\n        \"Canvas/1/icon/Google_icon-001\",\"Canvas/1/icon/Facebook_icon\",\"Canvas/1/icon/apple\",\n        \"Canvas/1/登入button/Button-002\",\"Canvas/1/登入button/Button-003\",\"Canvas/stroy/toHome\"\n    ];\n\n    public isRunning:boolean = false;\n\n    private isLoading:boolean = false;\n    private wait_loading_time:number = 0;\n    \n\n    public init():void{\n        \n\n        //綁定輸入事件\n        for(let i=0;i<this.btn_goGamehome_name.length;i++){\n            common_bind_touch_start(this.btn_goGamehome_name[i],this.input_event,this);\n        }\n\n        let _node:Node = find(\"Canvas/stroy\");\n        let _node2:Node = find(\"Canvas/3\");\n        _node.active = false;\n        _node2.active = true;\n\n        this.isLoading = true;\n        this.wait_loading_time = Date.now()+1000;\n        this.isRunning = true;\n\n        \n\n    }\n\n    public update():void{\n        if(this.isLoading && (Date.now() > this.wait_loading_time)){\n            if(getST().isLoadOk == false){\n                return;\n            }\n            if(AudioManager.isLoadOk() == false){\n                return;\n            }\n            if(SpriteFrameManager.isLoadOk() == false){\n                return;\n            }\n            this.isLoading = false;\n            let _node:Node = find(\"Canvas/stroy\");\n            let _node2:Node = find(\"Canvas/3\");\n            _node.active = true;\n            _node2.active = false;\n            AudioManager.playMusic(\"2_bgm02\");\n        }\n\n    }\n\n    private input_event(){\n        this.isRunning = false;\n        common_getEventTarget().emit(EventEnum_Scene.Go_GameHome);\n        AudioManager.playSound(\"7_click01\");\n    }\n    \n}\n\n\n\nvar _proc_login:Proc_Login = null;\n\n\nexport function getProc_Login() {\n\n    if(_proc_login === null) {\n        _proc_login = new Proc_Login();\n        console.log('new Proc_Login');\n    }\n    return _proc_login;\n} \n\n","import { find, EventTouch,Node,RichText, Sprite, Color,Label, instantiate,log} from 'cc';\nimport { common_getEventTarget,EventEnum_Scene,common_bind_touch_start,getST,RankData } from './Common';\nimport { AudioManager } from './AudioManager';\nimport { SpriteFrameManager } from './SpriteFrameManager';\nimport { ns_SwitchSprite } from './ns_SwitchSprite';\n\n\n\n\n\n//遊戲流程\nenum R_scene_state  { \n    st_none=100,    //無狀態\n    st_init,        //初始化 \n    st_end, //结束\n}\n\nclass Proc_R_scene{ \n    \n    private state:number = R_scene_state.st_none;\n\n    private page_path_name:string[] = [\n        \"Canvas/BG/SpriteSplash-001/page_01\",\"Canvas/BG/SpriteSplash-001/page_02\",\n        \"Canvas/BG/SpriteSplash-001/page_03\",\"Canvas/BG/SpriteSplash-001/page_04\"\n    ];\n\n    //輸入數字的node路徑\n    private page_name:string[] = [\n        \"page_01\",\"page_02\",\"page_03\",\"page_04\"\n    ];\n\n    private my_info_type_path:string[] = [\n        \"Canvas/BG/playerinfo/資訊框_密碼\",\n        \"Canvas/BG/playerinfo/資訊框_聲波\",\n        \"Canvas/BG/playerinfo/資訊框_攔截\",\n        \"Canvas/BG/playerinfo/資訊框_總排行\",\n    ];\n    private my_info_type_Node:Node[] = [];\n\n    private baseItem:Node = null;\n    private cloneBase:Node = null;\n    //現在的頁數\n    private now_page:number = 1;\n    \n    \n    public init(){\n        \n        this.now_page = 1;\n\n        this.baseItem = find(\"Canvas/BG/SpriteSplash-001/ScrollView/view/content/basenode/item\");\n        this.baseItem.active = false;\n        this.cloneBase = find(\"Canvas/BG/SpriteSplash-001/ScrollView/view/content/clone\");\n        for(let i=0;i<this.my_info_type_path.length;i++){\n            this.my_info_type_Node[i] = find(this.my_info_type_path[i]);\n        }\n        \n        \n        \n        common_bind_touch_start(\"Canvas/BG/Arrow\",this.go_GameHome,this); \n        for(let i=0;i<this.page_path_name.length;i++){\n            common_bind_touch_start(this.page_path_name[i],this.pageDown,this);\n        }\n\n\n        this.update_page();\n\n        \n      \n    }\n\n    private pageDown(event:EventTouch){\n        let number:number = this.page_name.indexOf((event.target as Node).name);\n        this.now_page = number+1;\n        this.update_page();\n        AudioManager.playSound(\"7_click01\");\n\n    }\n\n    private update_page(){\n        for(let i=0;i<this.page_path_name.length;i++){\n            let _nodeNS:ns_SwitchSprite = find(this.page_path_name[i]).getComponent(ns_SwitchSprite);\n            \n            if(this.now_page == i+1){\n                _nodeNS.switchSelect(true);\n                this.my_info_type_Node[i].active = true;\n                find(\"Canvas/BG/playerinfo/name\").getComponent(Label).string = getST().myRankData[i].name;\n                find(\"Canvas/BG/playerinfo/sc01\").getComponent(Label).string = getST().myRankData[i].rank.toString();\n                find(\"Canvas/BG/playerinfo/sc02\").getComponent(Label).string = getST().myRankData[i].score.toString();\n\n                this.cloneBase.destroyAllChildren();\n                this.cloneBase.removeAllChildren();\n\n                console.log(\"this.now_page = \"+this.now_page);\n                let rankData:RankData[] = getST().rank_data[i];\n                for(let j=0;j<rankData.length;j++){\n                    let _item:Node = instantiate(this.baseItem);\n                    _item.active = true;\n                    _item.parent = this.cloneBase;\n\n                    _item.setPosition(0,j*(-55));\n                    _item.getChildByName(\"num\").getComponent(Label).string = rankData[j].rank.toString();\n                    _item.getChildByName(\"name\").getComponent(Label).string = rankData[j].name;\n                    _item.getChildByName(\"score\").getComponent(Label).string = rankData[j].score.toString();\n                    this.cloneBase.addChild(_item);\n                }\n            }\n            else{\n                this.my_info_type_Node[i].active = false;\n                _nodeNS.switchSelect(false);\n            }\n            \n\n        }\n    }\n\n\n    private go_GameHome():void{\n        AudioManager.playSound(\"7_click01\");\n        common_getEventTarget().emit(EventEnum_Scene.Go_GameHome);\n        \n    }\n\n\n\n}\n\n\n\nvar _proc_R_scene:Proc_R_scene = null;\n\n\nexport function getProc_R_scene() {\n\n    if(_proc_R_scene === null) {\n        _proc_R_scene = new Proc_R_scene();\n        console.log('new Proc_R_scene');\n    }\n    return _proc_R_scene;\n} \n\n","import { find, UITransform,Node,RichText,math,EventTouch} from 'cc';\nimport { common_getEventTarget,EventEnum_Scene,common_bind_touch_start,getST } from './Common';\nimport { AudioManager } from './AudioManager';\n\nclass Proc_Select_scene{ \n\n    public select_Game:number=1;//遊戲主頁頁面選擇遊戲頁\n    public select_Mission:number=1;//選擇的關卡\n\n    private btn_mis_path:string[] = [\n        \"Canvas/BG/ScrollView/view/content/mis_01\",\"Canvas/BG/ScrollView/view/content/mis_02\",\n        \"Canvas/BG/ScrollView/view/content/mis_03\",\"Canvas/BG/ScrollView/view/content/mis_04\",\n        \"Canvas/BG/ScrollView/view/content/mis_05\",\"Canvas/BG/ScrollView/view/content/mis_06\",\n        \"Canvas/BG/ScrollView/view/content/mis_07\",\"Canvas/BG/ScrollView/view/content/mis_08\",\n        \"Canvas/BG/ScrollView/view/content/mis_09\",\"Canvas/BG/ScrollView/view/content/mis_10\",\n        \"Canvas/BG/ScrollView/view/content/mis_11\",\"Canvas/BG/ScrollView/view/content/mis_12\",\n        \"Canvas/BG/ScrollView/view/content/mis_13\",\"Canvas/BG/ScrollView/view/content/mis_14\",\n        \"Canvas/BG/ScrollView/view/content/mis_15\",\"Canvas/BG/ScrollView/view/content/mis_16\",\n        \"Canvas/BG/ScrollView/view/content/mis_17\",\"Canvas/BG/ScrollView/view/content/mis_18\",\n        \"Canvas/BG/ScrollView/view/content/mis_19\",\"Canvas/BG/ScrollView/view/content/mis_20\"\n    ]\n\n    //關卡按鈕名字\n    private node_input_mis:string[] = [\n        \"mis_01\",\"mis_02\",\"mis_03\",\"mis_04\",\"mis_05\",\n        \"mis_06\",\"mis_07\",\"mis_08\",\"mis_09\",\"mis_10\",\n        \"mis_11\",\"mis_12\",\"mis_13\",\"mis_14\",\"mis_15\",\n        \"mis_16\",\"mis_17\",\"mis_18\",\"mis_19\",\"mis_20\"\n    ]\n    //關卡資訊文字\n    private node_mission_info:RichText[] = [];\n    \n    public init():void{\n        this.select_Game = getST().select_Game;\n        this.select_Mission = getST().play_Game_Max_Mission_level[this.select_Game-1];\n        getST().select_Mission = this.select_Mission;\n        \n        common_bind_touch_start(\"Canvas/BG/Arrow\",this.go_game_home,this);\n        common_bind_touch_start(\"Canvas/BG/SpriteSplash-001/go_game\",this.go_game,this);\n\n        for(let i=0;i<this.btn_mis_path.length;i++){\n            let node_mark_btn:Node = find(this.btn_mis_path[i]+\"/mark\");\n            let node_mis_btn:Node = find(this.btn_mis_path[i]);\n            node_mis_btn.off(Node.EventType.TOUCH_START, this.input_mission_event, this);\n            if(i<=(this.select_Mission-1)){\n                node_mark_btn.active = false;\n                node_mis_btn.on(Node.EventType.TOUCH_START, this.input_mission_event, this);\n            }\n            else{\n                node_mark_btn.active = true;\n            }\n        }\n        let node_mission_info_path:string[] = [\n            \"Canvas/BG/SpriteSplash-001/RichText_1\",\n            \"Canvas/BG/SpriteSplash-001/RichText_2\",\n            \"Canvas/BG/SpriteSplash-001/ScrollView/view/content/RichText_3\",\n        ]\n        for(let i=0;i<node_mission_info_path.length;i++){\n            let node_label_tmp:Node = find(node_mission_info_path[i]);\n            this.node_mission_info[i] = node_label_tmp.getComponent(RichText);\n        }\n\n        this.update_SelectF_and_info();\n    }\n\n    public input_mission_event(event:EventTouch){\n        let mission:number = this.node_input_mis.indexOf((event.target as Node).name)+1;\n        this.select_Mission = mission;\n        getST().select_Mission = mission;\n        this.update_SelectF_and_info();\n        AudioManager.playSound(\"7_click01\");\n    }\n\n\n    public update_SelectF_and_info():void{\n        let node_btn:Node = find(this.btn_mis_path[this.select_Mission-1]);\n        let node_sf:Node = find(\"Canvas/BG/ScrollView/view/content/selectF\");\n        let btn_pos:math.Vec3 = node_btn.getPosition();\n        node_sf.setPosition(btn_pos.x,btn_pos.y+56,0);\n\n        let mis_data:any = getST().get_mission_data();\n        \n        \n        this.node_mission_info[0].string = \"<color=#FFFFFF>\"+mis_data.Information.Difficulty+\"</color>\";\n        this.node_mission_info[1].string = \"<color=#FFFFFF>\"+mis_data.LevelSet.Time+\"秒</color>\";\n        this.node_mission_info[2].string = \"<color=#FFFFFF>\"+mis_data.Information.Description+\"</color>\";//mis_data.Information.Description\n        console.log(mis_data.Information.Description);\n        \n    }\n\n    private go_game_home():void{\n        AudioManager.playSound(\"7_click01\");\n        common_getEventTarget().emit(EventEnum_Scene.Go_GameHome);\n    }\n\n    private go_game():void{\n        AudioManager.playSound(\"7_click01\");\n        if(this.select_Game==1){\n            common_getEventTarget().emit(EventEnum_Scene.Go_Game_A);\n        }\n        else if(this.select_Game==2){\n            common_getEventTarget().emit(EventEnum_Scene.Go_Game_B);\n        }\n        else if(this.select_Game==3){\n            common_getEventTarget().emit(EventEnum_Scene.Go_Game_C);\n        }\n    }\n}\n\n\n\nvar _proc_Select_scene:Proc_Select_scene = null;\n\n\nexport function getProc_Select_scene() {\n\n    if(_proc_Select_scene === null) {\n        _proc_Select_scene = new Proc_Select_scene();\n        console.log('new Proc_Select_scene');\n    }\n    return _proc_Select_scene;\n} \n\n","import { assert, assetManager, log, SpriteFrame,resources } from \"cc\";\n\nexport class SpriteFrameManager {\n\n    private static _cachedSpriteFrameMap: Record<string, SpriteFrame> = {};\n    private static _spriteName: string[]= [];\n\n    // init AudioManager in GameRoot component.\n    public static init () {\n        log('Init SpriteFrameManager !');\n    }\n\n    //是否載入完成\n    public static isLoadOk ():boolean {\n        for (let key in SpriteFrameManager._cachedSpriteFrameMap) {\n            if(SpriteFrameManager._cachedSpriteFrameMap[key] == null) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    public static preloadSpriteFrame (name: string) {\n        const path = `img/${name}/spriteFrame`;\n        if(path in SpriteFrameManager._spriteName) {\n            return;\n        }\n        SpriteFrameManager._spriteName.push(path);\n        SpriteFrameManager._cachedSpriteFrameMap[path] = null;\n        resources.load(path, SpriteFrame, (err, sprite_frame) => {\n            if (err) {\n                console.warn(err);\n                return;\n            }\n            \n            SpriteFrameManager._cachedSpriteFrameMap[path] = sprite_frame;\n        });\n    }\n\n    public static getSpriteFrame(name: string): SpriteFrame {\n        \n        const path = `img/${name}/spriteFrame`;\n        return SpriteFrameManager._cachedSpriteFrameMap[path];\n        \n    }\n}"]}