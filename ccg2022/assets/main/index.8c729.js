System.register("chunks:///_virtual/AudioManager.ts",["cc"],(function(o){"use strict";var a,u,n,i,e;return{setters:[function(o){a=o.cclegacy,u=o.log,n=o.assetManager,i=o.AudioClip,e=o.assert}],execute:function(){a._RF.push({},"a965bLEY89B1L+nKUSxBq5x","AudioManager",void 0);var c=o("AudioManager",function(){function o(){}return o.init=function(a){u("Init AudioManager !"),o._audioSource=a},o.isLoadOk=function(){for(var a in o._cachedAudioClipMap)if(null==o._cachedAudioClipMap[a])return!1;return!0},o.playMusic=function(a){var u="mp3/"+a,n=o._cachedAudioClipMap[u];if(n){var i=o._audioSource;i.stop(),i.clip=n,i.play(),console.log("AudioManager play music "+a)}},o.stopMusic=function(){o._audioSource.stop()},o.preloadSound=function(a){var u,e="mp3/"+a;e in o._soundName||(o._soundName.push(e),o._cachedAudioClipMap[e]=null,null==(u=n.resources)||u.load(e,i,(function(a,u){a?console.warn(a):o._cachedAudioClipMap[e]=u})))},o.playSound=function(a){var u=o._audioSource;e(u,"AudioManager not inited!"),console.log("AudioManager play sound "+a);var c="mp3/"+a,d=o._cachedAudioClipMap[c];if(d)u.playOneShot(d,1);else{var r;if(c in o._soundName)return;o._soundName.push(c),o._cachedAudioClipMap[c]=null,null==(r=n.resources)||r.load(c,i,(function(a,n){a?console.warn(a):(o._cachedAudioClipMap[c]=n,u.playOneShot(n,1))}))}},o}());c._audioSource=void 0,c._cachedAudioClipMap={},c._soundName=[],a._RF.pop()}}}));

System.register("chunks:///_virtual/CLastPlayTime.ts",["cc","./AudioManager.ts"],(function(t){"use strict";var i,a,s,e;return{setters:[function(t){i=t.cclegacy,a=t.find,s=t.RichText},function(t){e=t.AudioManager}],execute:function(){i._RF.push({},"14c91Kh17tGbIIxzLDMpkDw","CLastPlayTime",void 0);t("CLastPlayTime",function(){function t(){this.richText_time=null,this.last_play_time=0,this.blEnd=!0,this.blPlay10TimesSound=!1,this.blEnd=!0,this.last_play_time=0,this.blPlay10TimesSound=!1}var i=t.prototype;return i.start=function(t){var i=a("Canvas/TimeText");this.richText_time=i.getComponent(s),this.last_play_time=t,this.blEnd=!1,this.blPlay10TimesSound=!1,this.ui_update()},i.getLastPlayTime=function(){return this.last_play_time},i.ui_update=function(){if(null!=this.richText_time){var t=Math.floor(this.last_play_time/1e3%60),i=Math.floor(this.last_play_time/1e3/60),a=Math.floor(this.last_play_time%1e3/10),s=t.toString().padStart(2,"0"),e=i.toString().padStart(2,"0"),l=a.toString().padStart(2,"0");this.richText_time.string="<color=#FFFFFF>"+e+":"+s+":"+l+"</color>"}},i.update=function(t){return!this.blEnd&&(this.last_play_time-=t,this.last_play_time<=0&&(this.last_play_time=0),this.ui_update(),this.last_play_time<=0?(this.blEnd=!0,!0):(0==this.blPlay10TimesSound&&this.last_play_time<=3e3&&(this.blPlay10TimesSound=!0,e.playSound("8_9_countdown_and_start")),!1))},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/Common.ts",["cc"],(function(t){"use strict";var e,s,n,i,o,a;return{setters:[function(t){e=t.cclegacy,s=t.find,n=t.Node,i=t.EventTarget,o=t.resources,a=t.TextAsset}],execute:function(){t({EventEnum_Scene:void 0,common_bind_touch_start:function(t,e,i){var o=s(t);o?(o.off(n.EventType.TOUCH_START,e,i),o.on(n.EventType.TOUCH_START,e,i)):console.log("common_bind_touch_start: node not found -> "+t)},common_getEventTarget:function(){null===l&&(l=new i,console.log("new eventTarget"));return l},getST:function(){null===m&&(m=new c,console.log("new store_data"));return m}}),e._RF.push({},"43dd8KPl6FFw5JF3bDrgadV","Common",void 0);var _,l=null;!function(t){t[t.Go_Login=1e3]="Go_Login",t[t.Go_GameHome=1001]="Go_GameHome",t[t.Go_SelectScene=1002]="Go_SelectScene",t[t.Go_Game_A=1003]="Go_Game_A",t[t.Go_Game_B=1004]="Go_Game_B",t[t.Go_Game_C=1005]="Go_Game_C",t[t.Go_Rankings=1006]="Go_Rankings",t[t.Go_Info=1007]="Go_Info"}(_||(_=t("EventEnum_Scene",{})));var h=t("RankData",(function(t,e,s){this.rank=0,this.name="",this.score=0,this.rank=t,this.name=e,this.score=s})),c=function(){function t(){this.isLoadOk=!1,this.Update_Scean=0,this.play_totle_score=0,this.play_score=0,this.play_last_time_m=0,this.play_last_time_s=0,this.play_last_time_ms=0,this.play_Game_Max_Mission_level=[1,1,1],this.GameData_Max_Mission_level=[10,10,10],this.mission_data_A=[],this.mission_data_B=[],this.mission_data_C=[],this.select_Game=1,this.select_Mission=1,this.myRankData=[],this.rank_data=[],this.bl_open_test_debug=!1,this.bl_in_test_mode=!1}var e=t.prototype;return e.init=function(){this.Update_Scean=0,this.play_totle_score=0,this.load_mission_data(),"ccg2022.mosasaurs-studio.com"==window.location.hostname&&(this.bl_open_test_debug=!0),this.myRankData=[new h(50,"VIP06",1e3),new h(50,"VIP06",1020),new h(41,"VIP06",1030),new h(47,"VIP06",0)],this.myRankData[3].score=0;for(var t=0;t<3;t++)this.myRankData[3].score+=this.myRankData[t].score;this.rank_data=[[new h(1,"VIP33",889630),new h(2,"VIP15",852145),new h(3,"VIP03",695830),new h(4,"VIP19",569900),new h(5,"VIP07",407020),new h(6,"VIP26",386430),new h(7,"VIP11",296655),new h(8,"VIP01",274110),new h(9,"VIP28",196890)],[new h(1,"VIP19",548505),new h(2,"VIP15",465520),new h(3,"VIP33",422700),new h(4,"VIP07",388710),new h(5,"VIP03",250040),new h(6,"VIP01",236100),new h(7,"VIP08",174105),new h(8,"VIP11",166560),new h(9,"VIP05",122280)],[new h(1,"VIP33",687790),new h(2,"VIP15",674125),new h(3,"VIP04",635895),new h(4,"VIP19",634770),new h(5,"VIP18",596390),new h(6,"VIP22",558845),new h(7,"VIP13",508795),new h(8,"VIP27",496220),new h(9,"VIP25",457500)],[new h(1,"VIP33",2015425),new h(2,"VIP15",1986540),new h(3,"VIP19",1647800),new h(4,"VIP26",1403365),new h(5,"VIP03",1386545),new h(6,"VIP07",1279900),new h(7,"VIP01",1126945),new h(8,"VIP28",1086630),new h(9,"VIP11",1044500)]]},e.b64DecodeUnicode=function(t){return decodeURIComponent(Array.prototype.map.call(atob(t),(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))},e.load_mission_data=function(){var t=this;o.load("jms",a,(function(e,s){if(e)console.warn(e);else{for(var n=s.text,i=["!","-",">","<","~"],o=["=","0","A","N","C"],a=0;a<i.length;a++)n=n.split(i[a]).join(o[a]);for(var _=n.split("|"),l=0;l<_.length-1;l++){var h=_[l],c=t.b64DecodeUnicode(h),m=JSON.parse(c);0==Math.floor(l/10)?t.mission_data_A.push(m):1==Math.floor(l/10)?t.mission_data_B.push(m):2==Math.floor(l/10)&&t.mission_data_C.push(m)}t.isLoadOk=!0,console.log("load_mission_data ok -> "+t.mission_data_A.length+" "+t.mission_data_B.length+" "+t.mission_data_C.length)}}))},e.get_mission_data=function(){return 1==this.select_Game?this.mission_data_A[this.select_Mission-1]:2==this.select_Game?this.mission_data_B[this.select_Mission-1]:3==this.select_Game?this.mission_data_C[this.select_Mission-1]:void 0},e.setWin=function(t){this.play_last_time_m=Math.floor(t/1e3/60),this.play_last_time_s=Math.floor(t/1e3%60),this.play_last_time_ms=Math.floor(t%1e3/10);var e=60*this.play_last_time_m+this.play_last_time_s;this.play_score=this.get_mission_data().Score.LevelBase,this.play_score+=this.get_mission_data().Score.SecondPlus*e,this.myRankData[this.select_Game-1].score+=this.play_score,this.myRankData[3].score=0;for(var s=0;s<3;s++)this.myRankData[3].score+=this.myRankData[s].score;this.play_totle_score=this.myRankData[this.select_Game-1].score,this.select_Mission<this.GameData_Max_Mission_level[this.select_Game-1]&&this.select_Mission==this.play_Game_Max_Mission_level[this.select_Game-1]&&(this.select_Mission+=1,this.play_Game_Max_Mission_level[this.select_Game-1]=this.select_Mission)},e.setLose=function(t){this.play_last_time_m=Math.floor(t/1e3/60),this.play_last_time_s=Math.floor(t/1e3%60),this.play_last_time_ms=Math.floor(t%1e3/10),this.play_score=0,this.play_totle_score=this.myRankData[this.select_Game-1].score},e.get_bl_open_test_debug=function(){return this.bl_open_test_debug},e.getIsInTestMode=function(){return!!this.bl_open_test_debug&&this.bl_in_test_mode},e.switchTestMode=function(){return this.bl_open_test_debug&&(this.bl_in_test_mode=!this.bl_in_test_mode),this.bl_in_test_mode},t}(),m=null;e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AudioManager.ts","./CLastPlayTime.ts","./Common.ts","./Proc_A_scene.ts","./Proc_B_scene.ts","./Proc_C_scene.ts","./Proc_GameHome.ts","./Proc_Info.ts","./Proc_Login.ts","./Proc_R_scene.ts","./Proc_Select_scene.ts","./SpriteFrameManager.ts","./main.ts","./ns_SwitchSprite.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Common.ts","./AudioManager.ts","./SpriteFrameManager.ts","./Proc_Login.ts","./Proc_GameHome.ts","./Proc_Select_scene.ts","./Proc_A_scene.ts","./Proc_B_scene.ts","./Proc_C_scene.ts","./Proc_R_scene.ts","./Proc_Info.ts"],(function(e){"use strict";var n,o,t,_,i,a,c,r,u,l,g,s,f,m,d,S,p,h,G,P,L,v,y;return{setters:[function(e){n=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,_=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,c=e.AudioSource,r=e.game,u=e.director,l=e.Component},function(e){g=e.getST,s=e.common_getEventTarget,f=e.EventEnum_Scene},function(e){m=e.AudioManager},function(e){d=e.SpriteFrameManager},function(e){S=e.getProc_Login},function(e){p=e.getProc_GameHome},function(e){h=e.getProc_Select_scene},function(e){G=e.getProc_A_scene},function(e){P=e.getProc_B_scene},function(e){L=e.getProc_C_scene},function(e){v=e.getProc_R_scene},function(e){y=e.getProc_Info}],execute:function(){var b,R,A,M,w,U,k;i._RF.push({},"2b6f7V56UxMaa36w702AQXB","main",void 0);var C=a.ccclass,H=a.property;e("main",(b=C("main"),R=H({type:String}),A=H(c),b((U=n((w=function(e){function n(){for(var n,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=e.call.apply(e,[this].concat(i))||this,t(n,"playname",U,_(n)),t(n,"_audioSource",k,_(n)),n}o(n,e);var i=n.prototype;return i.onLoad=function(){console.log("main onLoad"),g().init();var e=this.node;r.addPersistRootNode(e),s().on(f.Go_GameHome,this.go_GameHome),s().on(f.Go_Login,this.go_Login),s().on(f.Go_SelectScene,this.go_SelectScene),s().on(f.Go_Game_A,this.go_Game_A),s().on(f.Go_Game_B,this.go_Game_B),s().on(f.Go_Game_C,this.go_Game_C),s().on(f.Go_Rankings,this.go_Rankings),s().on(f.Go_Info,this.go_Info);var n=this.node.getComponent(c);this._audioSource=n,m.init(this._audioSource);for(var o=["23_flute_do","24_flute_re","25_flute_mi","26_flute_fa","27_flute_so","28_flute_la","29_flute_si","30_flute_do1","31_flute_re1"],t=["32_guitar_do","33_guitar_re","34_guitar_mi","35_guitar_fa","36_guitar_so","37_guitar_la","38_guitar_si","39_guitar_do1","40_guitar_re1"],_=["14_Piano_Do","15_Piano_Re","16_Piano_Mi","17_Piano_Fa","18_Piano_So","19_Piano_La","20_Piano_Si","21_Piano_Do_1","22_Piano_Re_1"],i=["8_9_countdown_and_start","7_click01","11_click02","12_answer01","13_answer02","5_info","6_count01","10_timeout"],a=["1_bgm01","2_bgm02","3_bgm03","4_bgm04"],u=0;u<o.length;u++)m.preloadSound(o[u]);for(var l=0;l<t.length;l++)m.preloadSound(t[l]);for(var S=0;S<_.length;S++)m.preloadSound(_[S]);for(var p=0;p<i.length;p++)m.preloadSound(i[p]);for(var h=0;h<a.length;h++)m.preloadSound(a[h]);for(var G=["1","2","3","4","5","6","7","8","9","l_1","l_2","l_3","l_4","l_5","l_6","l_7","l_8","l_9","L1_icon_1","L1_icon_2","L1_icon_3","L1_icon_4","L1_icon_5","L1_icon_6","L1_icon_7","L1_icon_8","L1_icon_9","yellow_light","red_light","green_light","L1_未知圖騰_藍","L2_未知圖騰_藍","L3_未知圖騰_藍","L3_未知圖騰3_高亮","白燈","黃燈","綠燈","紅燈","黑燈"],P=0;P<G.length;P++)d.preloadSpriteFrame(G[P])},i.start=function(){console.log("main start"),console.log(this.playname),S().init()},i.update=function(e){switch(S().isRunning&&S().update(),g().Update_Scean){case 1:G().update();break;case 2:P().update();break;case 3:L().update()}},i.go_GameHome=function(){console.log("go_GameHome"),u.loadScene("GameHome",(function(){p().init(),g().Update_Scean=0,m.playMusic("1_bgm01")}))},i.go_Login=function(){console.log("go_Login"),u.loadScene("Login",(function(){S().init(),g().Update_Scean=0}))},i.go_SelectScene=function(){console.log("go_SelectScene"),u.loadScene("SelectMission",(function(){h().init(),g().Update_Scean=0,m.playMusic("2_bgm02")}))},i.go_Game_A=function(){u.loadScene(p().getGameSceneName(),(function(){G().init(),g().Update_Scean=1}))},i.go_Game_B=function(){u.loadScene(p().getGameSceneName(),(function(){P().init(),g().Update_Scean=2}))},i.go_Game_C=function(){u.loadScene(p().getGameSceneName(),(function(){L().init(),g().Update_Scean=3}))},i.go_Rankings=function(){u.loadScene(p().getGameSceneName(),(function(){v().init(),g().Update_Scean=4}))},i.go_Info=function(){console.log("go_Info"),u.loadScene("Info",(function(){y().init()}))},n}(l)).prototype,"playname",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),k=n(w.prototype,"_audioSource",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=w))||M));i._RF.pop()}}}));

System.register("chunks:///_virtual/ns_SwitchSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,n,r,o,l,s,c,p,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,s=e.SpriteFrame,c=e.Sprite,p=e.Node,a=e.Component}],execute:function(){var u,h,S,_,b,f,v,d,m,y,w;o._RF.push({},"5dab2OPM85Ouqe9oQ1aH4wl","ns_SwitchSprite",void 0);var g=l.ccclass,L=l.property;e("ns_SwitchSprite",(u=g("ns_SwitchSprite"),h=L({type:s}),S=L({type:s}),_=L({type:s}),b=L({type:s}),u((d=t((v=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,n(t,"normal_Sprite",d,r(t)),n(t,"selected_Sprite",m,r(t)),n(t,"moveOver_Sprite",y,r(t)),n(t,"lock_Sprite",w,r(t)),t._blLock=!1,t._blSelected=!1,t}i(t,e);var o=t.prototype;return o.switchSelect=function(e){this._blSelected=e;var t=this.node.getComponent(c);t.spriteFrame=e?this.selected_Sprite:this.normal_Sprite},o.switchLock=function(e){(this._blLock=e,0==this._blLock)?this.switchSelect(this._blSelected):this.node.getComponent(c).spriteFrame=this.lock_Sprite},o.onMouseEnter=function(){this._blLock||(this.node.getComponent(c).spriteFrame=this.moveOver_Sprite,console.log("onMouseEnter"))},o.onMouseLeave=function(){this._blLock||(this.switchSelect(this._blSelected),console.log("onMouseLeave"))},o.start=function(){this.switchSelect(!1),null!=this.moveOver_Sprite&&(this.node.on(p.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.node.on(p.EventType.MOUSE_LEAVE,this.onMouseLeave,this))},o.onLoad=function(){this.switchSelect(!1)},t}(a)).prototype,"normal_Sprite",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(v.prototype,"selected_Sprite",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(v.prototype,"moveOver_Sprite",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(v.prototype,"lock_Sprite",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=v))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/Proc_A_scene.ts",["cc","./Common.ts","./AudioManager.ts","./SpriteFrameManager.ts","./CLastPlayTime.ts"],(function(t){"use strict";var e,s,i,n,a,_,o,r,u,h,l,p,m;return{setters:[function(t){e=t.cclegacy,s=t.find,i=t.Label,n=t.RichText,a=t.Sprite,_=t.Node},function(t){o=t.common_bind_touch_start,r=t.common_getEventTarget,u=t.EventEnum_Scene,h=t.getST},function(t){l=t.AudioManager},function(t){p=t.SpriteFrameManager},function(t){m=t.CLastPlayTime}],execute:function(){var c;t("getProc_A_scene",(function(){null===w&&(w=new v,console.log("new Proc_A_scene"));return w})),e._RF.push({},"afbb2+EZ75ImotQxDjzLSA9","Proc_A_scene",void 0),function(t){t[t.st_none=100]="st_none",t[t.st_init=101]="st_init",t[t.st_into_animation=102]="st_into_animation",t[t.st_start=103]="st_start",t[t.st_play_input=104]="st_play_input",t[t.st_show_result=105]="st_show_result",t[t.st_win=106]="st_win",t[t.st_timeup_animation=107]="st_timeup_animation",t[t.st_lose=108]="st_lose",t[t.st_end=109]="st_end"}(c||(c={}));var v=function(){function t(){this.state=c.st_none,this.state_next=-1,this.question_number=[],this.anser_number=[],this.last_timestamp=0,this.last_wait_timestamp=0,this.node_result_number=[],this.node_result_light=[],this.node_start_last_time=null,this.input_btn_Number=[],this.input_btn_hide=[],this.input_count=0,this.state_win_lose_show=0,this.cLastPlayTime=null,this.blPlayCount01Sound=!1,this.node_result_number_path=["Canvas/數字位置/數字1","Canvas/數字位置/數字2","Canvas/數字位置/數字3","Canvas/數字位置/數字4","Canvas/數字位置/數字5","Canvas/數字位置/數字6"],this.node_result_light_path=["Canvas/tip_Light燈號位置/green_light","Canvas/tip_Light燈號位置/green_light-001","Canvas/tip_Light燈號位置/green_light-002","Canvas/tip_Light燈號位置/green_light-003","Canvas/tip_Light燈號位置/green_light-004","Canvas/tip_Light燈號位置/green_light-005"],this.node_input_number_path=["Canvas/Layer 1/Node-001/1_icon","Canvas/Layer 1/Node-001/2_icon","Canvas/Layer 1/Node-001/3_icon","Canvas/Layer 1/Node-001/4_icon","Canvas/Layer 1/Node-001/5_icon","Canvas/Layer 1/Node-001/6_icon","Canvas/Layer 1/Node-001/7_icon","Canvas/Layer 1/Node-001/8_icon","Canvas/Layer 1/Node-001/9_icon"],this.node_input_number=["1_icon","2_icon","3_icon","4_icon","5_icon","6_icon","7_icon","8_icon","9_icon"]}var e=t.prototype;return e.init=function(){this.set_Next_state(c.st_init),this.last_timestamp=Date.now(),o("Canvas/Arrow",this.go_select,this),s("Canvas/outturn_lose").active=!1,s("Canvas/outturn_win").active=!1,s("Canvas/start").active=!0,s("Canvas/times_up").active=!1,this.node_start_last_time=s("Canvas/start/time").getComponent(i),o("Canvas/outturn_win/btn_back_mis",this.go_select,this),o("Canvas/outturn_lose/btn_back_mis",this.go_select,this),o("Canvas/outturn_lose/btn_agn",this.go_again,this),this.cLastPlayTime=new m},e.go_select=function(){l.playSound("7_click01"),r().emit(u.Go_SelectScene)},e.go_again=function(){l.playSound("7_click01"),this.state==c.st_lose&&this.set_Next_state(c.st_init)},e.st_init_in=function(){var t=h().get_mission_data();this.anser_number=[],this.question_number=[],this.question_number=[];for(var e=0;e<t.LevelSet.NumberCount;e++){var i=Math.floor(9*Math.random())+1;if("True"!=t.LevelSet.NumberRepeat)for(;this.question_number.indexOf(i)>=0;)i=Math.floor(9*Math.random())+1;this.question_number.push(i),this.anser_number.push(-1),console.log(i)}this.node_result_number=[],this.node_result_light=[];for(var o=0;o<6;o++){var r=s(this.node_result_number_path[o]).getComponent(n);this.node_result_number.push(r);var u=s(this.node_result_light_path[o]).getComponent(a);this.node_result_light.push(u)}for(var l=0;l<6;l++){this.node_result_number[l].enabled=!1,this.node_result_light[l].enabled=!0,this.node_result_light[l].getComponent(a).spriteFrame=p.getSpriteFrame("白燈")}4==t.LevelSet.NumberCount&&(this.node_result_number.splice(5,1),this.node_result_number.splice(0,1),this.node_result_light[0].enabled=!1,this.node_result_light[5].enabled=!1,this.node_result_light.splice(5,1),this.node_result_light.splice(0,1)),this.cLastPlayTime.start(1e3*t.LevelSet.Time),s("Canvas/標題").getComponent(n).string="<color=#FFFFFF>"+t.GameLevel+"</color>";for(var m=0;m<this.node_input_number_path.length;m++){var c=s(this.node_input_number_path[m]);c.off(_.EventType.TOUCH_START,this.input_event,this),c.on(_.EventType.TOUCH_START,this.input_event,this)}s("Canvas/outturn_lose").active=!1,s("Canvas/outturn_win").active=!1,s("Canvas/start").active=!0,s("Canvas/times_up").active=!1,this.input_btn_Number=[],this.input_btn_hide=[];for(var v=0;v<9;v++)if(this.input_btn_hide.push(!1),0==t.LevelSet.PositionShift)this.input_btn_Number.push(v+1);else if(t.LevelSet.PositionShift>0){var w=v+1-t.LevelSet.PositionShift;w<=0&&(w+=9),this.input_btn_Number.push(w)}else t.LevelSet.PositionShift<0&&(0==Math.floor(2*Math.random())?this.input_btn_Number.push(v+1):this.input_btn_Number.unshift(v+1));for(var b=0;b<9;b++){s(this.node_input_number_path[b]).getComponent(a).spriteFrame=p.getSpriteFrame("L1_未知圖騰_藍")}return this.blPlayCount01Sound=!1,!0},e.st_into_animation_in=function(){return this.last_wait_timestamp=Date.now()+3e3,l.playSound("8_9_countdown_and_start"),!0},e.st_into_animation_update=function(){var t=this.last_wait_timestamp-Date.now();if(t>=0){for(var e=Math.floor(t/1e3)+1,i=0;i<3;i++){var n=s("Canvas/start/start_"+(i+1));n.active=e==i+1}this.node_start_last_time.string="..."+Math.floor(t/1e3).toString()+"..."}else{this.set_Next_state(c.st_start),s("Canvas/start").active=!1,l.playMusic("3_bgm03")}},e.st_play_input_in=function(){for(var t=h().get_mission_data(),e=0;e<this.node_result_number.length;e++){if("True"!=t.LevelSet.RightRetain||this.question_number[e]!=this.anser_number[e])this.anser_number[e]=-1,this.node_result_number[e].enabled=!1,this.node_result_light[e].getComponent(a).spriteFrame=p.getSpriteFrame("白燈")}return this.input_count=0,!0},e.st_play_input_update=function(){for(var t=!0,e=0;e<this.anser_number.length;e++)if(-1==this.anser_number[e]){t=!1;break}t&&this.set_Next_state(c.st_show_result)},e.st_show_result_in=function(){this.last_wait_timestamp=Date.now();for(var t=0;t<this.anser_number.length;t++){var e=this.anser_number[t],s=this.node_result_light[t].getComponent(a);if(e==this.question_number[t])s.spriteFrame=p.getSpriteFrame("綠燈");else{for(var i=h().get_mission_data(),n=!1,_=0;_<i.LevelSet.HintPosition.length;_++)if(i.LevelSet.HintPosition[_]==t+1){n=!0;break}if(0==n)s.spriteFrame=p.getSpriteFrame("黑燈");else{for(var o=!1,r=0;r<this.question_number.length;r++)if(this.question_number[r]==e){o=!0;break}s.spriteFrame=o?p.getSpriteFrame("黃燈"):p.getSpriteFrame("紅燈")}}}for(var u=!0,m=0;m<this.question_number.length;m++)if(this.question_number[m]!=this.anser_number[m]){u=!1;break}return u?l.playSound("12_answer01"):l.playSound("13_answer02"),!0},e.st_show_result_update=function(){if(Date.now()-this.last_wait_timestamp>=1200){for(var t=!0,e=0;e<this.question_number.length;e++)if(this.question_number[e]!=this.anser_number[e]){t=!1;break}t?this.set_Next_state(c.st_win):this.set_Next_state(c.st_play_input)}},e.st_win_in=function(){this.last_wait_timestamp=Date.now(),h().setWin(this.cLastPlayTime.getLastPlayTime()),s("Canvas/outturn_win").active=!0,this.state_win_lose_show=0,this.last_wait_timestamp=Date.now();var t=s("Canvas/outturn_win/SpriteSplash/Node/sc_01").getComponent(i);t.enabled=!1,t.string=h().play_last_time_m.toString().padStart(2,"0")+":"+h().play_last_time_s.toString().padStart(2,"0")+":"+h().play_last_time_ms.toString().padStart(2,"0");var e=s("Canvas/outturn_win/SpriteSplash/Node/sc_02").getComponent(i);e.string="0",e.enabled=!1;var n=s("Canvas/outturn_win/SpriteSplash/Node/sc_03").getComponent(i);return n.string="0",n.enabled=!1,s("Canvas/outturn_win/btn_back_mis").active=!1,l.stopMusic(),l.playSound("4_bgm04"),!0},e.st_win_update=function(){if(0==this.state_win_lose_show)Date.now()-this.last_wait_timestamp>=1e3&&(s("Canvas/outturn_win/SpriteSplash/Node/sc_01").getComponent(i).enabled=!0,this.state_win_lose_show=1,this.last_wait_timestamp=Date.now());else if(1==this.state_win_lose_show){var t=Math.floor(h().play_score/Math.pow(2,20)*Math.pow(2,(Date.now()-this.last_wait_timestamp)/50));Date.now()-this.last_wait_timestamp>=1200&&(t=h().play_score,this.state_win_lose_show=2,this.last_wait_timestamp=Date.now());var e=s("Canvas/outturn_win/SpriteSplash/Node/sc_02").getComponent(i);0==e.enabled&&(e.enabled=!0),e.string=t.toString()}else if(2==this.state_win_lose_show){var n=Math.floor(h().play_totle_score/Math.pow(2,20)*Math.pow(2,(Date.now()-this.last_wait_timestamp)/50));Date.now()-this.last_wait_timestamp>=1200&&(n=h().play_totle_score,this.state_win_lose_show=3,this.last_wait_timestamp=Date.now());var a=s("Canvas/outturn_win/SpriteSplash/Node/sc_03").getComponent(i);0==a.enabled&&(a.enabled=!0),a.string=n.toString(),0==this.blPlayCount01Sound&&Date.now()-this.last_wait_timestamp>=200&&(this.blPlayCount01Sound=!0,l.playMusic("6_count01"))}else if(3==this.state_win_lose_show){s("Canvas/outturn_win/btn_back_mis").active=!0,this.state_win_lose_show=4,l.stopMusic()}},e.st_timeup_animation_in=function(){return this.last_wait_timestamp=Date.now(),s("Canvas/times_up").active=!0,!0},e.st_timeup_animation_update=function(){Date.now()-this.last_wait_timestamp>=2e3&&(this.set_Next_state(c.st_lose),s("Canvas/times_up").active=!1)},e.st_lose_in=function(){this.last_wait_timestamp=Date.now(),s("Canvas/outturn_lose").active=!0,this.state_win_lose_show=0,this.last_wait_timestamp=Date.now(),s("Canvas/outturn_lose/SpriteSplash/sc_01").getComponent(i).enabled=!1,s("Canvas/outturn_lose/SpriteSplash/sc_02").getComponent(i).enabled=!1;var t=s("Canvas/outturn_lose/SpriteSplash/sc_03").getComponent(i);return t.enabled=!1,t.string=h().play_totle_score.toString(),s("Canvas/outturn_lose/btn_back_mis").active=!1,s("Canvas/outturn_lose/btn_agn").active=!1,l.stopMusic(),!0},e.st_lose_update=function(){if(0==this.state_win_lose_show)Date.now()-this.last_wait_timestamp>=1e3&&(s("Canvas/outturn_lose/SpriteSplash/sc_01").getComponent(i).enabled=!0,this.state_win_lose_show=1,this.last_wait_timestamp=Date.now());else if(1==this.state_win_lose_show){if(Date.now()-this.last_wait_timestamp>=1e3)s("Canvas/outturn_lose/SpriteSplash/sc_02").getComponent(i).enabled=!0,this.state_win_lose_show=2,this.last_wait_timestamp=Date.now()}else if(2==this.state_win_lose_show){if(Date.now()-this.last_wait_timestamp>=1e3)s("Canvas/outturn_lose/SpriteSplash/sc_03").getComponent(i).enabled=!0,this.state_win_lose_show=3,this.last_wait_timestamp=Date.now()}else if(3==this.state_win_lose_show){if(Date.now()-this.last_wait_timestamp>=1e3)this.state_win_lose_show=4,s("Canvas/outturn_lose/btn_back_mis").active=!0,s("Canvas/outturn_lose/btn_agn").active=!0}},e.input_event=function(t){var e=this.node_input_number.indexOf(t.target.name)+1;if(l.playSound("11_click02"),this.state!=c.st_show_result){var s=h().get_mission_data();if("True"==s.LevelSet.RightRetain)for(var i=this.input_count;i<this.anser_number.length&&-1!=this.anser_number[i];i++)this.input_count++;if(!(this.input_count>=s.LevelSet.NumberCount)){var n=this.input_btn_Number[e-1];if(0==this.input_btn_hide[e-1]&&"True"==s.LevelSet.ShowNumber){this.input_btn_hide[e-1]=!0;t.target.getComponent(a).spriteFrame=p.getSpriteFrame(["1","2","3","4","5","6","7","8","9"][n-1])}this.anser_number[this.input_count]=n,this.node_result_number[this.input_count].string="<color=#FFFFFF>"+n+"</color>",this.node_result_number[this.input_count].enabled=!0,this.input_count++}}else this.last_wait_timestamp=Date.now()-2e4},e.set_Next_state=function(t){return console.log("set_Next_state:"+t),-1==this.state_next&&(this.state_next=t,!0)},e._state_change=function(){if(-1!=this.state_next){var t=!0;switch(this.state_next){case c.st_init:t=this.st_init_in();break;case c.st_into_animation:t=this.st_into_animation_in();break;case c.st_play_input:t=this.st_play_input_in();break;case c.st_show_result:t=this.st_show_result_in();break;case c.st_win:t=this.st_win_in();break;case c.st_timeup_animation:t=this.st_timeup_animation_in();break;case c.st_lose:t=this.st_lose_in()}t&&(this.state=this.state_next,this.state_next=-1)}},e._state_update=function(){switch(this.state){case c.st_init:this.set_Next_state(c.st_into_animation);break;case c.st_into_animation:this.st_into_animation_update();break;case c.st_start:this.set_Next_state(c.st_play_input);break;case c.st_play_input:this.st_play_input_update();break;case c.st_show_result:this.st_show_result_update();break;case c.st_win:this.st_win_update();break;case c.st_timeup_animation:this.st_timeup_animation_update();break;case c.st_lose:this.st_lose_update()}},e.update=function(){var t=Date.now()-this.last_timestamp;t<33||(this.last_timestamp=Date.now(),this.state==c.st_play_input&&(h().getIsInTestMode()&&(t=0),this.cLastPlayTime.update(t)&&this.set_Next_state(c.st_timeup_animation)),this._state_update(),this._state_change())},t}(),w=null;e._RF.pop()}}}));

System.register("chunks:///_virtual/Proc_B_scene.ts",["cc","./Common.ts","./AudioManager.ts","./SpriteFrameManager.ts","./CLastPlayTime.ts","./ns_SwitchSprite.ts"],(function(t){"use strict";var s,e,i,n,a,_,o,r,u,h,l,p,m,c;return{setters:[function(t){s=t.cclegacy,e=t.find,i=t.Label,n=t.RichText,a=t.Sprite,_=t.Node},function(t){o=t.common_bind_touch_start,r=t.common_getEventTarget,u=t.EventEnum_Scene,h=t.getST},function(t){l=t.AudioManager},function(t){p=t.SpriteFrameManager},function(t){m=t.CLastPlayTime},function(t){c=t.ns_SwitchSprite}],execute:function(){var d;t("getProc_B_scene",(function(){null===v&&(v=new w,console.log("new Proc_B_scene"));return v})),s._RF.push({},"916cab7HC1IF76oe8HmJLMg","Proc_B_scene",void 0),function(t){t[t.st_none=100]="st_none",t[t.st_init=101]="st_init",t[t.st_into_animation=102]="st_into_animation",t[t.st_start=103]="st_start",t[t.st_play_question_sound=104]="st_play_question_sound",t[t.st_play_input=105]="st_play_input",t[t.st_show_result=106]="st_show_result",t[t.st_win=107]="st_win",t[t.st_timeup_animation=108]="st_timeup_animation",t[t.st_lose=109]="st_lose",t[t.st_end=110]="st_end"}(d||(d={}));var w=function(){function t(){this.state=d.st_none,this.state_next=-1,this.question_number=[],this.anser_number=[],this.last_timestamp=0,this.last_wait_timestamp=0,this.node_result_number=[],this.node_result_light=[],this.node_start_last_time=null,this.play_count=0,this.input_btn_Number=[],this.input_btn_hide=[],this.input_count=0,this.state_win_lose_show=0,this.node_result_number_path=["Canvas/數字位置/數字1","Canvas/數字位置/數字2","Canvas/數字位置/數字3","Canvas/數字位置/數字4","Canvas/數字位置/數字5","Canvas/數字位置/數字6"],this.node_result_light_path=["Canvas/tip_Light燈號位置/green_light","Canvas/tip_Light燈號位置/green_light-001","Canvas/tip_Light燈號位置/green_light-002","Canvas/tip_Light燈號位置/green_light-003","Canvas/tip_Light燈號位置/green_light-004","Canvas/tip_Light燈號位置/green_light-005"],this.node_input_number_path=["Canvas/Layer 1/Node-001/1_icon","Canvas/Layer 1/Node-001/2_icon","Canvas/Layer 1/Node-001/3_icon","Canvas/Layer 1/Node-001/4_icon","Canvas/Layer 1/Node-001/5_icon","Canvas/Layer 1/Node-001/6_icon","Canvas/Layer 1/Node-001/7_icon","Canvas/Layer 1/Node-001/8_icon","Canvas/Layer 1/Node-001/9_icon"],this.node_input_number=["1_icon","2_icon","3_icon","4_icon","5_icon","6_icon","7_icon","8_icon","9_icon"],this.cLastPlayTime=null,this.blPlayCount01Sound=!1}var s=t.prototype;return s.init=function(){this.set_Next_state(d.st_init),this.last_timestamp=Date.now(),o("Canvas/Arrow",this.go_select,this),o("Canvas/play_icon",this.btn_play_question_sound,this),o("Canvas/confirm_icon",this.btn_to_play_input,this),e("Canvas/outturn_lose").active=!1,e("Canvas/outturn_win").active=!1,e("Canvas/start").active=!0,e("Canvas/times_up").active=!1,this.node_start_last_time=e("Canvas/start/time").getComponent(i),o("Canvas/outturn_win/btn_back_mis",this.go_select,this),o("Canvas/outturn_lose/btn_back_mis",this.go_select,this),o("Canvas/outturn_lose/btn_agn",this.go_again,this),this.cLastPlayTime=new m},s.go_select=function(){l.playSound("7_click01"),r().emit(u.Go_SelectScene)},s.go_again=function(){this.state==d.st_lose&&this.set_Next_state(d.st_init)},s.btn_play_question_sound=function(){this.state==d.st_start&&(l.playSound("7_click01"),this.set_Next_state(d.st_play_question_sound))},s.btn_to_play_input=function(){this.state==d.st_start?(l.playSound("7_click01"),this.set_Next_state(d.st_play_input)):this.state==d.st_play_input&&(l.playSound("7_click01"),this.set_Next_state(d.st_start))},s.st_init_in=function(){var t=h().get_mission_data();this.anser_number=[],this.question_number=[],this.question_number=[];for(var s=0;s<t.LevelSet.NumberCount;s++){var i=Math.floor(9*Math.random())+1;if("True"!=t.LevelSet.NumberRepeat)for(;this.question_number.indexOf(i)>=0;)i=Math.floor(9*Math.random())+1;this.question_number.push(i),this.anser_number.push(-1),console.log(i)}this.node_result_number=[],this.node_result_light=[];for(var o=0;o<6;o++){var r=e(this.node_result_number_path[o]).getComponent(n);this.node_result_number.push(r);var u=e(this.node_result_light_path[o]).getComponent(a);this.node_result_light.push(u)}for(var l=0;l<6;l++){this.node_result_number[l].enabled=!1,this.node_result_light[l].enabled=!0,this.node_result_light[l].getComponent(a).spriteFrame=p.getSpriteFrame("白燈")}4==t.LevelSet.NumberCount?(this.node_result_number.splice(5,1),this.node_result_number.splice(0,1),this.node_result_light[0].enabled=!1,this.node_result_light[5].enabled=!1,this.node_result_light.splice(5,1),this.node_result_light.splice(0,1)):2==t.LevelSet.NumberCount&&(this.node_result_number.splice(4,2),this.node_result_number.splice(0,2),this.node_result_light[0].enabled=!1,this.node_result_light[1].enabled=!1,this.node_result_light[4].enabled=!1,this.node_result_light[5].enabled=!1,this.node_result_light.splice(4,2),this.node_result_light.splice(0,2)),this.cLastPlayTime.start(1e3*t.LevelSet.Time),e("Canvas/標題").getComponent(n).string="<color=#FFFFFF>"+t.GameLevel+"</color>";for(var m=0;m<this.node_input_number_path.length;m++){var c=e(this.node_input_number_path[m]);c.off(_.EventType.TOUCH_START,this.input_event,this),c.on(_.EventType.TOUCH_START,this.input_event,this)}e("Canvas/outturn_lose").active=!1,e("Canvas/outturn_win").active=!1,e("Canvas/start").active=!0,e("Canvas/times_up").active=!1,this.input_btn_Number=[],this.input_btn_hide=[];for(var d=0;d<9;d++)if(this.input_btn_hide.push(!1),0==t.LevelSet.PositionShift)this.input_btn_Number.push(d+1);else if(t.LevelSet.PositionShift>0){var w=d+1-t.LevelSet.PositionShift;w<=0&&(w+=9),this.input_btn_Number.push(w)}else t.LevelSet.PositionShift<0&&(0==Math.floor(2*Math.random())?this.input_btn_Number.push(d+1):this.input_btn_Number.unshift(d+1));for(var v=0;v<9;v++){e(this.node_input_number_path[v]).getComponent(a).spriteFrame=p.getSpriteFrame("L2_未知圖騰_藍")}return this.blPlayCount01Sound=!1,!0},s.st_into_animation_in=function(){return this.last_wait_timestamp=Date.now()+3e3,l.playSound("8_9_countdown_and_start"),!0},s.st_into_animation_update=function(){var t=this.last_wait_timestamp-Date.now();if(t>=0){for(var s=Math.floor(t/1e3)+1,i=0;i<3;i++){var n=e("Canvas/start/start_"+(i+1));n.active=s==i+1}this.node_start_last_time.string="..."+Math.floor(t/1e3).toString()+"..."}else{e("Canvas/start").active=!1,this.set_Next_state(d.st_play_question_sound),l.stopMusic()}},s.st_start_in=function(){for(var t=h().get_mission_data(),s=0;s<this.node_result_number.length;s++){if("True"!=t.LevelSet.RightRetain||this.question_number[s]!=this.anser_number[s])this.anser_number[s]=-1,this.node_result_number[s].enabled=!1,this.node_result_light[s].getComponent(a).spriteFrame=p.getSpriteFrame("白燈")}return this.input_count=0,this.switchNS("Canvas/play_icon",!1),this.switchNS("Canvas/confirm_icon",!1),this.switchNS_lock("Canvas/play_icon",!1),this.switchNS_lock("Canvas/confirm_icon",!1),!0},s.st_play_question_sound_in=function(){return this.last_wait_timestamp=Date.now(),this.play_count=0,this.switchNS("Canvas/play_icon",!0),this.switchNS("Canvas/confirm_icon",!1),this.switchNS_lock("Canvas/play_icon",!0),this.switchNS_lock("Canvas/confirm_icon",!0),!0},s.st_play_question_sound_update=function(){Date.now()-this.last_wait_timestamp>1e3&&(this.last_wait_timestamp=Date.now(),this.play_sound(this.question_number[this.play_count]),this.play_count++,this.play_count>=this.question_number.length&&this.set_Next_state(d.st_start))},s.st_play_input_in=function(){return this.switchNS("Canvas/play_icon",!1),this.switchNS("Canvas/confirm_icon",!0),this.switchNS_lock("Canvas/play_icon",!0),this.switchNS_lock("Canvas/confirm_icon",!1),!0},s.st_play_input_update=function(){for(var t=!0,s=0;s<this.anser_number.length;s++)if(-1==this.anser_number[s]){t=!1;break}t&&this.set_Next_state(d.st_show_result)},s.st_show_result_in=function(){this.last_wait_timestamp=Date.now();for(var t=0;t<this.anser_number.length;t++){var s=this.anser_number[t],e=this.node_result_light[t].getComponent(a);if(s==this.question_number[t])e.spriteFrame=p.getSpriteFrame("綠燈");else{for(var i=h().get_mission_data(),n=!1,_=0;_<i.LevelSet.HintPosition.length;_++)if(i.LevelSet.HintPosition[_]==t+1){n=!0;break}if(0==n)e.spriteFrame=p.getSpriteFrame("黑燈");else{for(var o=!1,r=0;r<this.question_number.length;r++)if(this.question_number[r]==s){o=!0;break}e.spriteFrame=o?p.getSpriteFrame("黃燈"):p.getSpriteFrame("紅燈")}}}for(var u=!0,m=0;m<this.question_number.length;m++)if(this.question_number[m]!=this.anser_number[m]){u=!1;break}return u?l.playSound("12_answer01"):l.playSound("13_answer02"),!0},s.st_show_result_update=function(){if(Date.now()-this.last_wait_timestamp>=1e3){for(var t=!0,s=0;s<this.question_number.length;s++)if(this.question_number[s]!=this.anser_number[s]){t=!1;break}t?this.set_Next_state(d.st_win):this.set_Next_state(d.st_start)}},s.st_win_in=function(){h().setWin(this.cLastPlayTime.getLastPlayTime()),e("Canvas/outturn_win").active=!0,this.state_win_lose_show=0,this.last_wait_timestamp=Date.now();var t=e("Canvas/outturn_win/SpriteSplash/Node/sc_01").getComponent(i);t.enabled=!1,t.string=h().play_last_time_m.toString().padStart(2,"0")+":"+h().play_last_time_s.toString().padStart(2,"0")+":"+h().play_last_time_ms.toString().padStart(2,"0");var s=e("Canvas/outturn_win/SpriteSplash/Node/sc_02").getComponent(i);s.string="0",s.enabled=!1;var n=e("Canvas/outturn_win/SpriteSplash/Node/sc_03").getComponent(i);return n.string="0",n.enabled=!1,e("Canvas/outturn_win/btn_back_mis").active=!1,l.stopMusic(),l.playSound("4_bgm04"),!0},s.st_win_update=function(){if(0==this.state_win_lose_show)Date.now()-this.last_wait_timestamp>=1e3&&(e("Canvas/outturn_win/SpriteSplash/Node/sc_01").getComponent(i).enabled=!0,this.state_win_lose_show=1,this.last_wait_timestamp=Date.now());else if(1==this.state_win_lose_show){var t=Math.floor(h().play_score/Math.pow(2,20)*Math.pow(2,(Date.now()-this.last_wait_timestamp)/50));Date.now()-this.last_wait_timestamp>=1e3&&(t=h().play_score,this.state_win_lose_show=2,this.last_wait_timestamp=Date.now());var s=e("Canvas/outturn_win/SpriteSplash/Node/sc_02").getComponent(i);0==s.enabled&&(s.enabled=!0),s.string=t.toString()}else if(2==this.state_win_lose_show){var n=Math.floor(h().play_totle_score/Math.pow(2,20)*Math.pow(2,(Date.now()-this.last_wait_timestamp)/50));Date.now()-this.last_wait_timestamp>=1e3&&(n=h().play_totle_score,this.state_win_lose_show=3,this.last_wait_timestamp=Date.now());var a=e("Canvas/outturn_win/SpriteSplash/Node/sc_03").getComponent(i);0==a.enabled&&(a.enabled=!0),a.string=n.toString(),0==this.blPlayCount01Sound&&Date.now()-this.last_wait_timestamp>=200&&(this.blPlayCount01Sound=!0,l.playMusic("6_count01"))}else if(3==this.state_win_lose_show){e("Canvas/outturn_win/btn_back_mis").active=!0,this.state_win_lose_show=4,l.stopMusic()}},s.st_timeup_animation_in=function(){return this.last_wait_timestamp=Date.now(),e("Canvas/times_up").active=!0,!0},s.st_timeup_animation_update=function(){Date.now()-this.last_wait_timestamp>=2e3&&(this.set_Next_state(d.st_lose),e("Canvas/times_up").active=!1)},s.st_lose_in=function(){this.last_wait_timestamp=Date.now(),e("Canvas/outturn_lose").active=!0,this.state_win_lose_show=0,this.last_wait_timestamp=Date.now(),e("Canvas/outturn_lose/SpriteSplash/sc_01").getComponent(i).enabled=!1,e("Canvas/outturn_lose/SpriteSplash/sc_02").getComponent(i).enabled=!1;var t=e("Canvas/outturn_lose/SpriteSplash/sc_03").getComponent(i);return t.enabled=!1,t.string=h().play_totle_score.toString(),e("Canvas/outturn_lose/btn_back_mis").active=!1,e("Canvas/outturn_lose/btn_agn").active=!1,l.stopMusic(),!0},s.st_lose_update=function(){if(0==this.state_win_lose_show)Date.now()-this.last_wait_timestamp>=1e3&&(e("Canvas/outturn_lose/SpriteSplash/sc_01").getComponent(i).enabled=!0,this.state_win_lose_show=1,this.last_wait_timestamp=Date.now());else if(1==this.state_win_lose_show){if(Date.now()-this.last_wait_timestamp>=1e3)e("Canvas/outturn_lose/SpriteSplash/sc_02").getComponent(i).enabled=!0,this.state_win_lose_show=2,this.last_wait_timestamp=Date.now()}else if(2==this.state_win_lose_show){if(Date.now()-this.last_wait_timestamp>=1e3)e("Canvas/outturn_lose/SpriteSplash/sc_03").getComponent(i).enabled=!0,this.state_win_lose_show=3,this.last_wait_timestamp=Date.now()}else if(3==this.state_win_lose_show){if(Date.now()-this.last_wait_timestamp>=1e3)this.state_win_lose_show=4,e("Canvas/outturn_lose/btn_back_mis").active=!0,e("Canvas/outturn_lose/btn_agn").active=!0}},s.input_event=function(t){var s=this.node_input_number.indexOf(t.target.name)+1,e=this.input_btn_Number[s-1];if(this.state!=d.st_show_result)if(this.state==d.st_play_input||this.state==d.st_show_result){var i=h().get_mission_data();if("True"==i.LevelSet.RightRetain)for(var n=this.input_count;n<this.anser_number.length&&-1!=this.anser_number[n];n++)this.input_count++;if(!(this.input_count>=i.LevelSet.NumberCount)){if(0==this.input_btn_hide[s-1]&&"True"==i.LevelSet.ShowNumber){this.input_btn_hide[s-1]=!0;t.target.getComponent(a).spriteFrame=p.getSpriteFrame(["1","2","3","4","5","6","7","8","9"][e-1])}this.anser_number[this.input_count]=e,this.node_result_number[this.input_count].string="<color=#FFFFFF>"+e+"</color>",this.node_result_number[this.input_count].enabled=!0,this.input_count++,this.play_sound(e)}}else{if(this.state==d.st_start&&(this.play_sound(e),this.state==d.st_start&&0==this.input_btn_hide[s-1]&&"True"==h().get_mission_data().LevelSet.ShowNumber)){this.input_btn_hide[s-1]=!0;t.target.getComponent(a).spriteFrame=p.getSpriteFrame(["1","2","3","4","5","6","7","8","9"][e-1])}}else this.last_wait_timestamp=Date.now()-2e4},s.set_Next_state=function(t){return console.log("set_Next_state:"+t),-1==this.state_next&&(this.state_next=t,!0)},s._state_change=function(){if(-1!=this.state_next){var t=!0;switch(this.state_next){case d.st_init:t=this.st_init_in();break;case d.st_into_animation:t=this.st_into_animation_in();break;case d.st_start:t=this.st_start_in();break;case d.st_play_question_sound:t=this.st_play_question_sound_in();break;case d.st_play_input:t=this.st_play_input_in();break;case d.st_show_result:t=this.st_show_result_in();break;case d.st_win:t=this.st_win_in();break;case d.st_timeup_animation:t=this.st_timeup_animation_in();break;case d.st_lose:t=this.st_lose_in()}t&&(this.state=this.state_next,this.state_next=-1)}},s._state_update=function(){switch(this.state){case d.st_init:this.set_Next_state(d.st_into_animation);break;case d.st_into_animation:this.st_into_animation_update();break;case d.st_play_question_sound:this.st_play_question_sound_update();break;case d.st_play_input:this.st_play_input_update();break;case d.st_show_result:this.st_show_result_update();break;case d.st_win:this.st_win_update();break;case d.st_timeup_animation:this.st_timeup_animation_update();break;case d.st_lose:this.st_lose_update()}},s.play_sound=function(t){var s=h().get_mission_data();1==s.LevelSet.timbre?l.playSound(["14_Piano_Do","15_Piano_Re","16_Piano_Mi","17_Piano_Fa","18_Piano_So","19_Piano_La","20_Piano_Si","21_Piano_Do_1","22_Piano_Re_1"][t-1]):2==s.LevelSet.timbre?l.playSound(["23_flute_do","24_flute_re","25_flute_mi","26_flute_fa","27_flute_so","28_flute_la","29_flute_si","30_flute_do1","31_flute_re1"][t-1]):l.playSound(["32_guitar_do","33_guitar_re","34_guitar_mi","35_guitar_fa","36_guitar_so","37_guitar_la","38_guitar_si","39_guitar_do1","40_guitar_re1"][t-1])},s.switchNS=function(t,s){e(t).getComponent(c).switchSelect(s)},s.switchNS_lock=function(t,s){e(t).getComponent(c).switchLock(s)},s.update=function(){var t=Date.now()-this.last_timestamp;t<33||(this.last_timestamp=Date.now(),this.state!=d.st_play_input&&this.state!=d.st_play_question_sound&&this.state!=d.st_start||(h().getIsInTestMode()&&(t=0),this.cLastPlayTime.update(t)&&this.set_Next_state(d.st_timeup_animation)),this._state_update(),this._state_change())},t}(),v=null;s._RF.pop()}}}));

System.register("chunks:///_virtual/Proc_C_scene.ts",["cc","./Common.ts","./AudioManager.ts","./SpriteFrameManager.ts","./CLastPlayTime.ts"],(function(t){"use strict";var e,s,i,n,a,_,o,r,h,u,l,p,m;return{setters:[function(t){e=t.cclegacy,s=t.find,i=t.Label,n=t.Node,a=t.RichText,_=t.Sprite},function(t){o=t.common_bind_touch_start,r=t.common_getEventTarget,h=t.EventEnum_Scene,u=t.getST},function(t){l=t.AudioManager},function(t){p=t.SpriteFrameManager},function(t){m=t.CLastPlayTime}],execute:function(){var c,v;t("getProc_C_scene",(function(){null===d&&(d=new g,console.log("new Proc_C_scene"));return d})),e._RF.push({},"c70c47ioy9MWrGlW242lV/X","Proc_C_scene",void 0),function(t){t[t.st_none=100]="st_none",t[t.st_init=101]="st_init",t[t.st_into_animation=102]="st_into_animation",t[t.st_start=103]="st_start",t[t.st_play=104]="st_play",t[t.st_win=105]="st_win",t[t.st_lose=106]="st_lose",t[t.st_end=107]="st_end"}(c||(c={})),function(t){t[t.lt_none=100]="lt_none",t[t.lt_show=101]="lt_show",t[t.lt_hide=102]="lt_hide",t[t.lt_waitnext=103]="lt_waitnext"}(v||(v={}));var w=function(){function t(){this.state=v.lt_none,this.input_light=[],this.question_number=[],this.anser_number=[],this.q_step=0,this.wait_user_anser_time=0,this.wait_show_time=0,this.wait_next_time=0,this.max_question_number=350,this.blLose=!1,this.input_btn_Number=[],this.input_btn_hide=[],this.node_input_name=[],this.res_tip=[]}var e=t.prototype;return e.init=function(){this.state=v.lt_none,this.input_light=[],this.question_number=[],this.anser_number=[],this.q_step=0;for(var t=u().get_mission_data(),e=0;e<9;e++)if(this.input_btn_hide.push(!1),0==t.LevelSet.PositionShift)this.input_btn_Number.push(e+1);else if(t.LevelSet.PositionShift>0){var s=e+1-t.LevelSet.PositionShift;s<=0&&(s+=9),this.input_btn_Number.push(s)}else t.LevelSet.PositionShift<0&&(0==Math.floor(2*Math.random())?this.input_btn_Number.push(e+1):this.input_btn_Number.unshift(e+1))},e.start=function(){this.blLose=!1,this.input_btn_hide=[];for(var t=0;t<9;t++)this.input_btn_hide.push(!1);var e=u().get_mission_data();this.q_step=0,this.anser_number=[],this.question_number=[];for(var s=0;s<this.max_question_number;s++){var i=0;i=Array.isArray(e.LevelSet.QuestionType)?e.LevelSet.QuestionType[s%e.LevelSet.QuestionType.length]:Math.floor(9*Math.random())+1,this.question_number.push(i),this.anser_number.push(-1)}console.log(e.LevelSet.QuestionType),console.log(this.question_number),this.next_question()},e.next_question=function(){if(this.q_step>0){if(-1==this.anser_number[this.q_step-1]){for(var t=0,e=0;e<this.q_step;e++)-1==this.anser_number[e]&&t++;t>=3&&(this.blLose=!0)}if(0==this.blLose)for(var s=0;s<this.q_step;s++)if(-1!=this.anser_number[s]&&this.anser_number[s]!=this.question_number[s]){this.blLose=!0;break}}if(!this.blLose){this.q_step++;var i=u().get_mission_data();if(this.wait_show_time=Date.now()+500,Array.isArray(i.LevelSet.QuestionInterval)){var n=Math.floor(Math.random()*i.LevelSet.QuestionInterval.length);this.wait_user_anser_time=1e3*i.LevelSet.QuestionInterval[n]+this.wait_show_time}else this.wait_user_anser_time=1e3*i.LevelSet.QuestionInterval+this.wait_show_time;this.wait_next_time=this.wait_user_anser_time+0,this.reset_input_light(),this.state=v.lt_show;var a=this.question_number[this.q_step-1],o=this.input_btn_Number.indexOf(a);if(0!=i.LevelSet.AnswerPositionShift)if(4==i.LevelSet.AnswerPositionShift){if(8!=o){o=[4,5,6,7,0,1,2,3][o]}}else(o-=i.LevelSet.AnswerPositionShift)<0&&(o+=9);var r=this.input_light[o].getComponent(_);if(this.input_btn_hide[o]){var h=this.input_btn_Number[o];r.spriteFrame=p.getSpriteFrame(["l_1","l_2","l_3","l_4","l_5","l_6","l_7","l_8","l_9"][h-1])}else r.spriteFrame=p.getSpriteFrame("L3_未知圖騰3_高亮");this.update_tip()}},e.reset_input_light=function(){for(var t=0;t<9;t++){var e=this.input_light[t].getComponent(_);if(this.input_btn_hide[t]){var s=this.input_btn_Number[t];e.spriteFrame=p.getSpriteFrame(["1","2","3","4","5","6","7","8","9"][s-1])}else e.spriteFrame=p.getSpriteFrame("L3_未知圖騰_藍")}},e.play_sound=function(t){var e=u().get_mission_data();1==e.LevelSet.timbre?l.playSound(["14_Piano_Do","15_Piano_Re","16_Piano_Mi","17_Piano_Fa","18_Piano_So","19_Piano_La","20_Piano_Si","21_Piano_Do_1","22_Piano_Re_1"][t-1]):2==e.LevelSet.timbre?l.playSound(["23_flute_do","24_flute_re","25_flute_mi","26_flute_fa","27_flute_so","28_flute_la","29_flute_si","30_flute_do1","31_flute_re1"][t-1]):l.playSound(["32_guitar_do","33_guitar_re","34_guitar_mi","35_guitar_fa","36_guitar_so","37_guitar_la","38_guitar_si","39_guitar_do1","40_guitar_re1"][t-1])},e.player_input=function(t){var e=this.node_input_name.indexOf(t.name)+1,s=this.input_btn_Number[e-1],i=!1;if(this.state==v.lt_none&&(i=!0),i||-1!=this.anser_number[this.q_step-1]&&(i=!0),!i)for(var n=0;n<this.q_step;n++)if(-1!=this.anser_number[n]&&this.anser_number[n]!=this.question_number[n]){i=!0;break}var a=!0;if(!i)for(var _=0;_<this.q_step;_++)if(-1==this.anser_number[_]){this.anser_number[_]=s,this.anser_number[_]!=this.question_number[_]&&(a=!1,l.playSound("13_answer02"));break}if(a&&this.play_sound(s),!i){"True"==u().get_mission_data().LevelSet.ShowNumber&&(this.input_btn_hide[e-1]=!0),this.update_tip(),this.reset_input_light();for(var o=0;o<this.q_step;o++)if(-1!=this.anser_number[o]&&this.anser_number[o]!=this.question_number[o]){this.wait_next_time=Date.now()+500,this.state=v.lt_waitnext;break}}},e.update_tip=function(){for(var t=[],e=[],s=0;s<6;s++)t.push(-1),e.push(-1);if(this.q_step>0){var i=this.q_step%6+1;i>this.q_step&&(i=this.q_step);for(var n=0,a=i-1;a>=0;a--){var _=this.q_step-a-1;e[n]=this.anser_number[_],-1!=this.anser_number[_]?this.anser_number[_]==this.question_number[_]?t[n]=1:t[n]=2:t[n]=0,n++}}this.res_tip=[],this.res_tip.push(t),this.res_tip.push(e)},e.set_input_light=function(t,e){this.input_light=t,this.node_input_name=e,this.reset_input_light()},e.get_blloae=function(){return this.blLose},e.get_ans_tip=function(){return this.res_tip},e.update=function(){if(!this.blLose)switch(this.state){case v.lt_show:Date.now()>=this.wait_show_time&&(this.state=v.lt_hide,this.reset_input_light());break;case v.lt_hide:Date.now()>=this.wait_user_anser_time&&(this.state=v.lt_waitnext);case v.lt_waitnext:Date.now()>=this.wait_next_time&&this.next_question()}},t}(),g=function(){function t(){this.state=c.st_none,this.state_next=-1,this.cquestion=null,this.last_timestamp=0,this.cLastPlayTime=null,this.last_wait_timestamp=0,this.node_result_number=[],this.node_result_light=[],this.node_start_last_time=null,this.input_nodes=[],this.state_win_lose_show=0,this.node_result_number_path=["Canvas/數字位置/數字1","Canvas/數字位置/數字2","Canvas/數字位置/數字3","Canvas/數字位置/數字4","Canvas/數字位置/數字5","Canvas/數字位置/數字6"],this.node_result_light_path=["Canvas/tip_Light燈號位置/green_light","Canvas/tip_Light燈號位置/green_light-001","Canvas/tip_Light燈號位置/green_light-002","Canvas/tip_Light燈號位置/green_light-003","Canvas/tip_Light燈號位置/green_light-004","Canvas/tip_Light燈號位置/green_light-005"],this.node_input_number_path=["Canvas/Layer 1/Node-001/1_icon","Canvas/Layer 1/Node-001/2_icon","Canvas/Layer 1/Node-001/3_icon","Canvas/Layer 1/Node-001/4_icon","Canvas/Layer 1/Node-001/5_icon","Canvas/Layer 1/Node-001/6_icon","Canvas/Layer 1/Node-001/7_icon","Canvas/Layer 1/Node-001/8_icon","Canvas/Layer 1/Node-001/9_icon"],this.node_input_name=["1_icon","2_icon","3_icon","4_icon","5_icon","6_icon","7_icon","8_icon","9_icon"],this.blPlay10TimesSound=!1,this.blPlayCount01Sound=!1}var e=t.prototype;return e.init=function(){this.state=c.st_none,this.set_Next_state(c.st_init),this.last_timestamp=Date.now(),this.cLastPlayTime=new m,o("Canvas/Arrow",this.go_select,this),s("Canvas/outturn_lose").active=!1,s("Canvas/outturn_win").active=!1,s("Canvas/start").active=!0,s("Canvas/times_up").active=!1,this.node_start_last_time=s("Canvas/start/time").getComponent(i),o("Canvas/outturn_win/btn_back_mis",this.go_select,this),o("Canvas/outturn_lose/btn_back_mis",this.go_select,this),o("Canvas/outturn_lose/btn_agn",this.go_again,this),this.input_nodes=[];for(var t=0;t<this.node_input_number_path.length;t++){var e=s(this.node_input_number_path[t]);e.off(n.EventType.TOUCH_START,this.input_event,this),e.on(n.EventType.TOUCH_START,this.input_event,this),this.input_nodes.push(e)}this.cquestion=new w,this.cquestion.init(),this.cquestion.set_input_light(this.input_nodes,this.node_input_name)},e.go_select=function(){l.playSound("7_click01"),r().emit(h.Go_SelectScene)},e.go_again=function(){this.state==c.st_lose&&(l.playSound("7_click01"),this.set_Next_state(c.st_init))},e.st_init_in=function(){var t=u().get_mission_data();this.node_result_number=[],this.node_result_light=[];for(var e=0;e<6;e++){var i=s(this.node_result_number_path[e]).getComponent(a);this.node_result_number.push(i);var n=s(this.node_result_light_path[e]).getComponent(_);this.node_result_light.push(n)}for(var o=0;o<6;o++){this.node_result_number[o].enabled=!1,this.node_result_light[o].enabled=!0,this.node_result_light[o].getComponent(_).spriteFrame=p.getSpriteFrame("白燈")}this.cLastPlayTime.start(1e3*t.LevelSet.Time),s("Canvas/標題").getComponent(a).string="<color=#FFFFFF>"+t.GameLevel+"</color>",s("Canvas/outturn_lose").active=!1,s("Canvas/outturn_win").active=!1,s("Canvas/start").active=!0,s("Canvas/times_up").active=!1;for(var r=0;r<9;r++){s(this.node_input_number_path[r]).getComponent(_).spriteFrame=p.getSpriteFrame("L3_未知圖騰_藍")}return this.blPlay10TimesSound=!1,this.blPlayCount01Sound=!1,!0},e.st_into_animation_in=function(){return this.last_wait_timestamp=Date.now()+3e3,l.playSound("8_9_countdown_and_start"),!0},e.st_into_animation_update=function(){var t=this.last_wait_timestamp-Date.now();if(t>=0){for(var e=Math.floor(t/1e3)+1,i=0;i<3;i++){var n=s("Canvas/start/start_"+(i+1));n.active=e==i+1}this.node_start_last_time.string="..."+Math.floor(t/1e3).toString()+"..."}else{this.set_Next_state(c.st_start),s("Canvas/start").active=!1,l.playMusic("3_bgm03")}},e.st_start_in=function(){return!0},e.st_play_in=function(){for(var t=0;t<this.node_result_number.length;t++){this.node_result_number[t].enabled=!1,this.node_result_light[t].getComponent(_).spriteFrame=p.getSpriteFrame("白燈")}return this.cquestion.start(),!0},e.st_play_update=function(){this.cquestion.get_blloae()?this.set_Next_state(c.st_lose):this.cquestion.update();for(var t=this.cquestion.get_ans_tip(),e=0;e<6;e++)-1!=t[1][e]?(this.node_result_number[e].string="<color=#FFFFFF>"+t[1][e]+"</color>",this.node_result_number[e].enabled=!0):this.node_result_number[e].enabled=!1;for(var s=0;s<6;s++){var i=this.node_result_light[s].getComponent(_);1==t[0][s]?i.spriteFrame=p.getSpriteFrame("綠燈"):2==t[0][s]?i.spriteFrame=p.getSpriteFrame("紅燈"):0==t[0][s]?i.spriteFrame=p.getSpriteFrame("黃燈"):i.spriteFrame=p.getSpriteFrame("白燈")}},e.st_win_in=function(){u().setWin(this.cLastPlayTime.getLastPlayTime()),s("Canvas/outturn_win").active=!0,this.state_win_lose_show=0,this.last_wait_timestamp=Date.now();var t=s("Canvas/outturn_win/SpriteSplash/Node/sc_01").getComponent(i);t.enabled=!1,t.string=u().play_last_time_m.toString().padStart(2,"0")+":"+u().play_last_time_s.toString().padStart(2,"0")+":"+u().play_last_time_ms.toString().padStart(2,"0");var e=s("Canvas/outturn_win/SpriteSplash/Node/sc_02").getComponent(i);e.string="0",e.enabled=!1;var n=s("Canvas/outturn_win/SpriteSplash/Node/sc_03").getComponent(i);return n.string="0",n.enabled=!1,s("Canvas/outturn_win/btn_back_mis").active=!1,l.stopMusic(),l.playSound("4_bgm04"),!0},e.st_win_update=function(){if(0==this.state_win_lose_show)Date.now()-this.last_wait_timestamp>=1e3&&(s("Canvas/outturn_win/SpriteSplash/Node/sc_01").getComponent(i).enabled=!0,this.state_win_lose_show=1,this.last_wait_timestamp=Date.now());else if(1==this.state_win_lose_show){var t=Math.floor(u().play_score/Math.pow(2,20)*Math.pow(2,(Date.now()-this.last_wait_timestamp)/50));Date.now()-this.last_wait_timestamp>=1e3&&(t=u().play_score,this.state_win_lose_show=2,this.last_wait_timestamp=Date.now());var e=s("Canvas/outturn_win/SpriteSplash/Node/sc_02").getComponent(i);0==e.enabled&&(e.enabled=!0),e.string=t.toString()}else if(2==this.state_win_lose_show){var n=Math.floor(u().play_totle_score/Math.pow(2,20)*Math.pow(2,(Date.now()-this.last_wait_timestamp)/50));Date.now()-this.last_wait_timestamp>=1e3&&(n=u().play_totle_score,this.state_win_lose_show=3,this.last_wait_timestamp=Date.now());var a=s("Canvas/outturn_win/SpriteSplash/Node/sc_03").getComponent(i);0==a.enabled&&(a.enabled=!0),a.string=n.toString(),0==this.blPlayCount01Sound&&Date.now()-this.last_wait_timestamp>=200&&(this.blPlayCount01Sound=!0,l.playMusic("6_count01"))}else if(3==this.state_win_lose_show){s("Canvas/outturn_win/btn_back_mis").active=!0,this.state_win_lose_show=4,l.stopMusic()}},e.st_lose_in=function(){u().setLose(this.cLastPlayTime.getLastPlayTime()),this.last_wait_timestamp=Date.now(),s("Canvas/outturn_lose").active=!0,this.state_win_lose_show=0,this.last_wait_timestamp=Date.now();var t=s("Canvas/outturn_lose/SpriteSplash/sc_01").getComponent(i);t.enabled=!1,t.string=u().play_last_time_m.toString().padStart(2,"0")+":"+u().play_last_time_s.toString().padStart(2,"0")+":"+u().play_last_time_ms.toString().padStart(2,"0"),s("Canvas/outturn_lose/SpriteSplash/sc_02").getComponent(i).enabled=!1;var e=s("Canvas/outturn_lose/SpriteSplash/sc_03").getComponent(i);return e.enabled=!1,e.string=u().play_totle_score.toString(),s("Canvas/outturn_lose/btn_back_mis").active=!1,s("Canvas/outturn_lose/btn_agn").active=!1,l.stopMusic(),!0},e.st_lose_update=function(){if(0==this.state_win_lose_show)Date.now()-this.last_wait_timestamp>=1e3&&(s("Canvas/outturn_lose/SpriteSplash/sc_01").getComponent(i).enabled=!0,this.state_win_lose_show=1,this.last_wait_timestamp=Date.now());else if(1==this.state_win_lose_show){if(Date.now()-this.last_wait_timestamp>=1e3)s("Canvas/outturn_lose/SpriteSplash/sc_02").getComponent(i).enabled=!0,this.state_win_lose_show=2,this.last_wait_timestamp=Date.now()}else if(2==this.state_win_lose_show){if(Date.now()-this.last_wait_timestamp>=1e3)s("Canvas/outturn_lose/SpriteSplash/sc_03").getComponent(i).enabled=!0,this.state_win_lose_show=3,this.last_wait_timestamp=Date.now()}else if(3==this.state_win_lose_show){if(Date.now()-this.last_wait_timestamp>=1e3)this.state_win_lose_show=4,s("Canvas/outturn_lose/btn_back_mis").active=!0,s("Canvas/outturn_lose/btn_agn").active=!0}},e.input_event=function(t){this.state==c.st_play&&(l.playSound("11_click02"),this.cquestion.player_input(t.target))},e.set_Next_state=function(t){return console.log("set_Next_state:"+t),-1==this.state_next&&(this.state_next=t,!0)},e._state_change=function(){if(-1!=this.state_next){var t=!0;switch(this.state_next){case c.st_init:t=this.st_init_in();break;case c.st_into_animation:t=this.st_into_animation_in();break;case c.st_start:t=this.st_start_in();break;case c.st_play:t=this.st_play_in();break;case c.st_win:t=this.st_win_in();break;case c.st_lose:t=this.st_lose_in()}t&&(this.state=this.state_next,this.state_next=-1)}},e._state_update=function(){switch(this.state){case c.st_init:this.set_Next_state(c.st_into_animation);break;case c.st_into_animation:this.st_into_animation_update();break;case c.st_start:this.set_Next_state(c.st_play);break;case c.st_play:this.st_play_update();break;case c.st_win:this.st_win_update();break;case c.st_lose:this.st_lose_update()}},e.update=function(){var t=Date.now()-this.last_timestamp;t<33||(this.last_timestamp=Date.now(),this.state!=c.st_play&&this.state!=c.st_start||(u().getIsInTestMode()&&(t=0),this.cLastPlayTime.update(t)&&this.set_Next_state(c.st_win)),this._state_update(),this._state_change())},t}(),d=null;e._RF.pop()}}}));

System.register("chunks:///_virtual/Proc_GameHome.ts",["cc","./Common.ts","./AudioManager.ts"],(function(e){"use strict";var t,n,a,i,o,s,g,_,h,c,m;return{setters:[function(e){t=e.cclegacy,n=e.find,a=e.Node,i=e.Label,o=e.UITransform,s=e.RichText},function(e){g=e.common_bind_touch_start,_=e.getST,h=e.common_getEventTarget,c=e.EventEnum_Scene},function(e){m=e.AudioManager}],execute:function(){e("getProc_GameHome",(function(){null===l&&(l=new u,console.log("new Proc_GameHome"));return l})),t._RF.push({},"0ad32Qgm6hHeJFN3MzGaCTI","Proc_GameHome",void 0);var u=function(){function e(){this.game_scene_name=["A_scene","B_scene","C_scene","Rankings"],this.game_scene_lable=["破解密碼","尋找聲波","攔截訊號","戰績排行"],this.btn_goLogin_name=["Canvas/back/Button"],this.btn_goGame_name="Canvas/PageView",this.btn_goInfo_name="Canvas/info/Button",this.btn_Left_name="Canvas/箭頭_L",this.btn_Right_name="Canvas/箭頭_R",this.gh_page=1}var t=e.prototype;return t.init=function(){this.updatePage();for(var e=0;e<this.btn_goLogin_name.length;e++)g(this.btn_goLogin_name[e],this.gh_show_exit,this);if(g("Canvas/Exit_game/聲波密碼戰_確定",this.goLogin_Y,this),g("Canvas/Exit_game/聲波密碼戰_取消",this.goLogin_N,this),g(this.btn_goGame_name,this.goGame,this),g("Canvas/RichText",this.goGame,this),g(this.btn_Left_name,this.gh_page_left,this),g(this.btn_Right_name,this.gh_page_right,this),g(this.btn_goInfo_name,this.goInfo,this),_().get_bl_open_test_debug()){var t=n("Canvas/debug_btn");t.active=!0,t.on(a.EventType.TOUCH_START,(function(){_().switchTestMode()?n("Canvas/debug_btn/Label_sw").getComponent(i).string="Open":n("Canvas/debug_btn/Label_sw").getComponent(i).string="Close"}),this),_().getIsInTestMode()?n("Canvas/debug_btn/Label_sw").getComponent(i).string="Open":n("Canvas/debug_btn/Label_sw").getComponent(i).string="Close"}},t.gh_show_exit=function(){m.playSound("7_click01"),n("Canvas/Exit_game").active=!0},t.goLogin_Y=function(){m.stopMusic(),m.playSound("7_click01"),window.location.href="../index.html"},t.goLogin_N=function(){m.playSound("7_click01"),n("Canvas/Exit_game").active=!1},t.goInfo=function(){h().emit(c.Go_Info),m.playSound("7_click01")},t.goGame=function(){4==this.gh_page?h().emit(c.Go_Rankings):(_().select_Game=this.gh_page,h().emit(c.Go_SelectScene)),m.playSound("7_click01")},t.gh_page_left=function(){m.playSound("7_click01"),this.gh_page>1?this.gh_page--:this.gh_page=this.game_scene_name.length,this.updatePage()},t.gh_page_right=function(){m.playSound("7_click01");var e=this.game_scene_name.length;this.gh_page<e?this.gh_page++:this.gh_page=1,this.updatePage()},t.getGameSceneName=function(){return this.game_scene_name[this.gh_page-1]},t.updatePage=function(){var e=n("Canvas/PageView/view/content").getComponent(o);e&&e.setAnchorPoint(.25*(this.gh_page-1),.5);var t=n("Canvas/RichText").getComponent(s);t&&(t.string="<b><color=#FFFFFF>"+this.game_scene_lable[this.gh_page-1]+"</color></b>")},e}(),l=null;t._RF.pop()}}}));

System.register("chunks:///_virtual/Proc_Info.ts",["cc","./Common.ts","./AudioManager.ts"],(function(n){"use strict";var o,t,e,c,i;return{setters:[function(n){o=n.cclegacy},function(n){t=n.common_bind_touch_start,e=n.common_getEventTarget,c=n.EventEnum_Scene},function(n){i=n.AudioManager}],execute:function(){n("getProc_Info",(function(){null===u&&(u=new a,console.log("new Proc_GameHome"));return u})),o._RF.push({},"091a1b7caRCsZ+swjW3OPEp","Proc_Info",void 0);var a=function(){function n(){this.btn_goHome_name=["Canvas/back/Button"]}var o=n.prototype;return o.init=function(){for(var n=0;n<this.btn_goHome_name.length;n++)t(this.btn_goHome_name[n],this.goHome,this);t("Canvas/聲波密碼戰_N1",(function(){window.location.href="http://axis.chanliu.org/"}),this),t("Canvas/聲波密碼戰_N2",(function(){window.location.href="http://flames.chanliu.org/"}),this),t("Canvas/聲波密碼戰_N3",(function(){window.location.href="http://cachecache.chanliu.org/"}),this)},o.goHome=function(){i.playSound("7_click01"),e().emit(c.Go_GameHome)},n}(),u=null;o._RF.pop()}}}));

System.register("chunks:///_virtual/Proc_Login.ts",["cc","./Common.ts","./AudioManager.ts","./SpriteFrameManager.ts"],(function(n){"use strict";var t,i,o,a,e,s,c,r;return{setters:[function(n){t=n.cclegacy,i=n.find},function(n){o=n.common_bind_touch_start,a=n.getST,e=n.common_getEventTarget,s=n.EventEnum_Scene},function(n){c=n.AudioManager},function(n){r=n.SpriteFrameManager}],execute:function(){n("getProc_Login",(function(){null===g&&(g=new u,console.log("new Proc_Login"));return g})),t._RF.push({},"a8776II23FH/Y1WjUuff0P6","Proc_Login",void 0);var u=function(){function n(){this.btn_goGamehome_name=["Canvas/1/icon/Google_icon-001","Canvas/1/icon/Facebook_icon","Canvas/1/icon/apple","Canvas/1/登入button/Button-002","Canvas/1/登入button/Button-003","Canvas/stroy/toHome"],this.isRunning=!1,this.isLoading=!1,this.wait_loading_time=0}var t=n.prototype;return t.init=function(){for(var n=0;n<this.btn_goGamehome_name.length;n++)o(this.btn_goGamehome_name[n],this.input_event,this);var t=i("Canvas/stroy"),a=i("Canvas/3");t.active=!1,a.active=!0,this.isLoading=!0,this.wait_loading_time=Date.now()+1e3,this.isRunning=!0},t.update=function(){if(this.isLoading&&Date.now()>this.wait_loading_time){if(0==a().isLoadOk)return;if(0==c.isLoadOk())return;if(0==r.isLoadOk())return;this.isLoading=!1;var n=i("Canvas/stroy"),t=i("Canvas/3");n.active=!0,t.active=!1,c.playMusic("2_bgm02")}},t.input_event=function(){this.isRunning=!1,e().emit(s.Go_GameHome),c.playSound("7_click01")},n}(),g=null;t._RF.pop()}}}));

System.register("chunks:///_virtual/Proc_R_scene.ts",["cc","./Common.ts","./AudioManager.ts","./ns_SwitchSprite.ts"],(function(e){"use strict";var t,n,a,i,o,s,_,p,r,c;return{setters:[function(e){t=e.cclegacy,n=e.find,a=e.Label,i=e.instantiate},function(e){o=e.common_bind_touch_start,s=e.getST,_=e.common_getEventTarget,p=e.EventEnum_Scene},function(e){r=e.AudioManager},function(e){c=e.ns_SwitchSprite}],execute:function(){var h;e("getProc_R_scene",(function(){null===l&&(l=new g,console.log("new Proc_R_scene"));return l})),t._RF.push({},"5cc53BnNi1MapcdOJUU//bu","Proc_R_scene",void 0),function(e){e[e.st_none=100]="st_none",e[e.st_init=101]="st_init",e[e.st_end=102]="st_end"}(h||(h={}));var g=function(){function e(){this.state=h.st_none,this.page_path_name=["Canvas/BG/SpriteSplash-001/page_01","Canvas/BG/SpriteSplash-001/page_02","Canvas/BG/SpriteSplash-001/page_03","Canvas/BG/SpriteSplash-001/page_04"],this.page_name=["page_01","page_02","page_03","page_04"],this.my_info_type_path=["Canvas/BG/playerinfo/資訊框_密碼","Canvas/BG/playerinfo/資訊框_聲波","Canvas/BG/playerinfo/資訊框_攔截","Canvas/BG/playerinfo/資訊框_總排行"],this.my_info_type_Node=[],this.baseItem=null,this.cloneBase=null,this.now_page=1}var t=e.prototype;return t.init=function(){this.now_page=1,this.baseItem=n("Canvas/BG/SpriteSplash-001/ScrollView/view/content/basenode/item"),this.baseItem.active=!1,this.cloneBase=n("Canvas/BG/SpriteSplash-001/ScrollView/view/content/clone");for(var e=0;e<this.my_info_type_path.length;e++)this.my_info_type_Node[e]=n(this.my_info_type_path[e]);o("Canvas/BG/Arrow",this.go_GameHome,this);for(var t=0;t<this.page_path_name.length;t++)o(this.page_path_name[t],this.pageDown,this);this.update_page()},t.pageDown=function(e){var t=this.page_name.indexOf(e.target.name);this.now_page=t+1,this.update_page(),r.playSound("7_click01")},t.update_page=function(){for(var e=0;e<this.page_path_name.length;e++){var t=n(this.page_path_name[e]).getComponent(c);if(this.now_page==e+1){t.switchSelect(!0),this.my_info_type_Node[e].active=!0,n("Canvas/BG/playerinfo/name").getComponent(a).string=s().myRankData[e].name,n("Canvas/BG/playerinfo/sc01").getComponent(a).string=s().myRankData[e].rank.toString(),n("Canvas/BG/playerinfo/sc02").getComponent(a).string=s().myRankData[e].score.toString(),this.cloneBase.destroyAllChildren(),this.cloneBase.removeAllChildren(),console.log("this.now_page = "+this.now_page);for(var o=s().rank_data[e],_=0;_<o.length;_++){var p=i(this.baseItem);p.active=!0,p.parent=this.cloneBase,p.setPosition(0,-55*_),p.getChildByName("num").getComponent(a).string=o[_].rank.toString(),p.getChildByName("name").getComponent(a).string=o[_].name,p.getChildByName("score").getComponent(a).string=o[_].score.toString(),this.cloneBase.addChild(p)}}else this.my_info_type_Node[e].active=!1,t.switchSelect(!1)}},t.go_GameHome=function(){r.playSound("7_click01"),_().emit(p.Go_GameHome)},e}(),l=null;t._RF.pop()}}}));

System.register("chunks:///_virtual/Proc_Select_scene.ts",["cc","./Common.ts","./AudioManager.ts"],(function(i){"use strict";var e,t,n,s,o,_,c,a,l;return{setters:[function(i){e=i.cclegacy,t=i.find,n=i.Node,s=i.RichText},function(i){o=i.getST,_=i.common_bind_touch_start,c=i.common_getEventTarget,a=i.EventEnum_Scene},function(i){l=i.AudioManager}],execute:function(){i("getProc_Select_scene",(function(){null===r&&(r=new m,console.log("new Proc_Select_scene"));return r})),e._RF.push({},"5926fjHbvRB34Bg4Gqaj/0i","Proc_Select_scene",void 0);var m=function(){function i(){this.select_Game=1,this.select_Mission=1,this.btn_mis_path=["Canvas/BG/ScrollView/view/content/mis_01","Canvas/BG/ScrollView/view/content/mis_02","Canvas/BG/ScrollView/view/content/mis_03","Canvas/BG/ScrollView/view/content/mis_04","Canvas/BG/ScrollView/view/content/mis_05","Canvas/BG/ScrollView/view/content/mis_06","Canvas/BG/ScrollView/view/content/mis_07","Canvas/BG/ScrollView/view/content/mis_08","Canvas/BG/ScrollView/view/content/mis_09","Canvas/BG/ScrollView/view/content/mis_10","Canvas/BG/ScrollView/view/content/mis_11","Canvas/BG/ScrollView/view/content/mis_12","Canvas/BG/ScrollView/view/content/mis_13","Canvas/BG/ScrollView/view/content/mis_14","Canvas/BG/ScrollView/view/content/mis_15","Canvas/BG/ScrollView/view/content/mis_16","Canvas/BG/ScrollView/view/content/mis_17","Canvas/BG/ScrollView/view/content/mis_18","Canvas/BG/ScrollView/view/content/mis_19","Canvas/BG/ScrollView/view/content/mis_20"],this.node_input_mis=["mis_01","mis_02","mis_03","mis_04","mis_05","mis_06","mis_07","mis_08","mis_09","mis_10","mis_11","mis_12","mis_13","mis_14","mis_15","mis_16","mis_17","mis_18","mis_19","mis_20"],this.node_mission_info=[]}var e=i.prototype;return e.init=function(){this.select_Game=o().select_Game,this.select_Mission=o().play_Game_Max_Mission_level[this.select_Game-1],o().select_Mission=this.select_Mission,_("Canvas/BG/Arrow",this.go_game_home,this),_("Canvas/BG/SpriteSplash-001/go_game",this.go_game,this);for(var i=0;i<this.btn_mis_path.length;i++){var e=t(this.btn_mis_path[i]+"/mark"),c=t(this.btn_mis_path[i]);c.off(n.EventType.TOUCH_START,this.input_mission_event,this),i<=this.select_Mission-1?(e.active=!1,c.on(n.EventType.TOUCH_START,this.input_mission_event,this)):e.active=!0}for(var a=["Canvas/BG/SpriteSplash-001/RichText_1","Canvas/BG/SpriteSplash-001/RichText_2","Canvas/BG/SpriteSplash-001/ScrollView/view/content/RichText_3"],l=0;l<a.length;l++){var m=t(a[l]);this.node_mission_info[l]=m.getComponent(s)}this.update_SelectF_and_info()},e.input_mission_event=function(i){var e=this.node_input_mis.indexOf(i.target.name)+1;this.select_Mission=e,o().select_Mission=e,this.update_SelectF_and_info(),l.playSound("7_click01")},e.update_SelectF_and_info=function(){var i=t(this.btn_mis_path[this.select_Mission-1]),e=t("Canvas/BG/ScrollView/view/content/selectF"),n=i.getPosition();e.setPosition(n.x,n.y+56,0);var s=o().get_mission_data();this.node_mission_info[0].string="<color=#FFFFFF>"+s.Information.Difficulty+"</color>",this.node_mission_info[1].string="<color=#FFFFFF>"+s.LevelSet.Time+"秒</color>",this.node_mission_info[2].string="<color=#FFFFFF>"+s.Information.Description+"</color>",console.log(s.Information.Description)},e.go_game_home=function(){l.playSound("7_click01"),c().emit(a.Go_GameHome)},e.go_game=function(){l.playSound("7_click01"),1==this.select_Game?c().emit(a.Go_Game_A):2==this.select_Game?c().emit(a.Go_Game_B):3==this.select_Game&&c().emit(a.Go_Game_C)},i}(),r=null;e._RF.pop()}}}));

System.register("chunks:///_virtual/SpriteFrameManager.ts",["cc"],(function(e){"use strict";var r,a,t,i;return{setters:[function(e){r=e.cclegacy,a=e.log,t=e.resources,i=e.SpriteFrame}],execute:function(){r._RF.push({},"7aedfHuXO9MIZdtJKZxpNpa","SpriteFrameManager",void 0);var n=e("SpriteFrameManager",function(){function e(){}return e.init=function(){a("Init SpriteFrameManager !")},e.isLoadOk=function(){for(var r in e._cachedSpriteFrameMap)if(null==e._cachedSpriteFrameMap[r])return!1;return!0},e.preloadSpriteFrame=function(r){var a="img/"+r+"/spriteFrame";a in e._spriteName||(e._spriteName.push(a),e._cachedSpriteFrameMap[a]=null,t.load(a,i,(function(r,t){r?console.warn(r):e._cachedSpriteFrameMap[a]=t})))},e.getSpriteFrame=function(r){var a="img/"+r+"/spriteFrame";return e._cachedSpriteFrameMap[a]},e}());n._cachedSpriteFrameMap={},n._spriteName=[],r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
//# sourceMappingURL=index.js.map